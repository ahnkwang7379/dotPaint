(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{242:function(e,t,n){e.exports=n(453)},247:function(e,t,n){},261:function(e,t,n){},270:function(e,t){},272:function(e,t){},282:function(e,t){},453:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(14),f=n.n(o),c=(n(247),n(91)),l=n(23),i=n(506),u=n(504),d=n(507),s=n(456),m=n(501),p=Object(m.a)((function(e){return{root:{display:"flex",maxWidth:"100%",overflow:"hidden"},title:{flexGrow:1},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},toolbar:{height:"64px"},content:{width:"100%",height:"100vh",flexGrow:1,padding:e.spacing(1),background:"#F2E8DC"}}})),b=r.a.memo(Object(l.f)((function(e){var t=e.children,n=p();return r.a.createElement("div",{className:n.root,id:"mainBox"},r.a.createElement(u.a,null),r.a.createElement(i.a,{position:"fixed",className:n.appBar},r.a.createElement(d.a,null,r.a.createElement(s.a,{variant:"h6",className:n.title,noWrap:!0},"Dot Art"))),r.a.createElement("main",{className:n.content},r.a.createElement("div",{className:n.toolbar}),t))}))),E=r.a.memo((function(e){var t=e.children;return r.a.createElement(b,null,t)})),g=n(4),O=n(11),v=n(511),h=n(512),x=n(215),C=n.n(x),j=n(513),A=n(12),y=n(203);function T(e,t,n,a){return D(e,{pSize:n,c:t,duration:a,cssClassName:"dotArt-to-css"})}var S=function(e,t){e=e.flat();var n=function(e){return e%t.c*t.pSize+t.pSize},a=function(e){return parseInt(e/t.c,10)*t.pSize+t.pSize};switch(t.format){case"array":return e.reduce((function(e,t,r){return""!==t&&e.push({x:n(r),y:a(r),color:t}),e}),[]);default:return e.reduce((function(e,t,r){return""!==t?"".concat(e," ").concat(n(r),"px ").concat(a(r),"px ").concat(t,","):e}),"").slice(1,-1)}},L=function(e,t){var n=Object(y.generateAnimationIntervals)(e);return e.reduce((function(e,a,r){var o=e;try{var f=a.layer||a.get("layer")||0;if(f){var c=S(f,{pSize:t.pSize,c:t.c});""===c&&(c="0px 0px #00000000");var l=0===r?0:n[r]+.01,i=n[r+1];o["".concat(l,"%, ").concat(i,"%")]={boxShadow:"".concat(c,";height: ").concat(t.pSize,"px; width: ").concat(t.pSize,"px")}}}catch(u){console.error("Input data error: Each frame object must contain a grid value")}return o}),{})},I=function(e,t){var n=S(e,t);return".".concat(t.cssClassName," {\n  box-shadow: ").concat(n,";\n  height: ").concat(t.pSize,"px;\n  width: ").concat(t.pSize,"px;\n}")},D=function(e,t){var n=L(e,t),a="";for(var r in a+=".".concat(t.cssClassName," {\n  position: absolute;\n  "),a+="animation: x ".concat(t.duration,"s infinite;\n  "),a+="-webkit-animation: x ".concat(t.duration,"s infinite;\n  "),a+="-moz-animation: x ".concat(t.duration,"s infinite;\n  "),a+="-o-animation: x ".concat(t.duration,"s infinite;\n}\n\n"),a+="@keyframes x {\n",n)if(Object.prototype.hasOwnProperty.call(n,r)){var o=n[r].boxShadow;a+="".concat(r,"{\n  box-shadow: ").concat(o,"\n  }\n")}return a+="}"},k=n(3),_=n(20),w=n.n(_);function R(){var e=Object(g.a)(["",""]);return R=function(){return e},e}var N=function(e){var t=e.boxShadow,n=e.duration,a="anim-".concat(w.a.generate()),o="".concat(a),f=Object(k.c)(R(),t).rules,c={position:"absolute",animation:"x ".concat(n,"s infinite"),animationName:o},l="@keyframes ".concat(o," {").concat(f,"}");return r.a.createElement("div",null,r.a.createElement("div",{className:"animation-container",style:c}),r.a.createElement("style",null,l))},P=r.a.memo((function(e){var t=e.dotSet,n=e.dotList,a=e.column,o=e.size,f=e.animation,c=e.duration,l=e.zIndex,i=e.opacity,u="string"===typeof o?parseFloat(o):o,d={position:"relative",top:"-".concat(u,"px"),left:"-".concat(u,"px")};return r.a.createElement("div",{className:"preview",style:d},function(){var e,o,d=a,s=i||1;if(f)return o=function(e,t,n){return L(e,{pSize:n,c:t})}(n,d,u),r.a.createElement(N,{boxShadow:o,duration:c});e=function(e,t,n,a){return S(e,{format:a,pSize:n,c:t})}(t,d,u,"string");var m={previewWrapper:{position:"absolute",height:u,width:u,boxShadow:e,MozBoxShadow:e,WebkitBoxShadow:e,border:"0px",zIndex:l||"",opacity:s}};return r.a.createElement("div",{style:m.previewWrapper})}())})),z=n(78);function F(){var e=Object(g.a)(["\n      color: #0d0d0d;\n      background: ",";\n      box-shadow: 0 0.1rem #666;\n      transform: translateY(4px);\n    "]);return F=function(){return e},e}function H(){var e=Object(g.a)(["\n      &:hover {\n        color: #0d0d0d;\n        background: ",";\n      }\n      &:active {\n        color: #0d0d0d;\n        background: ",";\n        box-shadow: 0 0.1rem #666;\n        transform: translateY(4px);\n      }\n    "]);return H=function(){return e},e}function M(){var e=Object(g.a)(["\n      background: ",";\n      color: #fff;\n    "]);return M=function(){return e},e}function G(){var e=Object(g.a)(["\n  background-color: #f2f2f2;\n  font-size: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #59564f;\n  ","\n  width: ",";\n  height: ",";\n  border: 2px solid #59564f;\n  outline: none;\n  border-radius: 0.5rem;\n  text-align: center;\n  box-shadow: 0 0.3rem #999;\n  transition: all 0.05s ease-in-out;\n  ","\n\n  &:disabled {\n    background: #afafaf;\n    color: #777777;\n  }\n\n  ","\n"]);return G=function(){return e},e}var W=k.b.button(G(),(function(e){return e.baseColor&&Object(k.a)(M(),e.baseColor)}),(function(e){return e.width?"".concat(e.width,"px"):"100%"}),(function(e){return e.height?"".concat(e.height,"px"):"100%"}),(function(e){return!e.disable&&Object(k.a)(H(),(function(e){return e.color?"".concat(e.color):"#a69e94"}),(function(e){return e.color?"".concat(e.color):"#a69e94"}))}),(function(e){return!0===e.selected&&Object(k.a)(F(),(function(e){return e.selectColor?"".concat(e.selectColor):"#a69e94"}))})),B=r.a.memo((function(e){var t=e.children,n=Object(z.a)(e,["children"]);return r.a.createElement(W,n,t)})),V=n(45),U=n(518),Y=n(5);function K(e,t){return new Array(e).fill().map((function(){return new Array(t).fill("")}))}function Z(e,t,n,a){for(var r=K(n=n||e.length,a=a||e[0].length),o=0;o<n;o++)for(var f=0;f<a;f++)""!==e[o][f]?r[o][f]=e[o][f]:r[o][f]=t[o][f];return r}function J(e,t,n,a){n=n||e[0].length,a=a||e[0][0].length;for(var r=t.map((function(e){return e.dotFrameIdx})),o=K(n,a),f=0;f<n;f++)for(var c=0;c<a;c++)for(var l=r.length-1;l>=0;l--){var i=e[r[l]][f][c];if(""!==i){o[f][c]=i;break}}return o}function X(e,t){return e.map((function(e){return Object(Y.a)({},e,{layer:J(e.layerList,t)})}))}function Q(){var e=Object(g.a)([""]);return Q=function(){return e},e}function $(){var e=Object(g.a)(["\n  overflow: auto;\n  max-width: 100%;\n  max-height: 100%;\n  border: 1px solid #9e9e9e;\n"]);return $=function(){return e},e}function q(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  margin-bottom: 8px;\n  & > * {\n    margin: 8px;\n    max-width: 160px;\n  }\n"]);return q=function(){return e},e}function ee(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n"]);return ee=function(){return e},e}var te,ne,ae=k.b.div(ee()),re=k.b.div(q()),oe=k.b.div($()),fe=k.b.div.attrs((function(e){var t=e.pixelSize,n=e.columnCount,a=e.rowCount;return{style:{width:"".concat(n*t,"px"),height:"".concat(a*t,"px")}}}))(Q()),ce=function(e){var t=e.dotFrameList,n=e.activeIdx,o=e.rowCount,f=e.columnCount,c=e.animationDuration,l=e.pixelSize,i=e.layerData,u=e.handleChangeAnimationDuration,d=e.handleChangePixelSize,s=Object(a.useState)(!0),m=Object(A.a)(s,2),p=m[0],b=m[1];return r.a.createElement(ae,null,r.a.createElement(re,null,r.a.createElement(U.a,{size:"small",variant:"outlined",type:"number",label:"Animation Duration",color:"secondary",value:c,onChange:function(e){return function(e){b(!1),e.target.value<=0||""===e.target.value?u(0):u(e.target.value)}(e)}}),r.a.createElement(U.a,{size:"small",variant:"outlined",type:"number",label:"PixelSize",color:"secondary",value:l,onChange:function(e){return function(e){d(e.target.value)}(e)}}),r.a.createElement(B,{onClick:function(){b(!p)},selected:p,selectColor:"#f05556",color:p?"#b71b2d":"#008000",width:"40",height:"40",baseColor:"#3db12a"},p?r.a.createElement(V.e,null):r.a.createElement(V.f,null))),r.a.createElement(oe,null,r.a.createElement(fe,{pixelSize:l,columnCount:f,rowCount:o},!p&&r.a.createElement(P,{dotSet:J(t[n].layerList,i),column:f,size:l}),p&&r.a.createElement(P,{dotList:X(t,i),column:f,size:l,animation:p,duration:c}))))},le=n(8),ie=n(520),ue=n(515),de=n(55),se="DOT",me="BUCKET",pe="PICKER",be="ERASER",Ee="MOVE",ge=Object(ie.a)("paintTool/CHANGE_PAINT_TOOL",(function(e){return e})),Oe=Object(ie.a)("paintTool/CHANGE_PAINT_STATE",(function(e){return e})),ve=Object(ie.a)("paintTool/SET_DIRECTION",(function(e){return e})),he={selectedPaintTool:se,paintState:"IDLE",direction:"LEFT"},xe=Object(ue.a)((te={},Object(le.a)(te,"paintTool/CHANGE_PAINT_TOOL",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{selectedPaintTool:n})})),Object(le.a)(te,"paintTool/CHANGE_PAINT_STATE",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{paintState:n})})),Object(le.a)(te,"paintTool/SET_DIRECTION",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{direction:n})})),te),he),Ce=Object(ie.a)("dot/CLEAR_DOT"),je=Object(ie.a)("dot/NEW_DOT_ART_PROJECT"),Ae=Object(ie.a)("dot/LOAD_DOT_ART",(function(e){return e})),ye=Object(ie.a)("dot/INCREASE_COLUMN"),Te=Object(ie.a)("dot/DECREASE_COLUMN"),Se=Object(ie.a)("dot/INCREASE_ROW"),Le=Object(ie.a)("dot/DECREASE_ROW"),Ie=Object(ie.a)("dot/CHANGE_DOT_AREA",(function(e){return{newRow:e.newRow,newColumn:e.newColumn}})),De=Object(ie.a)("dot/CHANGE_ACTIVE_IDX",(function(e){return e})),ke=Object(ie.a)("dot/REMOVE_ACTIVE_DOT_ART"),_e=Object(ie.a)("dot/COPY_ACTIVE_DOT_ART"),we=Object(ie.a)("dot/ADD_NEW_DOT_ART"),Re=Object(ie.a)("dot/CHANGE_ANIMATION_INTERVAL",(function(e,t){return{interval:e,activeIdx:t}})),Ne=Object(ie.a)("dot/CHANGE_ANIMATION_DURATION",(function(e){return e})),Pe=Object(ie.a)("dot/CHANGE_PIXEL_SIZE",(function(e){return e})),ze=Object(ie.a)("dot/REORDER_DOT_LIST",(function(e){return{startIdx:e.startIdx,endIdx:e.endIdx}})),Fe=Object(ie.a)("dot/UPDATE_DOT_ART",(function(e){return e})),He=Object(ie.a)("dot/ADD_NEW_LAYER",(function(e){return e})),Me=Object(ie.a)("dot/REMOVE_LAYER"),Ge=Object(ie.a)("dot/MERGE_LAYER"),We=Object(ie.a)("dot/MOVE_UP_LAYER",(function(e){return e})),Be=Object(ie.a)("dot/MOVE_DOWN_LAYER",(function(e){return e})),Ve=Object(ie.a)("dot/SELECT_LAYER_IDX",(function(e){return e})),Ue=Object(ie.a)("dot/RENAME_LAYER",(function(e){return e}));function Ye(e){var t=100/e.length;return e.map((function(n,a){return Object(Y.a)({},n,{interval:a===e.length?100:Math.round((a+1)*t*100)/100})}))}var Ke={fakeDotArt:K(16,16),dotFrameList:[{id:w.a.generate(),layerList:[K(16,16)],interval:100}],columnCount:16,rowCount:16,animationDuration:2,activeIdx:0,layerSelectIdx:0,layerData:[{layerName:"Layer 1",dotFrameIdx:0}],pixelSize:32},Ze=Object(ue.a)((ne={},Object(le.a)(ne,"dot/CLEAR_DOT",(function(e){return Object(de.a)(e,(function(t){var n=t.layerData[t.layerSelectIdx].dotFrameIdx;t.dotFrameList[e.activeIdx].layerList[n]=K(t.rowCount,t.columnCount)}))})),Object(le.a)(ne,"dot/NEW_DOT_ART_PROJECT",(function(){return Object(Y.a)({},Ke)})),Object(le.a)(ne,"dot/LOAD_DOT_ART",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{activeIdx:0,fakeDotArt:K(n.rowCount,n.columnCount),layerSelectIdx:0},n)})),Object(le.a)(ne,"dot/INCREASE_COLUMN",(function(e){return Object(de.a)(e,(function(e){e.columnCount=e.columnCount+1;for(var t=0;t<e.dotFrameList.length;t++)e.dotFrameList[t].layerList.map((function(e){return e.map((function(e){return e.push("")}))}))}))})),Object(le.a)(ne,"dot/DECREASE_COLUMN",(function(e){return Object(de.a)(e,(function(e){if(e.columnCount>1){e.columnCount=e.columnCount-1;for(var t=0;t<e.dotFrameList.length;t++)e.dotFrameList[t].layerList.map((function(e){return e.map((function(e){return e.pop()}))}))}}))})),Object(le.a)(ne,"dot/INCREASE_ROW",(function(e){return Object(de.a)(e,(function(e){e.rowCount=e.rowCount+1;for(var t=0;t<e.dotFrameList.length;t++)e.dotFrameList[t].layerList.map((function(t){return t.push(new Array(e.columnCount).fill(""))}));e.fakeDotArt=K(e.rowCount,e.columnCount)}))})),Object(le.a)(ne,"dot/DECREASE_ROW",(function(e){return Object(de.a)(e,(function(e){if(e.rowCount>1){e.rowCount=e.rowCount-1;for(var t=0;t<e.dotFrameList.length;t++)e.dotFrameList[t].layerList.map((function(e){return e.pop()}));e.fakeDotArt=K(e.rowCount,e.columnCount)}}))})),Object(le.a)(ne,"dot/CHANGE_DOT_AREA",(function(e,t){var n=t.payload,a=n.newRow,r=n.newColumn;return Object(de.a)(e,(function(e){if(!(a<1||r<1)){for(var t=a>256?256:a,n=r>256?256:r,o=e.rowCount,f=e.columnCount,c=0;c<e.dotFrameList.length;c++){if(n>f)for(var l=f;l<n;l++)e.dotFrameList[c].layerList.map((function(e){return e.map((function(e){return e.push("")}))}));if(n<f)for(var i=n;i<f;i++)e.dotFrameList[c].layerList.map((function(e){return e.map((function(e){return e.pop()}))}));if(t>o)for(var u=o;u<t;u++)e.dotFrameList[c].layerList.map((function(e){return e.push(new Array(n).fill(""))}));if(t<o)for(var d=t;d<o;d++)e.dotFrameList[c].layerList.map((function(e){return e.pop()}))}e.rowCount=t,e.columnCount=n,e.fakeDotArt=K(e.rowCount,e.columnCount)}}))})),Object(le.a)(ne,"dot/CHANGE_ACTIVE_IDX",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{activeIdx:n})})),Object(le.a)(ne,"dot/REMOVE_ACTIVE_DOT_ART",(function(e){if(1===e.dotFrameList.length)return Object(Y.a)({},e);var t=e.dotFrameList,n=e.activeIdx,a=Ye([].concat(t.slice(0,n)).concat(t.slice(n+1)));return Object(Y.a)({},e,{dotFrameList:a,activeIdx:n>a.length-1?n-1:n})})),Object(le.a)(ne,"dot/COPY_ACTIVE_DOT_ART",(function(e){var t=e.dotFrameList,n=e.activeIdx,a=Ye([].concat(t.slice(0,n+1)).concat(Object(Y.a)({},t[n],{id:w.a.generate()})).concat(t.slice(n+1)));return Object(Y.a)({},e,{dotFrameList:a,activeIdx:n+1})})),Object(le.a)(ne,"dot/ADD_NEW_DOT_ART",(function(e){var t=K(e.rowCount,e.columnCount),n={id:w.a.generate(),layerList:new Array(e.layerData.length).fill(t),interval:0},a=Ye([].concat(e.dotFrameList.slice()).concat(n));return Object(Y.a)({},e,{dotFrameList:a,activeIdx:a.length-1})})),Object(le.a)(ne,"dot/CHANGE_ANIMATION_INTERVAL",(function(e,t){var n=t.payload,a=n.interval,r=n.activeIdx;return Object(de.a)(e,(function(e){var t=e.dotFrameList;t[r+1].interval<a?t[r].interval=t[r+1].interval:t[r].interval=0===r?a<=0?.1:a:t[r-1].interval>a?t[r-1].interval:a}))})),Object(le.a)(ne,"dot/CHANGE_ANIMATION_DURATION",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{animationDuration:n})})),Object(le.a)(ne,"dot/CHANGE_PIXEL_SIZE",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{pixelSize:n})})),Object(le.a)(ne,"dot/REORDER_DOT_LIST",(function(e,t){var n=t.payload,a=n.startIdx,r=n.endIdx;return Object(de.a)(e,(function(e){var t=e.dotFrameList.reduce((function(e,t){return e.concat(t.interval)}),[]),n=e.dotFrameList.splice(a,1),o=Object(A.a)(n,1)[0];e.dotFrameList.splice(r,0,o),t.map((function(t,n){return e.dotFrameList[n].interval=t}));var f=e.activeIdx;f===a?e.activeIdx=r:f>a?f<=r&&(e.activeIdx-=1):f>=r&&(e.activeIdx+=1)}))})),Object(le.a)(ne,"dot/UPDATE_DOT_ART",(function(e,t){var n,a=t.payload;if(a===pe)return Object(Y.a)({},e);if(a===se){var r=e.layerData[e.layerSelectIdx].dotFrameIdx;n=Z(e.fakeDotArt,e.dotFrameList[e.activeIdx].layerList[r],e.rowCount,e.columnCount)}return a===be&&(n=e.fakeDotArt),a===me&&(n=e.fakeDotArt),a===Ee&&(n=e.fakeDotArt),"SAMECOLOR"===a&&(n=e.fakeDotArt),"DITHERING"===a&&(n=e.fakeDotArt),Object(de.a)(e,(function(e){e.dotFrameList[e.activeIdx].layerList[e.layerData[e.layerSelectIdx].dotFrameIdx]=n}))})),Object(le.a)(ne,"dot/ADD_NEW_LAYER",(function(e,t){var n,a,r=t.payload,o=e.layerSelectIdx,f=e.layerData,c=f.length,l=f[o].dotFrameIdx,i=[];if(r){for(var u=0;u<e.dotFrameList.length;u++)i=i.concat([e.dotFrameList[u].layerList[l].slice()]);n={layerName:"".concat(f[o].layerName," (copy)"),dotFrameIdx:c},a=e.dotFrameList.map((function(e,t){return Object(Y.a)({},e,{layerList:[].concat(e.layerList.slice()).concat([i[t]])})}))}else i=[K(e.rowCount,e.columnCount)],n={layerName:"Layer ".concat(c+1),dotFrameIdx:c},a=e.dotFrameList.map((function(e){return Object(Y.a)({},e,{layerList:[].concat(e.layerList.slice()).concat(i)})}));var d=[].concat(f.slice(0,o+1)).concat(n).concat(f.slice(o+1));return Object(Y.a)({},e,{dotFrameList:a,layerSelectIdx:o+1,layerData:d})})),Object(le.a)(ne,"dot/REMOVE_LAYER",(function(e){if(1===e.layerData.length)return Object(Y.a)({},e);var t=e.layerSelectIdx,n=e.layerData,a=n.length,r=n[t].dotFrameIdx,o=e.dotFrameList.map((function(e){return Object(Y.a)({},e,{layerList:[].concat(e.layerList.slice(0,r)).concat(e.layerList.slice(r+1))})})),f=[].concat(n.slice(0,t)).concat(n.slice(t+1));return f=f.map((function(e){return e.dotFrameIdx>r?Object(Y.a)({},e,{dotFrameIdx:e.dotFrameIdx-1}):Object(Y.a)({},e)})),Object(Y.a)({},e,{dotFrameList:o,layerData:f,layerSelectIdx:e.layerSelectIdx===a-1?e.layerSelectIdx-1:e.layerSelectIdx})})),Object(le.a)(ne,"dot/MERGE_LAYER",(function(e){var t=e.layerSelectIdx,n=e.layerData,a=e.dotFrameList;if(1===n.length)return Object(Y.a)({},e);if(0===t)return Object(Y.a)({},e);for(var r=n[t].dotFrameIdx,o=n[t-1].dotFrameIdx,f=[],c=function(t){var n=a[t].layerList[r].slice(),c=a[t].layerList[o].slice(),l=a[t].layerList.reduce((function(t,a,f){return f===r?t.concat([Z(n,c,e.rowCount,e.columnCount)]):f===o?t:t.concat([a])}),[]),i={id:a[t].id,layerList:l,interval:a[t].interval};f.push(i)},l=0;l<a.length;l++)c(l);var i=[].concat(n.slice(0,t-1)).concat(n.slice(t)),u=n[t-1].dotFrameIdx;return i=i.map((function(e){return e.dotFrameIdx>u?Object(Y.a)({},e,{dotFrameIdx:e.dotFrameIdx-1}):Object(Y.a)({},e)})),Object(Y.a)({},e,{dotFrameList:f,layerSelectIdx:e.layerSelectIdx-1,layerData:i})})),Object(le.a)(ne,"dot/MOVE_UP_LAYER",(function(e,t){var n,a,r=t.payload,o=e.layerData.length,f=e.layerSelectIdx,c=e.layerData;return f===o-1?Object(Y.a)({},e):(r?(n=[].concat(c.slice(0,0===f?0:f)).concat(c.slice(f+1)).concat(c.slice(f,f+1)),a=o-1):(n=[].concat(c.slice(0,0===f?0:f)).concat(c.slice(f+1,f+2)).concat(c.slice(f,f+1)).concat(c.slice(f+2)),a=f+1),Object(Y.a)({},e,{layerSelectIdx:a,layerData:n}))})),Object(le.a)(ne,"dot/MOVE_DOWN_LAYER",(function(e,t){var n,a,r=t.payload,o=e.layerSelectIdx,f=e.layerData;return 0===o?Object(Y.a)({},e):(r?(n=[].concat(f.slice(o,o+1)).concat(f.slice(0,o)).concat(f.slice(o+1)),a=0):(n=[].concat(f.slice(0,o-1)).concat(f.slice(o,o+1)).concat(f.slice(o-1,o)).concat(f.slice(o+1)),a=o-1),Object(Y.a)({},e,{layerSelectIdx:a,layerData:n}))})),Object(le.a)(ne,"dot/SELECT_LAYER_IDX",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{layerSelectIdx:n})})),Object(le.a)(ne,"dot/RENAME_LAYER",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{layerData:e.layerData.map((function(t,a){return a===e.layerSelectIdx?Object(Y.a)({},t,{layerName:n}):Object(Y.a)({},t)}))})})),ne),Ke),Je=n(9),Xe=function(e){var t=e.dot,n=Object(Je.c)(),o=Object(a.useCallback)((function(e){n(Ne(e))}),[n]),f=Object(a.useCallback)((function(e){n(Pe(parseInt(e)))}),[n]);return r.a.createElement(ce,{dotFrameList:t.dotFrameList,activeIdx:t.activeIdx,rowCount:t.rowCount,columnCount:t.columnCount,animationDuration:t.animationDuration,pixelSize:t.pixelSize,layerData:t.layerData,handleChangeAnimationDuration:o,handleChangePixelSize:f})},Qe=n(121),$e=n.n(Qe),qe=n(227),et=(n(261),[{name:"offset",options:{offset:[0,8]}}]),tt=function(e){var t=e.children,n=e.tooltip,a=Object(z.a)(e,["children","tooltip"]);return r.a.createElement(qe.a,Object.assign({},a,{tooltip:function(e){var t=e.arrowRef,a=e.tooltipRef,o=e.getArrowProps,f=e.getTooltipProps,c=e.placement;return r.a.createElement("div",f({ref:a,className:"tooltip-container"}),r.a.createElement("div",o({ref:t,className:"tooltip-arrow","data-placement":c})),n)},modifiers:et}),(function(e){var n=e.getTriggerProps,a=e.triggerRef;return r.a.createElement("span",n({ref:a,className:"trigger"}),t)}))},nt=n(51),at=n.n(nt),rt=n(52),ot=n.n(rt);function ft(){var e=Object(g.a)(["\n  opacity: 0;\n"]);return ft=function(){return e},e}function ct(){var e=Object(g.a)(["\n  background-color: #7f9ccb;\n  padding: 5px 10px;\n  border-radius: 5px;\n  border: 1px ridge black;\n  font-size: 0.8rem;\n  height: auto;\n\n  &:hover {\n    background-color: #2d5ba3;\n    color: white;\n  }\n"]);return ct=function(){return e},e}function lt(){var e=Object(g.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n  padding: 16px;\n  max-width: 400px;\n  max-height: 500px;\n"]);return lt=function(){return e},e}function it(){var e=Object(g.a)(["\n  background: #9e9e9e;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 1.5rem;\n  height: 1.5rem;\n  font-size: 1rem;\n  color: #f0f0f0;\n  &:hover {\n    background: #6e6e6e;\n    color: #fff;\n  }\n"]);return it=function(){return e},e}function ut(){var e=Object(g.a)(["\n  height: fit-content;\n  background: rgb(255, 255, 255);\n  opacity: 1;\n  border: solid 1px black;\n  box-sizing: border-box;\n  display: flex;\n  align-items: end;\n  cursor: pointer;\n"]);return ut=function(){return e},e}function dt(){var e=Object(g.a)(["\n  overflow: hidden;\n  max-width: 300px;\n  max-height: 300px;\n  background-image: ",";\n  width: ","px;\n  height: ","px;\n  margin: 2px;\n"]);return dt=function(){return e},e}function st(){var e=Object(g.a)(["\n  place-content: flex-start;\n  display: flex;\n  flex-wrap: wrap;\n  & > * {\n    margin: 2px;\n  }\n  overflow-y: auto;\n"]);return st=function(){return e},e}function mt(){var e=Object(g.a)(["\n  width: 100%;\n  height: 30px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n"]);return mt=function(){return e},e}function pt(){var e=Object(g.a)(["\n  display: flex;\n  height: 100%;\n"]);return pt=function(){return e},e}var bt=k.b.div(pt()),Et=k.b.div(mt()),gt=k.b.div(st()),Ot=k.b.div(dt(),(function(e){return 1===e.backgroundImg?"url(".concat(ot.a,")"):"url(".concat(at.a,")")}),(function(e){return e.columnCount*e.size}),(function(e){return e.rowCount*e.size})),vt=k.b.div(ut()),ht=k.b.div(it()),xt=k.b.div(lt()),Ct=k.b.label(ct()),jt=k.b.input(ft()),At=function(e){var t=e.backgroundImg,n=e.loadedData,o=e.removeDotArtHandle,f=e.loadDotArtHandle,c=e.clearStorageHandler,l=e.ImportDotArtFileHandle,i=Object(a.useState)(""),u=Object(A.a)(i,2),d=u[0],s=u[1];return r.a.createElement(bt,null,r.a.createElement(gt,null,r.a.createElement(Et,null,r.a.createElement(tt,{placement:"top",tooltip:"Clear all dotArt data from localStorage"},r.a.createElement(B,{width:"100",height:"30",onClick:c},"Clear"))),n&&0!==n.dotArt.length?n.dotArt.map((function(e,n){return r.a.createElement(vt,{key:n,onClick:function(){return f(e,n)}},r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Load this save data")},r.a.createElement(Ot,{size:"4",backgroundImg:t,columnCount:e.dot.columnCount,rowCount:e.dot.rowCount,key:n},r.a.createElement(P,{dotList:X(e.dot.dotFrameList,e.dot.layerData),column:e.dot.columnCount,size:"4",duration:e.dot.animationDuration,key:n,animation:!0}))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Remove data")},r.a.createElement(ht,{onClick:function(e){return function(e,t){t.stopPropagation(),o(e)}(n,e)}},r.a.createElement($e.a,null))))})):r.a.createElement("h1",null,"No Save Data")),r.a.createElement(xt,null,r.a.createElement("div",null,r.a.createElement(Ct,{htmlFor:"dotart_uploads"},"Import .dotart file"),r.a.createElement(jt,{accept:".dotart",id:"dotart_uploads",type:"file",onChange:function(e){if(0!==e.target.files.length){var t=new FileReader;t.readAsText(e.target.files[0],"EUC-KR"),t.onload=function(){var e=t.result;s(JSON.parse(e))}}}}),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ot,{size:"2",backgroundImg:t,columnCount:d.dot.columnCount,rowCount:d.dot.rowCount},r.a.createElement(P,{dotList:X(d.dot.dotFrameList,d.dot.layerData),column:d.dot.columnCount,size:"2",duration:d.dot.animationDuration,key:d.dot.id,animation:!0})),r.a.createElement(B,{width:"100",height:"30",onClick:function(){return l(d)}},"Load")))))},yt=n(61),Tt={id:"example-cat",dotFrameList:[{id:w.a.generate(),layerList:[[["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#ffffff","#ffffff","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#000000","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#ffffff","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46"],["#607d8b","#607d8b","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#607d8b"]]],interval:25},{id:w.a.generate(),layerList:[[["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#ffffff","#ffffff","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#ffffff","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46"],["#607d8b","#607d8b","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#607d8b"]]],interval:50},{id:w.a.generate(),layerList:[[["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#ffffff","#ffffff","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#ffffff","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46"],["#607d8b","#607d8b","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#607d8b"]]],interval:75},{id:w.a.generate(),layerList:[[["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#ffffff","#ffffff","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#ffffff","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46"],["#607d8b","#607d8b","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#607d8b"]]],interval:100}],layerData:[{layerName:"Layer 1",dotFrameIdx:0}],columnCount:16,rowCount:16,animationDuration:2},St=[{id:w.a.generate(),colors:["#393b2d","#75651a","#775b1c","#788260","#bab887","#dfd6c5"]},{id:w.a.generate(),colors:["#4b73a4","#667883","#937e6a","#b89d80","#dadbd6","#faf9fb"]},{id:w.a.generate(),colors:["#03070a","#374552","#3c8999","#959ea7","#9ccce3","#b8cde0"]},{id:w.a.generate(),colors:["#171516","#303030","#553634","#92898c","#a70d01","#c4c2c3"]},{id:w.a.generate(),colors:["#1d0e0b","#393e54","#5e260d"]}];function Lt(e,t,n){try{return t.setItem(e,JSON.stringify(n)),!0}catch(a){return!1}}function It(e){try{var t=e.getItem("dotArt_storage_v1");return!!t&&JSON.parse(t)}catch(n){return!1}}function Dt(e){Lt("dotArt_palettes_storage_v1",e,{palettes:[{name:"Palette",id:w.a.generate(),palette:Object(yt.a)(St)}],current:0})}function kt(e){try{var t=e.getItem("dotArt_palettes_storage_v1");return!!t&&JSON.parse(t)}catch(n){return!1}}function _t(e){try{var t=kt(e);return!(!t||!t.palettes)&&t.palettes.reduce((function(e,t){return e.concat({id:t.id,name:t.name})}),[])}catch(n){return!1}}function wt(e){try{var t=e.getItem("dotArt_private_setting_v1");return!!t&&JSON.parse(t)}catch(n){return!1}}var Rt,Nt=n(53),Pt=Object(ie.a)("dialog/CHANGE_TYPE_AND_OPEN",(function(e){return e})),zt=Object(ie.a)("dialog/CLOSE_DIALOG"),Ft=Object(ue.a)((Rt={},Object(le.a)(Rt,"dialog/CHANGE_TYPE_AND_OPEN",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{dialogType:n,open:!0})})),Object(le.a)(Rt,"dialog/CLOSE_DIALOG",(function(e){return Object(Y.a)({},e,{open:!1})})),Rt),{dialogType:"",open:!1}),Ht=function(){var e=Object(Je.c)(),t=Object(Nt.b)().enqueueSnackbar,n=Object(Je.d)((function(e){return{backgroundImg:e.observer.backgroundImg}})).backgroundImg,o=Object(a.useState)(It(localStorage)),f=Object(A.a)(o,2),c=f[0],l=f[1],i=Object(a.useCallback)((function(n,a){e(Ae(n.dot)),e(zt()),function(e,t){var n=It(e);!!n&&(n.current=t,Lt("dotArt_storage_v1",e,n))}(localStorage,a),t("Load DotArt From LocalStorage",{variant:"success"})}),[e,t]),u=Object(a.useCallback)((function(n){e(Ae(n)),e(zt()),t("Import sucess",{variant:"success"})}),[e,t]);return r.a.createElement(At,{backgroundImg:n,loadedData:c,removeDotArtHandle:function(e){!function(e,t){var n=It(e);if(n){var a=0;return n.dotArt.splice(t,1),0===n.dotArt.length?a=-1:n.current>t&&(a=n.current-1),n.current=a,Lt("dotArt_storage_v1",e,n)}}(localStorage,e),l(It(localStorage))},loadDotArtHandle:i,clearStorageHandler:function(){localStorage.removeItem("dotArt_storage_v1"),l(It(localStorage)),t("Clear DotArt From LocalStorage",{variant:"success"})},ImportDotArtFileHandle:u})};function Mt(){var e=Object(g.a)(["\n  border: none;\n  margin-top: 0.5em;\n  width: 100%;\n  padding: 1em 0.5em 0;\n  text-align: left;\n  display: block;\n  resize: none;\n  height: 25em;\n  background-color: #f2e8dc;\n  font-weight: bold;\n  font-size: 15px;\n  color: #0d0d0d;\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #888;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #555;\n  }\n"]);return Mt=function(){return e},e}function Gt(){var e=Object(g.a)(["\n  width: ","px;\n  height: ","px;\n"]);return Gt=function(){return e},e}function Wt(){var e=Object(g.a)(["\n  overflow: auto;\n  max-width: 100%;\n  max-height: 100%;\n  border: 1px solid #9e9e9e;\n  margin-bottom: 16px;\n"]);return Wt=function(){return e},e}function Bt(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  margin-bottom: 8px;\n  & > * {\n    margin: 8px;\n    height: 30px;\n    width: 80px;\n  }\n"]);return Bt=function(){return e},e}function Vt(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n"]);return Vt=function(){return e},e}var Ut=k.b.div(Vt()),Yt=k.b.div(Bt()),Kt=k.b.div(Wt()),Zt=k.b.div(Gt(),(function(e){return e.columnCount*e.pixelSize}),(function(e){return e.rowCount*e.pixelSize})),Jt=k.b.textarea(Mt()),Xt=function(e){var t=e.dot,n=e.dialogType,o=e.saveFileHandler,f=e.handleChangeAnimationDuration,c=e.handleChangePixelSize,l=Object(Nt.b)().enqueueSnackbar,i=Object(a.useState)(""),u=Object(A.a)(i,2),d=u[0],s=u[1],m=Object(a.useState)("single"),p=Object(A.a)(m,2),b=p[0],E=p[1],g=Object(a.useRef)(null),O=t.dotFrameList,v=t.layerData,h=t.columnCount,x=t.rowCount,C=t.activeIdx,j=t.pixelSize,y=t.animationDuration;Object(a.useEffect)((function(){s(n)}),[n]);var S,L,D;return r.a.createElement(Ut,null,r.a.createElement(Yt,null,r.a.createElement(U.a,{size:"small",variant:"outlined",type:"number",label:"Animation",color:"secondary",value:y,onChange:function(e){return function(e){e.target.value<=0||""===e.target.value?f(0):f(e.target.value)}(e)}}),r.a.createElement(U.a,{size:"small",variant:"outlined",type:"number",label:"PixelSize",color:"secondary",value:j,onChange:function(e){return function(e){c(e.target.value)}(e)}}),r.a.createElement(tt,{placement:"bottom",tooltip:"View in single"},r.a.createElement(B,{selected:"single"===b,onClick:function(){return E("single")}},"single")),r.a.createElement(tt,{placement:"bottom",tooltip:"View in gif format"},r.a.createElement(B,{selected:"gif"===b,onClick:function(){return E("gif")}},"gif")),"DownloadDialog"===d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(tt,{placement:"bottom",tooltip:"View in spritesheet format"},r.a.createElement(B,{selected:"spritesheet"===b,onClick:function(){return E("spritesheet")}},"sprite")),r.a.createElement(tt,{placement:"bottom",tooltip:"dotart file"},r.a.createElement(B,{selected:"dotart"===b,onClick:function(){return E("dotart")}},"json")))),r.a.createElement(Kt,null,r.a.createElement(Zt,{pixelSize:j,columnCount:h,rowCount:x},r.a.createElement(P,{dotSet:J(O[C].layerList,v),dotList:X(O,v),column:h,size:j,animation:"gif"===b,duration:y}))),"DownloadDialog"===d&&r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Download in selected format",r.a.createElement("span",{className:"tooltip-name"},"you select ",r.a.createElement("span",{className:"tooltip-shortcut"},b," "),"format"))},r.a.createElement(B,{baseColor:"#0f0f0f",width:"160",height:"50",onClick:function(){return o(b)}},"Download")),"CssDialog"===d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Copy your Clipboard")},r.a.createElement(B,{width:"120",height:"40",onClick:function(e){g.current.select(),document.execCommand("copy"),e.target.focus(),l("Copy Success!",{variant:"success"})}},"Copy")),r.a.createElement(Jt,{ref:g,value:"single"===b?(S=J(O[C].layerList,v),L=h,D=j,I(S,{format:"string",pSize:D,c:L,cssClassName:"dotArt-to-css"})):T(X(O,v),h,j,y),readOnly:!0})))},Qt=n(210),$t=n.n(Qt),qt=n(211),en=n.n(qt),tn=n(212);function nn(e,t){var n=t.dotArt,a=t.cols,r=t.pixelSize,o=t.dotArtHeight,f=t.dotArtIdx,c=e;return n.layer.flat().forEach((function(e,t){if(e){c.fillStyle=e;var n=t%a,l=Math.floor(t/a);c.fillRect(n*r,l*r+o*f,r,r)}})),c}function an(e,t,n,a){var r=t.canvas,o=t.canvasHeight,f=t.canvasWidth,c=n.dotArt,l=n.dotArtHeight,i=n.dotArtWidth,u=n.pixelSize,d=Math.floor(i/u),s=r.getContext("2d");switch(s.canvas.width=f,s.canvas.height=o,e){case"spritesheet":a.forEach((function(e,t){s=nn(s,{dotArt:e,cols:d,pixelSize:u,dotArtHeight:l,dotArtIdx:t})}));break;default:s=nn(s,{dotArt:c,cols:d,pixelSize:u,dotArtHeight:l,dotArtIdx:0})}return s.getImageData(0,0,f,o).data}var rn=function(e,t){Object(tn.saveAs)(e,"".concat(Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8),".").concat(t))},on=function(e,t){var n=t.id,a=t.dotFrameList,r=t.layerData,o=t.columnCount,f=t.rowCount,c=t.animationDuration,l=t.activeIdx,i=t.pixelSize;if("dotart"===e){var u={dot:{dotFrameList:a,animationDuration:c,columnCount:o,rowCount:f,layerData:r,id:n}},d=new Blob([JSON.stringify(u)],{type:"application/json"});return rn(d,"dotart")}var s=X(a,r),m=1e3*c,p=o*i,b=f*i,E=p,g="spritesheet"===e?b*s.length:b,O=document.createElement("canvas"),v=new $t.a(E,g);switch(v.pipe(en()()).on("finish",(function(){rn(this.toBlob(),"gif")})),v.setRepeat(0),v.setDispose(3),v.writeHeader(),e){case"single":case"spritesheet":an(e,{canvas:O,canvasHeight:g,canvasWidth:E},{dotArt:s[l],dotArtHeight:b,dotArtWidth:p,pixelSize:i},s),O.toBlob((function(e){rn(e,"png")}));break;default:var h=0;s.forEach((function(t,n,a){var r=n===a.length-1?100:s[n].interval,o=.01*(r-h)*m;v.setDelay(o),h=r,v.addFrame(an(e,{canvas:O,canvasHeight:g,canvasWidth:E},{dotArt:t,dotArtHeight:b,dotArtWidth:p,pixelSize:i}))})),v.finish()}},fn=function(e){var t=e.dot,n=e.dialogType,o=Object(Je.c)(),f=Object(a.useCallback)((function(e){o(Ne(e))}),[o]),c=Object(a.useCallback)((function(e){o(Pe(parseInt(e)))}),[o]);return r.a.createElement(Xt,{dot:t,dialogType:n,saveFileHandler:function(e){on(e,t)},handleChangeAnimationDuration:f,handleChangePixelSize:c})};function cn(){var e=Object(g.a)(["\n  color: black;\n  font-size: 13px;\n  margin-left: 8px;\n  line-height: 30px;\n"]);return cn=function(){return e},e}function ln(){var e=Object(g.a)(["\n  width: fit-content;\n  padding: 0px 8px;\n  font-size: 1.5rem;\n  color: #59564f;\n  border: 3px solid #59564f;\n  border-radius: 4px;\n  font-weight: bold;\n  font-family: monospace;\n  text-align: center;\n  line-height: 24px;\n"]);return ln=function(){return e},e}function un(){var e=Object(g.a)(["\n  width: 100%;\n  margin: 4px 0px;\n  display: flex;\n"]);return un=function(){return e},e}function dn(){var e=Object(g.a)(["\n  font-size: 24px;\n  font-weight: bold;\n"]);return dn=function(){return e},e}function sn(){var e=Object(g.a)(["\n  float: left;\n  border: 4px solid #59564f;\n  border-radius: 5px;\n  box-sizing: border-box;\n  float: left;\n  vertical-align: top;\n  padding: 0 20px 20px 20px;\n  min-width: 300px;\n"]);return sn=function(){return e},e}function mn(){var e=Object(g.a)(["\n  display: block;\n  height: 100%;\n  overflow: auto;\n  & > * {\n    margin: 8px;\n  }\n"]);return mn=function(){return e},e}var pn=k.b.div(mn()),bn=k.b.div(sn()),En=k.b.span(dn()),gn=k.b.div(un()),On=k.b.div(ln()),vn=k.b.span(cn()),hn=function(e){var t=e.paintTools,n=e.color,a=e.storage,o=e.misc;return r.a.createElement(pn,null,r.a.createElement(bn,null,r.a.createElement(En,null,"Misc Key"),o.category.map((function(e){return r.a.createElement(gn,{key:e},r.a.createElement(On,{key:e},o[e].key),r.a.createElement(vn,null,o[e].helpText))}))),r.a.createElement(bn,null,r.a.createElement(En,null,"Storage Key"),a.category.map((function(e){return r.a.createElement(gn,{key:e},r.a.createElement(On,{key:e},a[e].key),r.a.createElement(vn,null,a[e].helpText))}))),r.a.createElement(bn,null,r.a.createElement(En,null,"Paint Tools Key"),t.category.map((function(e){return r.a.createElement(gn,{key:e},r.a.createElement(On,{key:e},t[e].key),r.a.createElement(vn,null,t[e].helpText))}))),r.a.createElement(bn,null,r.a.createElement(En,null,"Color Tools Key"),n.category.map((function(e){return r.a.createElement(gn,{key:e},r.a.createElement(On,{key:e},n[e].key),r.a.createElement(vn,null,n[e].helpText))}))))},xn=function(){var e=Object(Je.d)((function(e){var t=e.keybind;return{paintTools:t.paintTools,color:t.color,storage:t.storage,misc:t.misc}})),t=e.paintTools,n=e.color,a=e.storage,o=e.misc;return r.a.createElement(hn,{paintTools:t,color:n,storage:a,misc:o})},Cn=n(60),jn=n(36),An=n(77),yn=n.n(An);function Tn(){var e=Object(g.a)(["\n  font-size: 16px;\n  border-radius: 16px;\n  width: 16px;\n  height: 16px;\n  background-color: orange;\n  color: gray;\n  &:hover {\n    background-color: gray;\n    color: orange;\n  }\n"]);return Tn=function(){return e},e}function Sn(){var e=Object(g.a)(["\n  width: 50px;\n  height: 50px;\n  cursor: pointer;\n"]);return Sn=function(){return e},e}var Ln=k.b.div.attrs((function(e){return{style:{backgroundColor:e.color,border:"3px solid ".concat(e.selected?"black":"#ffffff00")}}}))(Sn()),In=k.b.div(Tn()),Dn=function(e){var t=e.color,n=e.paletteId,a=e.cellIdx,o=e.selected,f=e.onClickSelectHandle,c=e.onClickRemoveCellHandle;return r.a.createElement(jn.b,{key:a,draggableId:"cell-".concat(n,"-").concat(a),index:a},(function(e){return r.a.createElement(Ln,Object.assign({color:t,selected:o,ref:e.innerRef,id:o?"select-color-cell":""},e.draggableProps,e.dragHandleProps,{onClick:function(){return f(n,a)}}),r.a.createElement(In,{onClick:function(e){e.stopPropagation(),c(n,a)}},r.a.createElement(V.a,null)))}))},kn=n(214),_n=n.n(kn),wn=n(213),Rn=n.n(wn);function Nn(){var e=Object(g.a)(["\n  width: 50px;\n  height: 50px;\n  cursor: pointer;\n  border: 3px solid #59564f;\n  color: #59564f;\n  padding: 5px;\n  transition: all 0.1s ease-out;\n  &:hover {\n    border: 3px solid #f2e8dc;\n    color: #f2e8dc;\n    background-color: #59564f;\n  }\n"]);return Nn=function(){return e},e}function Pn(){var e=Object(g.a)(["\n  width: 25px;\n  height: 25px;\n  padding: 0;\n  outline: none;\n  border: none;\n  color: #0d0d0d;\n  background-color: inherit;\n  cursor: pointer;\n  transition: all 0.1s ease-out;\n  &:hover {\n    color: orange;\n  }\n"]);return Pn=function(){return e},e}function zn(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  & > * {\n    margin-right: 8px;\n  }\n"]);return zn=function(){return e},e}function Fn(){var e=Object(g.a)(["\n  display: flex;\n  padding: 4px;\n  background-color: #f2e8dc;\n  align-items: center;\n  & > * {\n    margin-right: 8px;\n  }\n"]);return Fn=function(){return e},e}var Hn=k.b.div(Fn()),Mn=k.b.div(zn()),Gn=k.b.button(Pn()),Wn=k.b.div(Nn()),Bn=function(e){var t=e.palette,n=e.paletteIdx,a=e.selectId,o=e.onClickSelectHandle,f=e.onClickAddCellHandle,c=e.onClickRemoveCellHandle,l=e.onClickRemovePaletteHandle;return r.a.createElement(jn.b,{key:t.id,draggableId:"palette-".concat(t.id),index:n},(function(e){return r.a.createElement(Hn,Object.assign({},e.draggableProps,{ref:e.innerRef}),r.a.createElement(tt,{tooltip:"Drag handle"},r.a.createElement(Wn,e.dragHandleProps,r.a.createElement(Rn.a,{fontSize:"large"}))),r.a.createElement(jn.c,{droppableId:t.id,type:"cell",direction:"horizontal",isDropDisabled:!(t.colors.length<7)},(function(e){return r.a.createElement(Mn,Object.assign({ref:e.innerRef},e.droppableProps),t.colors.map((function(e,n){return r.a.createElement(Dn,{color:e,paletteId:t.id,cellIdx:n,key:"".concat(t.id).concat(n),selected:a.palette===t.id&&a.color===n,onClickSelectHandle:o,onClickRemoveCellHandle:c})})),e.placeholder,t.colors.length<7&&r.a.createElement(tt,{tooltip:r.a.createElement(r.a.Fragment,null,"Add color cell")},r.a.createElement(Wn,{onClick:function(){return f(t.id)}},r.a.createElement(yn.a,{fontSize:"large"}))),r.a.createElement(tt,{tooltip:"Remove palette"},r.a.createElement(Gn,{onClick:function(){return l(t.id)}},r.a.createElement(_n.a,{fontSize:"small"}))))})))}))};function Vn(){var e=Object(g.a)(["\n  width: 80px;\n  height: 40px;\n  margin-left: 10px;\n  outline: none;\n  background-color: #f2e8dc;\n  border: 1px solid #a69e94;\n  border-radius: 5px;\n  &:hover {\n    background-color: #59564f;\n    color: white;\n  }\n"]);return Vn=function(){return e},e}function Un(){var e=Object(g.a)(["\n  width: 240px;\n  height: 310px;\n  padding: 4px;\n  border: 4px solid #a69e94;\n  & > * {\n    margin-bottom: 16px;\n  }\n"]);return Un=function(){return e},e}function Yn(){var e=Object(g.a)(["\n  cursor: pointer;\n  align-items: center;\n  margin-top: 4px;\n  justify-content: center;\n  display: flex;\n  font-size: 16px;\n  color: orange;\n  border: 4px dotted orange;\n  background-color: #f2e8dc;\n"]);return Yn=function(){return e},e}function Kn(){var e=Object(g.a)(["\n  margin-right: 8px;\n  padding: 4px;\n  background: #a69e94;\n  width: 570px;\n  height: fit-content;\n"]);return Kn=function(){return e},e}function Zn(){var e=Object(g.a)(["\n  display: flex;\n"]);return Zn=function(){return e},e}function Jn(){var e=Object(g.a)(["\n  width: 100%;\n  max-width: 820px;\n  height: 30px;\n  display: flex;\n"]);return Jn=function(){return e},e}function Xn(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  & > * {\n    margin: 8px;\n  }\n"]);return Xn=function(){return e},e}var Qn,$n,qn=k.b.div(Xn()),ea=k.b.div(Jn()),ta=k.b.div(Zn()),na=k.b.div(Kn()),aa=k.b.div(Yn()),ra=k.b.div(Un()),oa=k.b.button(Vn()),fa=function(e){var t=e.palette,n=e.paletteName,o=e.savePaletteHandle,f=e.deletePaletteHandle,c=e.closePaletteHandle,l=e.changeTypingHandle,i=Object(a.useState)(t[0][0]),u=Object(A.a)(i,2),d=u[0],s=u[1],m=Object(a.useState)(t),p=Object(A.a)(m,2),b=p[0],E=p[1],g=Object(a.useState)(n),O=Object(A.a)(g,2),v=O[0],h=O[1],x=Object(a.useState)({palette:t[0].id,color:0}),C=Object(A.a)(x,2),j=C[0],y=C[1];Object(a.useEffect)((function(){s(b.find((function(e){return e.id===j.palette})).colors[j.color])}),[j]);var T=Object(a.useCallback)((function(e){document.getElementById("select-color-cell").style.backgroundColor=e.hex,s(e.hex)}),[]),S=function(e,t){var n=b.map((function(e){return e.id!==j.palette?e:{id:e.id,colors:Object(yt.a)(e.colors.map((function(e,t){return t!==j.color?e:d})))}}));E(n),y({palette:e,color:t}),s(b.find((function(t){return t.id===e})).colors[t])},L=function(e){var t=Math.round(16777215*Math.random()).toString(16);t=t.length<6?"#0".concat(t):"#".concat(t),E(b.map((function(n){return n.id!==e?n:{id:n.id,colors:n.colors.concat(t)}}))),y({palette:e,color:b.find((function(t){return t.id===e})).colors.length})},I=function(e,t){var n=b.findIndex((function(t){return t.id===e}));E(b.map((function(e,a){return a!==n?e:{id:e.id,colors:[].concat(e.colors.slice(0,t)).concat(e.colors.slice(t+1))}}))),j.palette===e&&j.color>=t&&(j.color===t?y({palette:e,color:t-1}):y({palette:e,color:j.color-1}))},D=function(){var e=Math.round(16777215*Math.random()).toString(16);e=e.length<6?"#0".concat(e):"#".concat(e),E(b.concat({id:w.a.generate(),colors:[e]}))},k=function(e){if(1!==b.length){var t=b.filter((function(t){return t.id!==e}));E(t),e===j.palette&&y({palette:t[0].id,color:0})}};return r.a.createElement(qn,null,r.a.createElement(ea,null,r.a.createElement(U.a,{size:"small",variant:"outlined",label:"Name",color:"secondary",value:v,fullWidth:!0,onChange:function(e){return function(e){var t=e.target.value;h(t.length>20?t.slice(0,20):t)}(e)},onFocus:function(){return l(!0)},onBlur:function(){return l(!1)}}),r.a.createElement(oa,{onClick:function(){var e=b.map((function(e){return e.id!==j.palette?e:{id:e.id,colors:Object(yt.a)(e.colors.map((function(e,t){return t!==j.color?e:d})))}}));o(e,v)}},"save"),r.a.createElement(oa,{onClick:c},"close"),f&&r.a.createElement(oa,{onClick:f},"delete")),r.a.createElement(ta,null,r.a.createElement(jn.a,{onDragEnd:function(e){if(e.destination){var t=e.source,n=e.destination,a=Object(yt.a)(b);if("palettes"===e.type){var r=e.source.index,o=e.destination.index,f=a.splice(r,1),c=Object(A.a)(f,1)[0];a.splice(o,0,c),E(a)}else{if(t.droppableId===n.droppableId){var l=a.reduce((function(e,t,a){return t.id===n.droppableId?a:e}),[]),i=a[l].colors.splice(t.index,1),u=Object(A.a)(i,1)[0];a[l].colors.splice(n.index,0,u),E(a)}else{var d=a.reduce((function(e,n){return n.id===t.droppableId?n.colors.splice(t.index,1):e}),[]),s=Object(A.a)(d,1)[0];a=a.map((function(e){return e.id===n.droppableId?e.colors.splice(n.index,0,s):e}))}y({palette:n.droppableId,color:n.index})}}}},r.a.createElement(jn.c,{droppableId:"palettes",type:"palettes"},(function(e){return r.a.createElement(na,Object.assign({ref:e.innerRef},e.droppableProps),b.map((function(e,t){return r.a.createElement(Bn,{key:e.id,palette:e,paletteIdx:t,selectId:j,onClickSelectHandle:S,onClickAddCellHandle:L,onClickRemoveCellHandle:I,onClickRemovePaletteHandle:k})})),e.placeholder,b.length<10&&r.a.createElement(aa,{onClick:D},"Add palette block",r.a.createElement(yn.a,{fontSize:"large"})))}))),r.a.createElement(ra,null,r.a.createElement(Cn.ChromePicker,{disableAlpha:!0,color:d,onChange:T}),r.a.createElement(Cn.SliderPicker,{color:d,onChange:T}))))},ca=Object(ie.a)("palettes/LOAD_PALETTES",(function(e){return e})),la=Object(ie.a)("palettes/SELECT_LEFT_COLOR",(function(e){return e})),ia=Object(ie.a)("palettes/SELECT_RIGHT_COLOR",(function(e){return e})),ua=Object(ie.a)("palettes/SWAP_LEFT_RIGHT_COLOR"),da=Object(ie.a)("palettes/MOVE_UP_PALETTE_SELECT_LINE"),sa=Object(ie.a)("palettes/MOVE_DOWN_PALETTE_SELECT_LINE"),ma=Object(ie.a)("palettes/SELECT_COLOR_CELL_SHORTCUT",(function(e){return e})),pa={palettes:function(){var e=kt(localStorage);return e&&e.palettes||(Dt(localStorage),e=kt(localStorage)),e.palettes[e.current].palette}(),paletteNames:_t(localStorage),selectPaletteId:"",selectPaletteLine:0,leftColor:"#000000",rightColor:"#ffffff"},ba=Object(ue.a)((Qn={},Object(le.a)(Qn,"palettes/LOAD_PALETTES",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{palettes:Object(yt.a)(n.palette),selectPaletteId:n.id,paletteNames:_t(localStorage),selectPaletteLine:0})})),Object(le.a)(Qn,"palettes/SELECT_LEFT_COLOR",(function(e,t){var n=t.payload.color;return Object(Y.a)({},e,{leftColor:n})})),Object(le.a)(Qn,"palettes/SELECT_RIGHT_COLOR",(function(e,t){var n=t.payload.color;return Object(Y.a)({},e,{rightColor:n})})),Object(le.a)(Qn,"palettes/SWAP_LEFT_RIGHT_COLOR",(function(e){return Object(Y.a)({},e,{leftColor:e.rightColor,rightColor:e.leftColor})})),Object(le.a)(Qn,"palettes/MOVE_UP_PALETTE_SELECT_LINE",(function(e){return Object(Y.a)({},e,{selectPaletteLine:Math.max(e.selectPaletteLine-1,0)})})),Object(le.a)(Qn,"palettes/MOVE_DOWN_PALETTE_SELECT_LINE",(function(e){return Object(Y.a)({},e,{selectPaletteLine:Math.min(e.selectPaletteLine+1,e.palettes.length-1)})})),Object(le.a)(Qn,"palettes/SELECT_COLOR_CELL_SHORTCUT",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{leftColor:e.palettes[e.selectPaletteLine].colors[n]?e.palettes[e.selectPaletteLine].colors[n]:e.leftColor})})),Qn),pa),Ea=Object(ie.a)("observer/CHANGE_TYPING_STATE",(function(e){return e})),ga=Object(ie.a)("observer/MOUSE_LEAVES_PAINT_AREA"),Oa=Object(ie.a)("observer/CHANGE_DOT_BORDER_SIZE",(function(e){return e})),va=Object(ie.a)("observer/CHANGE_DOT_BORDER_COLOR",(function(e){return e})),ha=Object(ie.a)("observer/INCREASE_DOT_SIZE"),xa=Object(ie.a)("observer/DECREASE_DOT_SIZE"),Ca=(Object(ie.a)("observer/CHANGE_DOT_SIZE",(function(e){return e})),Object(ie.a)("observer/ALT_DOWN",(function(e){return e}))),ja=Object(ie.a)("observer/SHIFT_DOWN",(function(e){return e})),Aa=Object(ie.a)("observer/LOAD_DATA",(function(e){return e})),ya=Object(ie.a)("observer/CHANGE_SHOW_LAYERS"),Ta=Object(ie.a)("observer/CHANGE_BACKGROUND_IMG",(function(e){return e})),Sa=Object(ie.a)("observer/SAVE_START",(function(e){return e})),La=Object(ue.a)(($n={},Object(le.a)($n,"observer/CHANGE_TYPING_STATE",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{isTyping:n})})),Object(le.a)($n,"observer/MOUSE_LEAVES_PAINT_AREA",(function(e){return Object(Y.a)({},e,{mousePosition:{x:"",y:""}})})),Object(le.a)($n,"observer/CHANGE_DOT_BORDER_SIZE",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{dotBorder:Object(Y.a)({},e.dotBorder,{size:n})})})),Object(le.a)($n,"observer/CHANGE_DOT_BORDER_COLOR",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{dotBorder:Object(Y.a)({},e.dotBorder,{color:n})})})),Object(le.a)($n,"observer/INCREASE_DOT_SIZE",(function(e){return Object(Y.a)({},e,{dotSize:e.dotSize<100?e.dotSize+4:e.dotSize})})),Object(le.a)($n,"observer/DECREASE_DOT_SIZE",(function(e){return Object(Y.a)({},e,{dotSize:e.dotSize>4?e.dotSize-4:e.dotSize})})),Object(le.a)($n,"observer/CHANGE_DOT_SIZE",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{dotSize:n})})),Object(le.a)($n,"observer/ALT_DOWN",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{altDown:n})})),Object(le.a)($n,"observer/SHIFT_DOWN",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{shiftDown:n})})),Object(le.a)($n,"observer/LOAD_DATA",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{},n)})),Object(le.a)($n,"observer/CHANGE_SHOW_LAYERS",(function(e){return Object(Y.a)({},e,{showLayers:!e.showLayers})})),Object(le.a)($n,"observer/CHANGE_BACKGROUND_IMG",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{backgroundImg:n})})),Object(le.a)($n,"observer/SAVE_START",(function(e,t){var n=t.payload;return Object(Y.a)({},e,{saveState:n})})),$n),{isTyping:!1,mousePosition:{x:"",y:""},startPosition:{x:"",y:""},dotSize:32,dotBorder:{size:1,color:"#000000"},showLayers:!0,backgroundImg:1,saveState:!1,altDown:!1,shiftDown:!1}),Ia=function(e){var t=e.dialogType,n=Object(Je.c)(),o=Object(Nt.b)().enqueueSnackbar,f=Object(a.useState)(""),c=Object(A.a)(f,2),l=c[0],i=c[1],u=Object(a.useState)(""),d=Object(A.a)(u,2),s=d[0],m=d[1],p=Object(a.useState)(""),b=Object(A.a)(p,2),E=b[0],g=b[1],O=Object(a.useState)(""),v=Object(A.a)(O,2),h=v[0],x=v[1],C=Object(a.useState)(""),j=Object(A.a)(C,2),y=j[0],T=j[1];Object(a.useEffect)((function(){var e,n,a,r=kt(localStorage);"EditPalette"===t?(e=r.palettes[r.current].palette,n=r.palettes[r.current].id,a=r.palettes[r.current].name,x(r.current)):(e=[{id:w.a.generate(),colors:["#ffffff","#000000"]}],n=w.a.generate(),a="New Palette"),i(e),g(n),m(a),T(r)}),[t]);return l&&r.a.createElement(fa,{palette:l,paletteName:s,savePaletteHandle:function(e,t){if(function(e,t){try{var n=kt(e),a=t.id,r=t.name,o=t.palette;if(n&&n.palettes){var f=n.palettes.findIndex((function(e){return e.id===a}));-1!==f?n=Object(Y.a)({},n,{current:f,palettes:n.palettes.map((function(e,t){return t!==f?e:{id:a,name:r,palette:o}}))}):(n.palettes.push(t),n.current=n.palettes.length-1)}else n=Object(Y.a)({},n,{palettes:[t],current:0});return Lt("dotArt_palettes_storage_v1",e,n)}catch(c){return!1}}(localStorage,{id:E,name:t,palette:e})){o("Save Palette To LocalStorage",{variant:"success"});var a=kt(localStorage);n(ca(a.palettes[a.current]))}else o("Save Fail!",{variant:"error"});n(zt())},deletePaletteHandle:"EditPalette"===t&&1!==y.palettes.length?function(){if(function(e,t){var n=kt(e);if(n){var a=0;return n.palettes.splice(t,1),0===n.palettes.length?a=-1:n.current>t&&(a=n.current-1),n.current=a,Lt("dotArt_palettes_storage_v1",e,n)}return!1}(localStorage,h)){o("Delete Palette To LocalStorage",{variant:"success"});var e=kt(localStorage);n(ca(e.palettes[e.current]))}else o("Delete Fail!",{variant:"error"});n(zt())}:null,closePaletteHandle:function(){n(zt())},changeTypingHandle:function(e){n(Ea(e))}})},Da=n(519),ka=Object(m.a)((function(e){return{closeButton:{marginRight:e.spacing(1)}}})),_a=Object(O.a)((function(e){return{paperScrollPaper:{height:"calc(100% - 64px)",backgroundColor:"#F2E8DC"}}}))(Da.a),wa=Object(O.a)((function(e){return{root:{overflow:"hidden",height:"100%"}}}))(v.a),Ra=function(e){var t=e.dialogType,n=e.open,a=e.handleCloseDialog,o=ka(),f=Object(Je.d)((function(e){return{dot:e.dotArt.present.dot}})).dot,c=function(){a()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(_a,{open:n,fullWidth:!0,maxWidth:"xl",onClose:c},r.a.createElement(h.a,null,r.a.createElement(j.a,{color:"inherit",onClick:c,size:"small",className:o.closeButton},r.a.createElement(C.a,null)),t),r.a.createElement(wa,{dividers:!0},n&&function(){switch(t){case"PreviewDialog":return r.a.createElement(Xe,{dot:f});case"DownloadDialog":return r.a.createElement(fn,{dot:f,dialogType:t});case"LoadDialog":return r.a.createElement(Ht,null);case"CssDialog":return r.a.createElement(fn,{dot:f,dialogType:t});case"KeybindDialog":return r.a.createElement(xn,null);case"EditPalette":case"CreatePalette":return r.a.createElement(Ia,{dialogType:t});default:return null}}())))},Na=r.a.memo((function(){var e=Object(Je.c)(),t=Object(Je.d)((function(e){var t=e.dialog;return{dialogType:t.dialogType,open:t.open}})),n=t.dialogType,o=t.open,f=Object(a.useCallback)((function(){e(zt())}),[e]);return o&&r.a.createElement(Ra,{dialogType:n,open:o,handleCloseDialog:f})})),Pa=n(216),za=n.n(Pa);function Fa(){var e=Object(g.a)(["\n      border-top: solid 3px #b22222;\n    "]);return Fa=function(){return e},e}function Ha(){var e=Object(g.a)(["\n  padding: 0px;\n  margin: 0px;\n  border: none;\n  outline: none;\n  border-top: solid 3px black;\n  ","\n  width: 96px;\n  height: 19px;\n  font-size: 16px;\n  font-weight: bold;\n  background: rgba(0, 0, 0, 1);\n  text-align: center;\n  color: white;\n  &:focus {\n    background: rgba(230, 230, 230, 1);\n    color: rgba(0, 0, 0, 0.7);\n  }\n  -moz-appearance: textfield;\n  &::-webkit-outer-spin-button,\n  &::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"]);return Ha=function(){return e},e}function Ma(){var e=Object(g.a)(["\n      &:hover {\n        background: #6e6e6e;\n        color: #fff;\n      }\n    "]);return Ma=function(){return e},e}function Ga(){var e=Object(g.a)(["\n  background: #9e9e9e;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 24px;\n  height: 24px;\n  font-size: 1rem;\n  color: #f0f0f0;\n  ","\n"]);return Ga=function(){return e},e}function Wa(){var e=Object(g.a)(["\n          height: 96px;\n          width: ",";\n        "]);return Wa=function(){return e},e}function Ba(){var e=Object(g.a)(["\n          width: 96px;\n          height: ",";\n        "]);return Ba=function(){return e},e}function Va(){var e=Object(g.a)(["\n  background-image: ",";\n  ","\n"]);return Va=function(){return e},e}function Ua(){var e=Object(g.a)(["\n  width: 96px;\n  height: 96px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return Ua=function(){return e},e}function Ya(){var e=Object(g.a)(["\n      opacity: 1;\n      border: solid 3px #b22222;\n    "]);return Ya=function(){return e},e}function Ka(){var e=Object(g.a)(["\n  position: relative;\n  width: 96px;\n  height: 96px;\n  outline: none;\n  opacity: 0.8;\n  border-radius: 0.3rem;\n  border: solid 3px black;\n  box-sizing: border-box;\n  cursor: pointer;\n  ","\n  &:hover {\n    & > span {\n      display: block;\n    }\n  }\n"]);return Ka=function(){return e},e}function Za(){var e=Object(g.a)(["\n  background: orange;\n  color: black;\n  text-align: center;\n  width: 24px;\n  height: 24px;\n  line-height: 24px;\n  position: absolute;\n  z-index: 1;\n  font-weight: 900;\n  font-size: 12px;\n"]);return Za=function(){return e},e}function Ja(){var e=Object(g.a)(["\n      top: ","px;\n    "]);return Ja=function(){return e},e}function Xa(){var e=Object(g.a)(["\n  z-index: 1;\n  display: none;\n  left: 72px;\n  position: absolute;\n  width: 24px;\n  margin: 0px;\n  padding: 0px;\n  ",";\n"]);return Xa=function(){return e},e}var Qa=k.b.span(Xa(),(function(e){return e.offsetTop&&Object(k.a)(Ja(),e.offsetTop)})),$a=k.b.div(Za()),qa=k.b.div(Ka(),(function(e){return e.active&&Object(k.a)(Ya())})),er=k.b.div(Ua()),tr=k.b.div(Va(),(function(e){return 1===e.backgroundImg?"url(".concat(ot.a,")"):"url(".concat(at.a,")")}),(function(e){return e.columnCount>e.rowCount?Object(k.a)(Ba(),(function(e){return"".concat(e.rowCount*e.pixelSize,"px")})):Object(k.a)(Wa(),(function(e){return"".concat(e.columnCount*e.pixelSize,"px")}))})),nr=k.b.div(Ga(),(function(e){return!e.disabled&&Object(k.a)(Ma())})),ar=k.b.input(Ha(),(function(e){return e.active&&Object(k.a)(Fa())})),rr=r.a.memo((function(e){var t=e.active,n=e.idx,o=e.dot,f=e.interval,c=e.columnCount,l=e.rowCount,i=e.backgroundImg,u=e.handleChangeIdx,d=e.handleCopyDotArt,s=e.handleRemoveDotArt,m=e.handleChangeInterval,p=e.lastIndex,b=Object(a.useState)(f),E=Object(A.a)(b,2),g=E[0],O=E[1],v=Object(a.useState)(),h=Object(A.a)(v,2),x=h[0],C=h[1];Object(a.useEffect)((function(){O(f)}),[f]),Object(a.useEffect)((function(){var e=Math.floor(c>l?96/c:96/l);e!==x&&(C(e),0===e&&C(1))}),[l,c,x]);var j=function(e){O(e.target.value)},y=Object(a.useCallback)((function(e){0!==e.target.value.length?(O(f),m(Math.round(100*e.target.value)/100,n)):O(f)}),[m,n,f]);return r.a.createElement(jn.b,{key:n,draggableId:"dotArt-".concat(n),index:n},(function(e){return r.a.createElement(qa,Object.assign({active:!!t,onClickCapture:function(){return u(n)},ref:e.innerRef},e.draggableProps,e.dragHandleProps),r.a.createElement($a,null,n+1),r.a.createElement(Qa,null,r.a.createElement(tt,{tooltip:r.a.createElement(r.a.Fragment,null,"Delete frame ")},r.a.createElement(nr,{onClick:s},r.a.createElement($e.a,{fontSize:"inherit"})))),r.a.createElement(Qa,{offsetTop:"72"},r.a.createElement(tt,{tooltip:r.a.createElement(r.a.Fragment,null,"Copy frame ")},r.a.createElement(nr,{onClick:d},r.a.createElement(za.a,{fontSize:"inherit"})))),r.a.createElement(er,null,r.a.createElement(tr,{columnCount:c,rowCount:l,backgroundImg:i,pixelSize:x},r.a.createElement(P,{dotSet:o,column:c,size:x}))),r.a.createElement(tt,{placement:"bottom",tooltip:r.a.createElement(r.a.Fragment,null,"Change interval of this frame",p&&r.a.createElement("span",null," But last frame is only 100"))},r.a.createElement(ar,{active:!0,value:g,type:"number",onChange:j,onBlur:function(e){return y(e)},disabled:p,step:"0.1"})))}))}));function or(){var e=Object(g.a)(["\n  font-size: 16px;\n"]);return or=function(){return e},e}function fr(){var e=Object(g.a)(["\n  z-index: 10;\n  background: #a69e94;\n  border-radius: 0.2rem;\n  width: 130px;\n  height: 100%;\n  margin: 0px 8px;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  position: sticky;\n  & > *:not(:last-child) {\n    width: 102px;\n    min-width: 102px;\n    height: 121px;\n  }\n  & > * {\n    margin: 8px;\n  }\n"]);return fr=function(){return e},e}function cr(){var e=Object(g.a)(["\n  z-index: 1;\n  max-height: 92vh;\n  width: 130px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return cr=function(){return e},e}var lr=k.b.div(cr()),ir=k.b.div(fr()),ur=k.b.span(or()),dr=r.a.memo((function(e){var t=e.dotFrameList,n=e.activeIdx,a=e.layerIdx,o=e.columnCount,f=e.rowCount,c=e.backgroundImg,l=e.handleChangeIdx,i=e.handleRemoveDotArt,u=e.handleCopyDotArt,d=e.handleAddDotArt,s=e.handleChangeInterval,m=e.handleReorderDotList;return r.a.createElement(lr,null,r.a.createElement(jn.a,{onDragEnd:function(e){e.destination&&"dotList"===e.type&&m(e.source.index,e.destination.index)}},r.a.createElement(jn.c,{droppableId:"dotList",type:"dotList"},(function(e){return r.a.createElement(ir,Object.assign({ref:e.innerRef},e.droppableProps),t&&t.map((function(e,d){return r.a.createElement(rr,{active:n===d,idx:d,key:e.id,dot:e.layerList[a],interval:e.interval,columnCount:o,rowCount:f,backgroundImg:c,handleCopyDotArt:u,handleRemoveDotArt:i,handleChangeInterval:s,handleChangeIdx:l,lastIndex:t.length-1===d})})),e.placeholder,r.a.createElement(B,{width:"96",height:"30",onClick:function(){return d()}},r.a.createElement(yn.a,null),r.a.createElement(ur,null,"Add")))}))))})),sr=r.a.memo((function(){var e=Object(Je.c)(),t=Object(Je.d)((function(e){var t=e.dotArt.present.dot;return{dotList:t.dotList,dotFrameList:t.dotFrameList,activeIdx:t.activeIdx,layerIdx:t.layerData[t.layerSelectIdx].dotFrameIdx,columnCount:t.columnCount,rowCount:t.rowCount}})),n=t.dotFrameList,o=t.activeIdx,f=t.layerIdx,c=t.columnCount,l=t.rowCount,i=Object(Je.d)((function(e){return{backgroundImg:e.observer.backgroundImg}})).backgroundImg,u=Object(a.useCallback)((function(t){e(De(t))}),[e]),d=Object(a.useCallback)((function(){e(ke())}),[e]),s=Object(a.useCallback)((function(){e(_e())}),[e]),m=Object(a.useCallback)((function(){e(we())}),[e]),p=Object(a.useCallback)((function(t,n){e(Re(t,n))}),[e]),b=Object(a.useCallback)((function(t,n){e(ze({startIdx:t,endIdx:n}))}),[e]);return r.a.createElement(dr,{dotFrameList:n,activeIdx:o,layerIdx:f,columnCount:c,rowCount:l,backgroundImg:i,handleChangeIdx:u,handleRemoveDotArt:d,handleCopyDotArt:s,handleAddDotArt:m,handleChangeInterval:p,handleReorderDotList:b})})),mr=n(521);function pr(){var e=Object(g.a)(["\n  font-size: 12px;\n  line-height: 26px;\n  margin-right: 8px;\n  white-space: nowrap;\n"]);return pr=function(){return e},e}function br(){var e=Object(g.a)(["\n  width: 200px;\n  height: 40px;\n  display: flex;\n  background: #f2e8dc;\n  padding: 8px;\n  font-size: 8px;\n"]);return br=function(){return e},e}function Er(){var e=Object(g.a)(["\n      color: #fff;\n      background: ",";\n      box-shadow: 0 0.05rem #666;\n      transform: translateY(4px);\n    "]);return Er=function(){return e},e}function gr(){var e=Object(g.a)(["\n  width: 22px;\n  height: 22px;\n  padding: 0;\n  box-shadow: 0 0.2rem #666;\n  font-size: 14px;\n  border-radius: 0.3rem;\n  ","\n"]);return gr=function(){return e},e}function Or(){var e=Object(g.a)(["\n  z-index: 10;\n  position: absolute;\n  display: flex;\n  width: 80px;\n  height: 30px;\n  top: 0.5rem;\n  left: 1rem;\n  opacity: ",";\n  transition: opacity 0.3s;\n  & > * {\n    margin: 0px 2px;\n  }\n"]);return Or=function(){return e},e}function vr(){var e=Object(g.a)(["\n  background-color: #a69e94;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 200px;\n  height: 200px;\n  overflow: hidden;\n"]);return vr=function(){return e},e}function hr(){var e=Object(g.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n"]);return hr=function(){return e},e}var xr=k.b.div(hr()),Cr=k.b.div(vr()),jr=k.b.div(Or(),(function(e){return e.hovered?1:0})),Ar=Object(k.b)(B)(gr(),(function(e){return!0===e.selected&&Object(k.a)(Er(),(function(e){return e.selectColor?"".concat(e.selectColor):"skyblue"}))})),yr=k.b.div(br()),Tr=k.b.div(pr()),Sr=r.a.memo((function(e){var t=e.animationDuration,n=e.dotFrameList,o=e.layerList,f=e.rowCount,c=e.columnCount,l=e.layerData,i=e.backgroundImg,u=e.handleOpenDialog,d=e.handleChangeAnimationDuration,s=Object(a.useState)(!0),m=Object(A.a)(s,2),p=m[0],b=m[1],E=Object(a.useState)(!0),g=Object(A.a)(E,2),O=g[0],v=g[1],h=Object(a.useState)(1),x=Object(A.a)(h,2),C=x[0],j=x[1],y=Object(a.useState)(!1),T=Object(A.a)(y,2),S=T[0],L=T[1],I=Object(a.useState)(X(n,l)),D=Object(A.a)(I,2),k=D[0],_=D[1];Object(a.useEffect)((function(){_(X(n,l))}),[p,n,l]),Object(a.useEffect)((function(){var e=document.getElementById("previewBlock"),t=O?200:100,n=f<c?t/c:t/f;j(n),e.style.backgroundImage="url(".concat(i?ot.a:at.a,")"),e.style.position="absolute",e.style.width="".concat(Math.min(n*c,t),"px"),e.style.height="".concat(Math.min(n*f,t),"px")}),[f,c,i,O]),Object(a.useEffect)((function(){var e=document.getElementById("paintBox"),t=e.parentNode,n=e.childNodes[0],a=document.getElementById("previewBlock"),r=document.createElement("div");r.style.position="absolute",r.style.zIndex=1,r.style.border="3px solid red",r.style.display="none",r.style.cursor="pointer",r.attributes.draggable=!1,a.appendChild(r);var o=function(o){var f=e.offsetTop===t.offsetTop,c=e.offsetLeft===n.offsetLeft;if(f||c){if(r.style.display="block",f)r.style.top="".concat(e.scrollTop/e.scrollHeight*a.clientHeight,"px"),r.style.height="".concat(e.clientHeight/e.scrollHeight*a.clientHeight,"px");else{var l=Math.min(t.clientHeight/e.clientHeight*a.clientHeight,200);r.style.height="".concat(l,"px"),r.style.top="-".concat((l-a.clientHeight)/2,"px")}if(c)r.style.left="".concat(e.scrollLeft/e.scrollWidth*a.clientWidth,"px"),r.style.width="".concat(e.clientWidth/e.scrollWidth*a.clientWidth,"px");else{var i=Math.min(e.clientWidth/n.clientWidth*a.clientWidth,200);r.style.width="".concat(i,"px"),r.style.left="-".concat((i-a.clientWidth)/2,"px")}}else r.style.display="none"},f=!1;return new MutationObserver((function(e){e.forEach((function(e){o()}))})).observe(a,{attributes:!0}),e.addEventListener("scroll",o,{passive:!0}),r.addEventListener("mousedown",(function(e){f=!0}),{passive:!0}),document.body.addEventListener("mouseup",(function(e){f=!1}),{passive:!0}),document.body.addEventListener("mousemove",(function(t){if(f){var n=document.getElementById("previewWrapper").getBoundingClientRect(),a=t.clientX-n.x,r=t.clientY-n.y,o=e.scrollWidth/200*a-e.clientWidth/2,c=e.scrollHeight/200*r-e.clientHeight/2;e.scrollTo(o,c)}}),{passive:!0}),function(){e.removeEventListener("scroll",o,{passive:!0})}}),[]);var w=function(e){L(e)};return r.a.createElement(xr,{onMouseOver:function(){return w(!0)},onMouseOut:function(){return w(!1)}},r.a.createElement(jr,{hovered:S},r.a.createElement(tt,{placement:"bottom",tooltip:r.a.createElement(r.a.Fragment,null,"Toggle animation")},r.a.createElement(Ar,{onClick:function(){b(!p)},selected:p,selectColor:"#f05556",color:p?"#b71b2d":"#008000",baseColor:"#3db12a"},p?r.a.createElement(V.e,null):r.a.createElement(V.f,null))),r.a.createElement(tt,{placement:"bottom",tooltip:r.a.createElement(r.a.Fragment,null,"Preview zoom ",O?"Out":"In")},r.a.createElement(Ar,{onClick:function(){v(!O)}},O?r.a.createElement(V.d,null):r.a.createElement(V.c,null))),r.a.createElement(tt,{placement:"bottom",tooltip:r.a.createElement(r.a.Fragment,null,"Open preview dialog")},r.a.createElement(Ar,{onClick:function(){return u("PreviewDialog")}},r.a.createElement(V.b,null)))),r.a.createElement(Cr,{backgroundImg:i,id:"previewWrapper"},r.a.createElement("div",{id:"previewBlock"},!p&&r.a.createElement(P,{dotSet:J(o,l),column:c,size:C}),p&&r.a.createElement(P,{dotList:k,column:c,size:C,animation:p,duration:t}))),r.a.createElement(tt,{placement:"bottom",tooltip:r.a.createElement(r.a.Fragment,null,"Show animation for ",t,"s",r.a.createElement("span",null,"frame duration can be manipulated indivodually"))},r.a.createElement(yr,null,r.a.createElement(Tr,null,"Duration ",t,"S"),r.a.createElement(mr.a,{defaultValue:2,"aria-labelledby":"vertical-slider",valueLabelDisplay:"auto",step:1,color:"secondary",min:1,max:10,onChange:function(e,t){d(t)}}))))})),Lr=r.a.memo((function(){var e=Object(Je.c)(),t=Object(Je.d)((function(e){var t=e.dotArt.present.dot;return{dotFrameList:t.dotFrameList,layerList:t.dotFrameList[t.activeIdx].layerList,rowCount:t.rowCount,columnCount:t.columnCount,animationDuration:t.animationDuration,layerData:t.layerData}})),n=t.dotFrameList,o=t.layerList,f=t.rowCount,c=t.columnCount,l=t.animationDuration,i=t.layerData,u=Object(Je.d)((function(e){return{backgroundImg:e.observer.backgroundImg}})).backgroundImg,d=Object(a.useCallback)((function(t){e(Pt(t))}),[e]),s=Object(a.useCallback)((function(t){e(Ne(t))}),[e]),m=Object(a.useCallback)((function(t){e(Ea(t))}),[e]);return r.a.createElement(Sr,{animationDuration:l,dotFrameList:n,layerList:o,rowCount:f,columnCount:c,layerData:i,backgroundImg:u,handleOpenDialog:d,handleChangeAnimationDuration:s,handleChangeTyping:m})})),Ir=function(e){var t=e.rowIdx,n=e.columnIdx,a=e.onMouseOverHandler;return r.a.createElement("div",{onMouseOver:function(e){return a(e,t,n)},onMouseDown:function(e){return a(e,t,n)}})},Dr=r.a.memo((function(e){var t=e.dotLineIdx,n=e.onMouseOverHandler,o=Object(Je.d)((function(e){return{columnCount:e.dotArt.present.dot.columnCount}}),Je.b).columnCount,f=Object(a.useCallback)((function(){for(var e=[],a=0;a<o;a++)e.push(r.a.createElement(Ir,{key:a,rowIdx:t,columnIdx:a,onMouseOverHandler:n}));return e}),[o,t,n]);return r.a.createElement("div",null,f())})),kr=r.a.memo((function(e){var t=e.layerList,n=e.fakeDotArt,a=e.columnCount,o=e.dotSize,f=e.layerIdx,c=e.selectedPaintTool,l=e.showLayers;return r.a.createElement("div",null,t.map((function(e,t){return t===f?r.a.createElement("div",{key:"selectLayer",id:"selectLayer"},c===se&&r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{key:t,dotSet:e,column:a,size:o,zIndex:2,opacity:1}),r.a.createElement(P,{dotSet:n,column:a,size:o,zIndex:100})),c!==se&&r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{dotSet:n,column:a,size:o,zIndex:2}))):l?r.a.createElement(P,{key:t,dotSet:e,column:a,size:o,zIndex:1,opacity:.5}):void 0})))})),_r=function(){var e=Object(Je.d)((function(e){var t=e.dotArt.present.dot;return{layerList:t.dotFrameList[t.activeIdx].layerList,layerIdx:t.layerData[t.layerSelectIdx].dotFrameIdx,fakeDotArt:t.fakeDotArt,columnCount:t.columnCount}})),t=e.layerList,n=e.layerIdx,a=e.fakeDotArt,o=e.columnCount,f=Object(Je.d)((function(e){var t=e.observer;return{dotSize:t.dotSize,showLayers:t.showLayers}})),c=f.dotSize,l=f.showLayers,i=Object(Je.d)((function(e){return{selectedPaintTool:e.paintTool.selectedPaintTool}})).selectedPaintTool;return r.a.createElement(kr,{layerList:t,fakeDotArt:a,columnCount:o,dotSize:c,layerIdx:n,selectedPaintTool:i,showLayers:l})};function wr(){var e=Object(g.a)(["\n          border: ","px solid ",";\n          width: ","px;\n          height: ","px;\n          min-width: ","px;\n          min-height: ","px;\n        "]);return wr=function(){return e},e}function Rr(){var e=Object(g.a)(["\n      border: ","px solid ",";\n    "]);return Rr=function(){return e},e}function Nr(){var e=Object(g.a)(["\n  background-image: ",";\n  display: inline-flex;\n  justify-content: flex-start;\n  flex-direction: column;\n  width: auto;\n  height: fit-content;\n  margin: 0 auto;\n  padding: 0;\n  box-sizing: border-box;\n  ",";\n  & > :nth-child(n + 2) {\n    display: flex;\n    & > * {\n      z-index: 99;\n      cursor: cell;\n      box-sizing: border-box;\n      :hover {\n        background: rgba(255, 255, 255, 0.2);\n      }\n      ",";\n    }\n  }\n"]);return Nr=function(){return e},e}function Pr(){var e=Object(g.a)(["\n  display: flex;\n  box-sizing: border-box;\n  touch-action: none;\n  overflow: auto;\n"]);return Pr=function(){return e},e}function zr(){var e=Object(g.a)(["\n  z-index: 0;\n  width: 100%;\n  height: 92vh;\n  max-height: 92vh;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  overflow: hidden;\n  background: #a69e94;\n  margin-right: 8px;\n"]);return zr=function(){return e},e}var Fr,Hr,Mr=k.b.div(zr()),Gr=k.b.div(Pr()),Wr=k.b.div(Nr(),(function(e){return 1===e.backgroundImg?"url(".concat(ot.a,")"):"url(".concat(at.a,")")}),(function(e){return Object(k.a)(Rr(),e.borderSize,e.borderColor)}),(function(e){return Object(k.a)(wr(),e.borderSize,e.borderColor,e.dotSize,e.dotSize,e.dotSize,e.dotSize)})),Br=r.a.memo((function(e){var t=e.border,n=e.dotSize,o=e.rowCount,f=e.backgroundImg,c=e.onWheelHandle,l=e.onChangePaintStateHandle,i=e.onDotActionHandle,u=e.onSetDirectionHandle,d=e.onLeavesPaintAreaHandle,s=Object(a.useCallback)((function(e){e.preventDefault(),1!==e.button&&(u(0===e.button?"LEFT":"RIGHT"),l("DRAGGING"))}),[l,u]),m=Object(a.useCallback)((function(e,t,n){e.preventDefault(),i(t,n)}),[i]),p=Object(a.useCallback)((function(){for(var e=[],t=0;t<o;t++)e.push(r.a.createElement(Dr,{key:t,dotLineIdx:t,onMouseDownHandler:s,onMouseOverHandler:m}));return e}),[o,s,m]);return r.a.createElement(Mr,{onWheel:function(e){return c(e)},onContextMenu:function(e){return e.preventDefault()}},r.a.createElement(Gr,{id:"paintBox"},r.a.createElement(Wr,{dotSize:n,borderColor:t.color,borderSize:0===t.size||n<5?0:n<17?1:t.size,backgroundImg:f,onMouseLeave:d,onMouseDownCapture:s,onContextMenu:function(e){return e.preventDefault()}},r.a.createElement(_r,null),p())))})),Vr=n(26),Ur=(n(454),Object(ie.a)("loading/START_LOADING",(function(e){return e})),Object(ie.a)("loading/FINISH_LOADING",(function(e){return e})),Object(ue.a)((Fr={},Object(le.a)(Fr,"loading/START_LOADING",(function(e,t){return Object(Y.a)({},e,Object(le.a)({},t.payload,!0))})),Object(le.a)(Fr,"loading/FINISH_LOADING",(function(e,t){return Object(Y.a)({},e,Object(le.a)({},t.payload,!1))})),Fr),{})),Yr={paintTools:{DOT:{key:"Q",code:"KeyQ",helpText:"Pen tool"},BUCKET:{key:"B",code:"KeyB",helpText:"Bucket tool"},PICKER:{key:"P",code:"KeyP",helpText:"Color picker tool"},ERASER:{key:"E",code:"KeyE",helpText:"Eraser tool"},MOVE:{key:"M",code:"KeyM",helpText:"Move tool"},SAMECOLOR:{key:"A",code:"KeyA",helpText:"Bucket all same colors pixel"},DITHERING:{key:"D",code:"KeyD",helpText:"Dithering tool"},category:[se,me,pe,be,Ee,"SAMECOLOR","DITHERING"]},color:{SWAP:{key:"X",code:"KeyX",helpText:"Swap first/second Color"},PALETTE_LINE_UP:{key:"\u2191",code:"ArrowUp",helpText:"Select palette line move up"},PALETTE_LINE_DOWN:{key:"\u2193",code:"ArrowDown",helpText:"Select palette line move down"},PALETTE_SELECT_1:{key:"1",code:"Digit1",helpText:"Select palette cell 1"},PALETTE_SELECT_2:{key:"2",code:"Digit2",helpText:"Select palette cell 2"},PALETTE_SELECT_3:{key:"3",code:"Digit3",helpText:"Select palette cell 3"},PALETTE_SELECT_4:{key:"4",code:"Digit4",helpText:"Select palette cell 4"},PALETTE_SELECT_5:{key:"5",code:"Digit5",helpText:"Select palette cell 5"},PALETTE_SELECT_6:{key:"6",code:"Digit6",helpText:"Select palette cell 6"},PALETTE_SELECT_7:{key:"7",code:"Digit7",helpText:"Select palette cell 7"},category:["SWAP","PALETTE_LINE_UP","PALETTE_LINE_DOWN","PALETTE_SELECT_1","PALETTE_SELECT_2","PALETTE_SELECT_3","PALETTE_SELECT_4","PALETTE_SELECT_5","PALETTE_SELECT_6","PALETTE_SELECT_7"]},storage:{SAVE_DOTART:{key:"ctrl + S",code:"$mod+KeyS",helpText:"Save to localStorage"},LOAD_DOTART:{key:"alt + L",code:"Alt+KeyL",helpText:"Open load dialog"},category:["SAVE_DOTART","LOAD_DOTART"]},misc:{INCREASE_DOTSIZE:{key:"-",code:"Equal",helpText:"Increase dot size"},DECREASE_DOTSIZE:{key:"+",code:"Minus",helpText:"Decrease dot size"},INCREASE_COLUMN:{key:"ctrl + \u2192",code:"$mod+ArrowRight",helpText:"Column + 1"},DECREASE_COLUMN:{key:"ctrl + \u2190",code:"$mod+ArrowLeft",helpText:"Column - 1"},INCREASE_ROW:{key:"ctrl + \u2193",code:"$mod+ArrowDown",helpText:"Row + 1"},DECREASE_ROW:{key:"ctrl + \u2191",code:"$mod+ArrowUp",helpText:"Row - 1"},UNDO:{key:"ctrl + Z",code:"$mod+KeyZ",helpText:"Undo"},REDO:{key:"ctrl + shift + Z",code:"$mod+Shift+KeyZ",helpText:"Redo"},MOVE_VIEWPORT_UP:{key:"shift + \u2191",code:"Shift+ArrowUp",helpText:"Move viewport up"},MOVE_VIEWPORT_RIGHT:{key:"shift + \u2192",code:"Shift+ArrowRight",helpText:"Move viewport right"},MOVE_VIEWPORT_DOWN:{key:"shift + \u2193",code:"Shift+ArrowDown",helpText:"Move viewport down"},MOVE_VIEWPORT_LEFT:{key:"shift + \u2190",code:"Shift+ArrowLeft",helpText:"Move viewport left"},category:["INCREASE_DOTSIZE","DECREASE_DOTSIZE","INCREASE_COLUMN","DECREASE_COLUMN","INCREASE_ROW","DECREASE_ROW","UNDO","REDO","MOVE_VIEWPORT_UP","MOVE_VIEWPORT_RIGHT","MOVE_VIEWPORT_DOWN","MOVE_VIEWPORT_LEFT"]}},Kr=(Object(ie.a)("keybind/CHANGE_KEY_BIND",(function(e){return{action:e.action,key:e.key}})),Object(Y.a)({},Yr)),Zr=Object(ue.a)(Object(le.a)({},"keybind/CHANGE_KEY_BIND",(function(e){return Object(Y.a)({},e)})),Kr),Jr=n(84),Xr=n.n(Jr),Qr=Object(ie.a)("index/DOT_ACTIONS",(function(e){return{rowIdx:e.rowIdx,columnIdx:e.columnIdx}})),$r=Object(ie.a)("index/CLEAR_FAKE_DOT_ART"),qr=Object(Vr.combineReducers)({dot:Ze}),eo=Object(Vr.combineReducers)({dotArt:Xr()(qr,{limit:100,ignoreInitialState:!0,filter:Object(Jr.includeAction)(["dot/CLEAR_DOT","dot/NEW_DOT_ART_PROJECT","dot/LOAD_DOT_ART","dot/INCREASE_COLUMN","dot/DECREASE_COLUMN","dot/INCREASE_ROW","dot/DECREASE_ROW","dot/CHANGE_DOT_AREA","dot/CHANGE_ACTIVE_IDX","dot/REMOVE_ACTIVE_DOT_ART","dot/COPY_ACTIVE_DOT_ART","dot/ADD_NEW_DOT_ART","dot/CHANGE_ANIMATION_INTERVAL","dot/REORDER_DOT_LIST","dot/UPDATE_DOT_ART","dot/ADD_NEW_LAYER","dot/REMOVE_LAYER","dot/MERGE_LAYER","dot/MOVE_UP_LAYER","dot/MOVE_DOWN_LAYER","dot/SELECT_LAYER_IDX","dot/RENAME_LAYER"])}),palettes:ba,paintTool:xe,dialog:Ft,loading:Ur,observer:La,keybind:Zr}),to=function(e,t,n,a,r){var o,f=[];return(t+1)%r!==0&&e[o=t+1]===n&&f.push(o),t%r!==0&&e[o=t-1]===n&&f.push(o),t>=r&&e[o=t-r]===n&&f.push(o),t<r*a-r&&e[o=t+r]===n&&f.push(o),f},no=function(e,t,n,a,r,o){if("IDLE"===n||"DRAGGING"!==n)return Object(Y.a)({},e);switch(t){case se:if("DRAGGING"===n){var f="LEFT"===a?e.palettes.leftColor:e.palettes.rightColor,c=e.dotArt.present.dot.fakeDotArt.map((function(e){return e.slice()}));return c[r][o]=f,Object(Y.a)({},e,{dotArt:Object(Y.a)({},e.dotArt,{present:Object(Y.a)({},e.dotArt.present,{dot:Object(Y.a)({},e.dotArt.present.dot,{fakeDotArt:c})})})})}return Object(Y.a)({},e);case me:if("DRAGGING"===n){for(var l="LEFT"===a?e.palettes.leftColor:e.palettes.rightColor,i=e.dotArt.present.dot,u=i.rowCount,d=i.columnCount,s=e.dotArt.present.dot.fakeDotArt.reduce((function(e,t){return e.concat(t)})),m=r*d+o,p=function(e,t,n,a,r,o){for(var f,c,l,i,u=[t],d=e.slice();u.length>0;){d[f=u.pop()]=a,c=to(d,f,n,r,o);for(var s=0;s<c.length;s++)i=e[l=c[s]],-1===u.indexOf(l)&&i!==a&&u.push(l)}return d}(s,m,s[m],l,u,d),b=[],E=0,g=0;g<u;g++){for(var O=[],v=0;v<d;v++)O.push(p[E]),E++;b.push(O),O=[]}return Object(Y.a)({},e,{dotArt:Object(Y.a)({},e.dotArt,{present:Object(Y.a)({},e.dotArt.present,{dot:Object(Y.a)({},e.dotArt.present.dot,{fakeDotArt:b})})})})}return Object(Y.a)({},e);case pe:if("DRAGGING"===n){var h=e.dotArt.present.dot.fakeDotArt[r][o];return h?"LEFT"===a?Object(Y.a)({},e,{palettes:Object(Y.a)({},e.palettes,{leftColor:h})}):Object(Y.a)({},e,{palettes:Object(Y.a)({},e.palettes,{rightColor:h})}):Object(Y.a)({},e)}return Object(Y.a)({},e);case be:if("DRAGGING"===n){var x=e.dotArt.present.dot.fakeDotArt.map((function(e){return e.slice()}));return x[r][o]="",Object(Y.a)({},e,{dotArt:Object(Y.a)({},e.dotArt,{present:Object(Y.a)({},e.dotArt.present,{dot:Object(Y.a)({},e.dotArt.present.dot,{fakeDotArt:x})})})})}return Object(Y.a)({},e);case Ee:if("DRAGGING"===n){var C,j=e.observer.startPosition.x,A=e.observer.startPosition.y,y=e.observer.mousePosition.x,T=e.observer.mousePosition.y,S=y-j,L=T-A,I=e.dotArt.present.dot,D=I.columnCount,k=I.layerSelectIdx,_=I.layerData[k].dotFrameIdx,w=I.dotFrameList[I.activeIdx].layerList[_].slice();return e.observer.altDown?(L>0?(C=w.slice(w.length-L),w=C.concat(w.slice(0,w.length-L))):L<0&&(C=w.slice(0,-L),w=w.slice(-L).concat(C)),S>0?w=w.map((function(e){return e.slice(-S).concat(e.slice(0,e.length-S))})):S<0&&(w=w.map((function(e){return e.slice(-S).concat(e.slice(0,-S))})))):(L>0?w=w.slice(0,w.length-L):L<0&&(w=w.slice(-L)),S>0?w=w.map((function(e){return new Array(S).fill("").concat(e.slice(0,e.length-S))})):S<0&&(w=w.map((function(e){return e.slice(-S).concat(new Array(-S).fill(""))}))),L>0?w=K(L,D).concat(w):L<0&&(w=w.concat(K(-L,D)))),Object(Y.a)({},e,{dotArt:Object(Y.a)({},e.dotArt,{present:Object(Y.a)({},e.dotArt.present,{dot:Object(Y.a)({},e.dotArt.present.dot,{fakeDotArt:w})})})})}return Object(Y.a)({},e);case"SAMECOLOR":if("DRAGGING"===n){var R="LEFT"===a?e.palettes.leftColor:e.palettes.rightColor,N=e.dotArt.present.dot.fakeDotArt.map((function(e){return e.slice()})),P=N[r][o];return N=N.map((function(e){return e.map((function(e){return e===P?R:e}))})),Object(Y.a)({},e,{dotArt:Object(Y.a)({},e.dotArt,{present:Object(Y.a)({},e.dotArt.present,{dot:Object(Y.a)({},e.dotArt.present.dot,{fakeDotArt:N})})})})}return Object(Y.a)({},e);case"DITHERING":if("DRAGGING"===n){var z=1;r%2===1&&(z*=-1),o%2===1&&(z*=-1),"RIGHT"===a&&(z*=-1);var F=1===z?e.palettes.rightColor:e.palettes.leftColor,H=e.dotArt.present.dot.fakeDotArt.map((function(e){return e.slice()}));return H[r][o]=F,Object(Y.a)({},e,{dotArt:Object(Y.a)({},e.dotArt,{present:Object(Y.a)({},e.dotArt.present,{dot:Object(Y.a)({},e.dotArt.present.dot,{fakeDotArt:H})})})})}return Object(Y.a)({},e);default:return Object(Y.a)({},e)}},ao=function(e){switch(e.paintTool.selectedPaintTool){case se:var t=K(e.dotArt.present.dot.rowCount,e.dotArt.present.dot.columnCount);return Object(Y.a)({},e,{dotArt:Object(Y.a)({},e.dotArt,{present:Object(Y.a)({},e.dotArt.present,{dot:Object(Y.a)({},e.dotArt.present.dot,{fakeDotArt:t})})}),observer:Object(Y.a)({},e.observer,{startPosition:{x:"",y:""}})});case me:case be:case"SAMECOLOR":case pe:case Ee:case"DITHERING":var n=e.dotArt.present.dot,a=n.activeIdx,r=n.layerSelectIdx,o=n.layerData[r].dotFrameIdx;return Object(Y.a)({},e,{dotArt:Object(Y.a)({},e.dotArt,{present:Object(Y.a)({},e.dotArt.present,{dot:Object(Y.a)({},e.dotArt.present.dot,{fakeDotArt:e.dotArt.present.dot.dotFrameList[a].layerList[o]})})}),observer:Object(Y.a)({},e.observer,{startPosition:{x:"",y:""}})});case pe:default:return Object(Y.a)({},e)}},ro=Object(ue.a)((Hr={},Object(le.a)(Hr,"index/DOT_ACTIONS",(function(e,t){var n=t.payload,a=n.rowIdx,r=n.columnIdx,o=Object(Y.a)({},e,{observer:Object(Y.a)({},e.observer,{mousePosition:{x:r,y:a},startPosition:"DRAGGING"===e.paintTool.paintState&&""===e.observer.startPosition.x&&""===e.observer.startPosition.y?{x:r,y:a}:e.observer.startPosition})});return no(o,e.paintTool.selectedPaintTool,e.paintTool.paintState,e.paintTool.direction,a,r)})),Object(le.a)(Hr,"dot/CLEAR_DOT",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/LOAD_DOT_ART",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/NEW_DOT_ART_PROJECT",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/REMOVE_ACTIVE_DOT_ART",(function(e){return ao(e)})),Object(le.a)(Hr,"paintTool/CHANGE_PAINT_TOOL",(function(e){return ao(e)})),Object(le.a)(Hr,"index/CLEAR_FAKE_DOT_ART",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/UPDATE_DOT_ART",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/INCREASE_COLUMN",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/DECREASE_COLUMN",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/INCREASE_ROW",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/DECREASE_ROW",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/CHANGE_DOT_AREA",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/CHANGE_ACTIVE_IDX",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/ADD_NEW_DOT_ART",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/REMOVE_LAYER",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/MERGE_LAYER",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/MOVE_UP_LAYER",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/MOVE_DOWN_LAYER",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/SELECT_LAYER_IDX",(function(e){return ao(e)})),Object(le.a)(Hr,"dot/RENAME_LAYER",(function(e){return ao(e)})),Hr),{});var oo=function(e,t){var n=eo(e,t);return ro(n,t)},fo=function(){var e=Object(Je.c)(),t=Object(Je.d)((function(e){return{rowCount:e.dotArt.present.dot.rowCount}})).rowCount,n=Object(Je.d)((function(e){var t=e.observer;return{border:t.dotBorder,dotSize:t.dotSize,backgroundImg:t.backgroundImg}})),o=n.border,f=n.dotSize,c=n.backgroundImg,l=Object(a.useCallback)((function(t){t.deltaY>0?e(xa()):e(ha())}),[e]),i=Object(a.useCallback)((function(t){return e(Oe(t))}),[e]),u=Object(a.useCallback)((function(t,n){return e(Qr({rowIdx:t,columnIdx:n}))}),[e]),d=Object(a.useCallback)((function(t){return e(ve(t))}),[e]),s=Object(a.useCallback)((function(){return e(ga())}),[e]);return r.a.createElement(Br,{border:o,dotSize:f,rowCount:t,backgroundImg:c,onWheelHandle:l,onChangePaintStateHandle:i,onDotActionHandle:u,onSetDirectionHandle:d,onLeavesPaintAreaHandle:s})},co=n(27),lo=n(217),io=n(218),uo=n(123);function so(){var e=Object(g.a)(["\n  height: 40px;\n  display: flex;\n  margin-bottom: 8px;\n\n  & > * {\n    margin-right: 1px;\n  }\n"]);return so=function(){return e},e}function mo(){var e=Object(g.a)(["\n  width: 100%;\n  padding: 4px;\n"]);return mo=function(){return e},e}var po=k.b.div(mo()),bo=k.b.div(so()),Eo=r.a.memo((function(e){var t=e.paintToolsShortcuts,n=e.onChangePaintTool,a=e.selectedPaintTool;return r.a.createElement(po,null,r.a.createElement("span",null,"Paint Tools"),r.a.createElement(bo,null,r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement("div",null,t.DOT.helpText,r.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t.DOT.key,")")))},r.a.createElement(B,{width:"40",selected:a===se,onClick:function(){return n(se)}},r.a.createElement(co.h,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement("div",null,t[me].helpText,r.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t[me].key,")")))},r.a.createElement(B,{width:"40",selected:a===me,onClick:function(){return n(me)}},r.a.createElement(lo.a,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement("div",null,t.SAMECOLOR.helpText,r.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t.SAMECOLOR.key,")")))},r.a.createElement(B,{width:"40",selected:"SAMECOLOR"===a,onClick:function(){return n("SAMECOLOR")}},r.a.createElement(io.a,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement("div",null,t[be].helpText,r.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t[be].key,")")))},r.a.createElement(B,{width:"40",selected:a===be,onClick:function(){return n(be)}},r.a.createElement(uo.b,null)))),r.a.createElement(bo,null,r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement("div",null,t[pe].helpText,r.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t[pe].key,")")))},r.a.createElement(B,{width:"40",selected:a===pe,onClick:function(){return n(pe)}},r.a.createElement(co.i,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement("div",null,t[Ee].helpText,r.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t[Ee].key,")")),r.a.createElement("div",{className:"tooltip-name"},r.a.createElement("span",{className:"tooltip-key"},"ALT"),"Wrap mod"))},r.a.createElement(B,{width:"40",selected:a===Ee,onClick:function(){return n(Ee)}},r.a.createElement(uo.c,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement("div",null,t.DITHERING.helpText,r.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t.DITHERING.key,")")))},r.a.createElement(B,{width:"40",selected:"DITHERING"===a,onClick:function(){return n("DITHERING")}},r.a.createElement(uo.a,null)))))})),go=function(){var e=Object(Je.c)(),t=Object(Je.d)((function(e){return{selectedPaintTool:e.paintTool.selectedPaintTool}})).selectedPaintTool,n=Object(Je.d)((function(e){return{paintToolsShortcuts:e.keybind.paintTools}})).paintToolsShortcuts,o=Object(a.useCallback)((function(t){return e(ge(t))}),[e]);return r.a.createElement(Eo,{paintToolsShortcuts:n,onChangePaintTool:o,selectedPaintTool:t})},Oo=n(222),vo=n.n(Oo),ho=n(221),xo=n.n(ho),Co=n(219),jo=n.n(Co),Ao=n(220),yo=n.n(Ao),To=n(224),So=n(223),Lo=n.n(So);function Io(){var e=Object(g.a)(["\n  display: flex;\n  height: 40px;\n  & > * {\n    margin-right: 2px;\n  }\n"]);return Io=function(){return e},e}var Do=k.b.div(Io()),ko=r.a.memo((function(e){var t=e.storageShortcuts,n=e.newProjectHandle,o=e.dotClearHandle,f=e.saveHandle,c=e.dialogOpenHandle,l=Object(a.useCallback)((function(){n()}),[n]);return r.a.createElement(Do,null,r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Open new project")},r.a.createElement(B,{width:"40",onClick:l},r.a.createElement(jo.a,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Clear selected frame")},r.a.createElement(B,{width:"40",onClick:o},r.a.createElement(yo.a,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement("div",null,"Save to localStorage",r.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t.SAVE_DOTART.key,")")))},r.a.createElement(B,{width:"40",onClick:f},r.a.createElement(xo.a,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement("div",null,"Open load dialog",r.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t.LOAD_DOTART.key,")")))},r.a.createElement(B,{width:"40",onClick:function(){return c("LoadDialog")}},r.a.createElement(vo.a,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Open Download dialog",r.a.createElement("span",{className:"tooltip-name"},"download dotArt in diffrent formats"))},r.a.createElement(B,{width:"40",onClick:function(){return c("DownloadDialog")}},r.a.createElement(Lo.a,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Open CSS dialog",r.a.createElement("span",{className:"tooltip-name"},"show your CSS code"))},r.a.createElement(B,{width:"40",onClick:function(){return c("CssDialog")}},r.a.createElement(To.a,null))))})),_o=function(){var e=Object(Nt.b)().enqueueSnackbar,t=Object(Je.c)(),n=Object(Je.d)((function(e){var t=e.dotArt.present.dot;return{dotFrameList:t.dotFrameList,columnCount:t.columnCount,rowCount:t.rowCount,animationDuration:t.animationDuration,layerData:t.layerData}})),o=n.dotFrameList,f=n.columnCount,c=n.rowCount,l=n.animationDuration,i=n.layerData,u=Object(Je.d)((function(e){var t=e.observer;return{dotBorder:t.dotBorder,backgroundImg:t.backgroundImg,saveState:t.saveState}})),d=u.dotBorder,s=u.backgroundImg,m=u.saveState,p=Object(Je.d)((function(e){return{storageShortcuts:e.keybind.storage}})).storageShortcuts;Object(a.useEffect)((function(){var e=It(localStorage),n=wt(localStorage);e||(Lt("dotArt_storage_v1",localStorage,{dotArt:[{dot:Object(Y.a)({},Tt)}],current:0}),e=It(localStorage)),t(Ae(e.dotArt[e.current].dot)),t(Aa(n))}),[]);var b=Object(a.useCallback)((function(){t(je())}),[t]),E=Object(a.useCallback)((function(){t(Ce())}),[t]),g=Object(a.useCallback)((function(e){t(Pt(e))}),[t]);Object(a.useEffect)((function(){if(m){var n={dot:{id:w.a.generate(),dotFrameList:o,columnCount:f,rowCount:c,animationDuration:l,layerData:i}};(function(e,t){try{var n=It(e);return n&&n.dotArt?(n.dotArt.push(t),n.current=n.dotArt.length-1):n=Object(Y.a)({},n,{dotArt:[t],current:0}),Lt("dotArt_storage_v1",e,n)}catch(a){return!1}})(localStorage,n)?e("Save DotArt To LocalStorage",{variant:"success"}):e("Save Fail!",{variant:"error"}),t(Sa(!1))}}),[m,t]),Object(a.useEffect)((function(){var e={dotBorder:d,backgroundImg:s},t=function(){!function(e,t){try{var n=Object(Y.a)({},wt(e),{},t);e.setItem("dotArt_private_setting_v1",JSON.stringify(n))}catch(a){return!1}}(localStorage,e)};return window.addEventListener("beforeunload",t,!1),function(){window.removeEventListener("beforeunload",t,!1)}}),[d,s]);var O=Object(a.useCallback)((function(){t(Sa(!0))}),[t]);return r.a.createElement(ko,{storageShortcuts:p,newProjectHandle:b,dotClearHandle:E,saveHandle:O,dialogOpenHandle:g})};function wo(){var e=Object(g.a)(["\n  background-color: black;\n  color: gold;\n  font-size: 0.5em;\n  font-weight: bold;\n  text-align: center;\n  line-height: 9px;\n  z-index: 10;\n  padding: 2px;\n  border-radius: 3px;\n"]);return wo=function(){return e},e}function Ro(){var e=Object(g.a)(["\n  cursor: pointer;\n  box-sizing: border-box;\n  position: relative;\n  align-items: center;\n  justify-content: center;\n  display: flex;\n  width: 30px;\n  height: 17.32px;\n  margin-left: 0px;\n  background-color: ",";\n  outline: none;\n\n  :before,\n  :after {\n    content: '';\n    box-sizing: border-box;\n    position: absolute;\n    z-index: 1;\n    width: 21.21px;\n    height: 21.21px;\n    -webkit-transform: scaleY(0.5774) rotate(-45deg);\n    -ms-transform: scaleY(0.5774) rotate(-45deg);\n    transform: scaleY(0.5774) rotate(-45deg);\n    background-color: ",";\n  }\n\n  :before {\n    top: -10.6066px;\n  }\n\n  :after {\n    bottom: -10.6066px;\n  }\n\n  &:hover {\n    color: white;\n  }\n"]);return Ro=function(){return e},e}var No=k.b.div(Ro(),(function(e){return e.color||""}),(function(e){return e.color||""})),Po=k.b.div(wo()),zo=function(e){var t=e.children,n=e.selectedPalette,a=e.cellIdx,o=Object(z.a)(e,["children","selectedPalette","cellIdx"]);return r.a.createElement(No,o,n&&r.a.createElement(Po,null,a+1),t)},Fo=function(e){var t=e.color,n=e.cellIdx,a=e.selectedPalette,o=e.handleSelectLeftColor,f=e.handleSelectRightColor;return r.a.createElement(zo,{color:t,selectedPalette:a,cellIdx:n,onClick:function(){return o(t)},onContextMenu:function(e){return f(e,t)}})};function Ho(){var e=Object(g.a)(["\n  display: flex;\n  margin-top: 8px;\n  &:nth-child(odd) {\n    margin-left: 15px;\n  }\n"]);return Ho=function(){return e},e}var Mo=k.b.div(Ho()),Go=function(e){var t=e.palette,n=e.selectedPalette,a=e.handleSelectLeftColor,o=e.handleSelectRightColor;return r.a.createElement(Mo,null,t.colors.map((function(e,f){return r.a.createElement(Fo,{color:e,paletteId:t.id,cellIdx:f,key:"".concat(t.id).concat(f),selectedPalette:n,handleSelectLeftColor:a,handleSelectRightColor:o})})))},Wo=n(516),Bo=n(522);function Vo(){var e=Object(g.a)(["\n  margin: 16px 4px;\n"]);return Vo=function(){return e},e}function Uo(){var e=Object(g.a)(["\n  display: flex;\n"]);return Uo=function(){return e},e}function Yo(){var e=Object(g.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n  padding: 2px;\n"]);return Yo=function(){return e},e}var Ko=Object(m.a)((function(e){return{formControl:{minWidth:200,width:300}}})),Zo=k.b.div(Yo()),Jo=k.b.div(Uo()),Xo=k.b.div(Vo()),Qo=r.a.memo((function(e){var t=e.palettes,n=e.paletteNames,a=e.selectPaletteId,o=e.selectPaletteLine,f=e.handleChange,c=e.handleSelectLeftColor,l=e.handleSelectRightColor,i=e.handleSelectColorCell,u=e.handleOpenPaletteDialog,d=Ko();return r.a.createElement(Zo,null,r.a.createElement(Jo,null,r.a.createElement(Wo.a,{className:d.formControl,variant:"outlined",color:"secondary",value:a,onChange:f},n.map((function(e){return r.a.createElement(Bo.a,{key:e.id,value:e.id},e.name)}))),r.a.createElement("div",null,r.a.createElement(tt,{placement:"right",tooltip:"Create new palette"},r.a.createElement(B,{height:"25",width:"30",onClick:function(){return u("CreatePalette")}},r.a.createElement(co.j,null))),r.a.createElement(tt,{placement:"right",tooltip:"Edit this palette"},r.a.createElement(B,{height:"25",width:"30",onClick:function(){return u("EditPalette")}},r.a.createElement(co.g,null))))),r.a.createElement(Xo,null,t.map((function(e,t){return r.a.createElement(Go,{palette:e,key:e.id,idx:t,selectedPalette:o===t,handleSelectColorCell:i,handleSelectLeftColor:c,handleSelectRightColor:l})}))))})),$o=r.a.memo((function(){var e=Object(Je.c)(),t=Object(Je.d)((function(e){var t=e.palettes;return{palettes:t.palettes,paletteNames:t.paletteNames,selectPaletteId:t.selectPaletteId,selectPaletteLine:t.selectPaletteLine}})),n=t.palettes,o=t.paletteNames,f=t.selectPaletteId,c=t.selectPaletteLine;Object(a.useEffect)((function(){var t=kt(localStorage);t&&t.palettes||(Dt(localStorage),t=kt(localStorage)),e(ca(t.palettes[t.current]))}),[]);var l=Object(a.useCallback)((function(t){if(function(e,t){try{var n=kt(e),a=n.palettes.findIndex((function(e){return e.id===t}));return-1!==a&&Lt("dotArt_palettes_storage_v1",e,n=Object(Y.a)({},n,{current:a}))}catch(r){return!1}}(localStorage,t.target.value)){var n=kt(localStorage);n&&n.palettes||(Dt(localStorage),n=kt(localStorage)),e(ca(n.palettes[n.current]))}}),[e]),i=Object(a.useCallback)((function(t){return e(la({color:t}))}),[e]),u=Object(a.useCallback)((function(t,n){t.preventDefault(),e(ia({color:n}))}),[e]),d=Object(a.useCallback)((function(t){e(Pt(t))}),[e]);return n&&r.a.createElement(Qo,{palettes:n,paletteNames:o,selectPaletteId:f,selectPaletteLine:c,handleChange:l,handleSelectLeftColor:i,handleSelectRightColor:u,handleOpenPaletteDialog:d})}));function qo(){var e=Object(g.a)(["\n  margin-top: 8px;\n  margin-left: -2px;\n"]);return qo=function(){return e},e}function ef(){var e=Object(g.a)(["\n  cursor: pointer;\n  margin-right: 3px;\n  border: 2px solid ",";\n  width: 20px;\n  height: 20px;\n  padding: ",";\n  :before {\n    content: '';\n    display: block;\n    width: 100%;\n    height: 100%;\n    background-color: ",";\n  }\n"]);return ef=function(){return e},e}function tf(){var e=Object(g.a)(["\n  margin-top: 8px;\n  display: flex;\n  align-items: center;\n  & > h4 {\n    padding: 0;\n    margin: 0;\n    margin-right: 8px;\n  }\n"]);return tf=function(){return e},e}function nf(){var e=Object(g.a)(["\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  margin-right: 3px;\n  background-image: ",";\n  border: 2px solid ",";\n"]);return nf=function(){return e},e}function af(){var e=Object(g.a)(["\n  display: flex;\n  & > h4 {\n    padding: 0;\n    margin: 0;\n    margin-right: 8px;\n  }\n"]);return af=function(){return e},e}function rf(){var e=Object(g.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n  padding: 4px 6px;\n  background-color: #f2e8dc;\n"]);return rf=function(){return e},e}var of=k.b.div(rf()),ff=k.b.div(af()),cf=k.b.div(nf(),(function(e){return 1===e.backgroundImg?"url(".concat(ot.a,")"):"url(".concat(at.a,")")}),(function(e){return e.selected?"orange":"#6f6f6f"})),lf=k.b.div(tf()),uf=k.b.div(ef(),(function(e){return e.selected?"orange":"#afafaf"}),(function(e){return"".concat(6-e.pixel,"px")}),(function(e){return e.selected?"orange":"#afafaf"})),df=k.b.div(qo()),sf=r.a.memo((function(e){var t=e.borderSize,n=e.borderColor,a=e.backgroundImg,o=e.onChangeDotBorderSize,f=e.onChangeDotBorderColor,c=e.onChangeBackgroundImg;return r.a.createElement(of,null,r.a.createElement(ff,null,r.a.createElement("h4",null,"Background"),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"dark")},r.a.createElement(cf,{backgroundImg:0,selected:0===a,onClick:function(){return c(0)}})),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"white")},r.a.createElement(cf,{backgroundImg:1,selected:1===a,onClick:function(){return c(1)}}))),r.a.createElement(lf,null,r.a.createElement("h4",null,"Dot Border"),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"none")},r.a.createElement(uf,{onClick:function(){return o(0)},pixel:-2,selected:0===t,borderColor:n})),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"1px")},r.a.createElement(uf,{onClick:function(){return o(1)},pixel:1,selected:1===t,borderColor:n})),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"2px")},r.a.createElement(uf,{onClick:function(){return o(2)},pixel:2,selected:2===t,borderColor:n})),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"3px")},r.a.createElement(uf,{onClick:function(){return o(3)},pixel:3,selected:3===t,borderColor:n}))),r.a.createElement(df,null,r.a.createElement(tt,{placement:"bottom",tooltip:r.a.createElement(r.a.Fragment,null,"Set border color")},r.a.createElement(Cn.GithubPicker,{onChange:f,width:190,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#1273DE","#004DCF","#5300EB","#000000","#9b9b9b","#ffffff","#f78da7","#eb144c","#9379d2","#87ceeb"]}))))})),mf=function(){var e=Object(Je.c)(),t=Object(Je.d)((function(e){var t=e.observer;return{borderSize:t.dotBorder.size,borderColor:t.dotBorder.color,backgroundImg:t.backgroundImg}})),n=t.borderSize,o=t.borderColor,f=t.backgroundImg,c=Object(a.useCallback)((function(t){e(Oa(t))}),[e]),l=Object(a.useCallback)((function(t){e(va(t.hex))}),[e]),i=Object(a.useCallback)((function(t){e(Ta(t))}),[e]);return r.a.createElement(sf,{borderSize:n,borderColor:o,backgroundImg:f,onChangeDotBorderSize:c,onChangeDotBorderColor:l,onChangeBackgroundImg:i})};function pf(){var e=Object(g.a)(["\n  display: flex;\n  width: 100%;\n  height: fit-content;\n  line-height: 55px;\n  align-items: center;\n  & > div {\n    width: 70px;\n    margin: 8px;\n  }\n"]);return pf=function(){return e},e}function bf(){var e=Object(g.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n  padding: 4px 1px;\n  background-color: #f2e8dc;\n"]);return bf=function(){return e},e}var Ef=k.b.div(bf()),gf=k.b.div(pf()),Of=r.a.memo((function(e){var t=e.onChangeArea,n=e.rowCount,o=e.columnCount,f=e.changeTypingHandle,c=Object(a.useState)(o),l=Object(A.a)(c,2),i=l[0],u=l[1],d=Object(a.useState)(n),s=Object(A.a)(d,2),m=s[0],p=s[1];Object(a.useEffect)((function(){u(o),p(n)}),[n,o]);return r.a.createElement(Ef,null,r.a.createElement(gf,null,r.a.createElement(U.a,{size:"small",variant:"outlined",type:"number",label:"Width",color:"secondary",value:i,onChange:function(e){return function(e){u(e.target.value)}(e)},onFocus:function(){return f(!0)},onBlur:function(){return f(!1)}}),"X",r.a.createElement(U.a,{size:"small",variant:"outlined",type:"number",label:"Height",color:"secondary",value:m,onChange:function(e){return function(e){p(e.target.value)}(e)},onFocus:function(){return f(!0)},onBlur:function(){return f(!1)}}),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Apply dot area size")},r.a.createElement(B,{onClick:function(){return t(m,i)}},"Apply"))))})),vf=function(){var e=Object(Je.c)(),t=Object(Je.d)((function(e){var t=e.dotArt;return{rowCount:t.present.dot.rowCount,columnCount:t.present.dot.columnCount}})),n=t.rowCount,o=t.columnCount,f=Object(a.useCallback)((function(t,n){e(Ie({newRow:parseInt(t),newColumn:parseInt(n)}))}),[e]),c=Object(a.useCallback)((function(t){e(Ea(t))}),[e]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Of,{rowCount:n,columnCount:o,onChangeArea:f,changeTypingHandle:c}))};function hf(){var e=Object(g.a)(["\n  border: 1px solid orange;\n  width: 100%;\n  padding-left: 8px;\n  height: 24px;\n  outline: none;\n  cursor: pointer;\n  font-size: 12px;\n  color: white;\n  background: rgba(50, 50, 50, 1);\n  ","\n"]);return hf=function(){return e},e}function xf(){var e=Object(g.a)(["\n      color: orange;\n      background: #59564f;\n    "]);return xf=function(){return e},e}function Cf(){var e=Object(g.a)(["\n        background-color: #d2c9be;\n      "]);return Cf=function(){return e},e}function jf(){var e=Object(g.a)(["\n  overflow: hidden;\n  white-space: nowrap;\n  width: 100%;\n  line-height: 24px;\n  color: #0d0d0d;\n  padding-left: 8px;\n  height: 24px;\n  background: #f2e8dc;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  font-size: 12px;\n  border-top: 2px solid #0d0d0d;\n  &:hover {\n    ","\n  }\n  ","\n  ","\n"]);return jf=function(){return e},e}function Af(){var e=Object(g.a)(["\n  width: 100%;\n  height: 24px;\n  cursor: pointer;\n  display: flex;\n"]);return Af=function(){return e},e}function yf(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n  max-height: 30vh;\n  overflow: auto;\n"]);return yf=function(){return e},e}function Tf(){var e=Object(g.a)(["\n          cursor: no-drop;\n          background: #a69e94;\n          color: #59564f;\n        "]);return Tf=function(){return e},e}function Sf(){var e=Object(g.a)(["\n          &:hover {\n            color: #1261a6;\n          }\n        "]);return Sf=function(){return e},e}function Lf(){var e=Object(g.a)(["\n  outline: none;\n  cursor: pointer;\n  font-size: 16px;\n  width: 33.3px;\n  height: 24px;\n  border: 1px solid #333333;\n  transition: all 0.2s ease-in-out;\n  color: #0d0d0d;\n  background: #f2e8dc;\n  ","\n"]);return Lf=function(){return e},e}function If(){var e=Object(g.a)(["\n  display: flex;\n"]);return If=function(){return e},e}function Df(){var e=Object(g.a)(["\n      color: #e83838;\n    "]);return Df=function(){return e},e}function kf(){var e=Object(g.a)(["\n  position: absolute;\n  cursor: pointer;\n  right: 0.5rem;\n  color: #0d0d0d;\n  font-size: 24px;\n  cursor: pointer;\n  transition: 0.2s linear;\n  ","\n"]);return kf=function(){return e},e}function _f(){var e=Object(g.a)(["\n  display: flex;\n  font-size: 20px;\n  padding-left: 16px;\n  color: black;\n  background: #f2e8dc;\n  line-height: 24px;\n  border-bottom: 1px solid #0d0d0d;\n"]);return _f=function(){return e},e}function wf(){var e=Object(g.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n"]);return wf=function(){return e},e}var Rf=k.b.div(wf()),Nf=k.b.div(_f()),Pf=k.b.div(kf(),(function(e){return e.showLayers&&Object(k.a)(Df())})),zf=k.b.div(If()),Ff=k.b.button(Lf(),(function(e){return e.disable?Object(k.a)(Tf()):Object(k.a)(Sf())})),Hf=k.b.div(yf()),Mf=k.b.div(Af()),Gf=k.b.span(jf(),(function(e){return!e.selected&&Object(k.a)(Cf())}),(function(e){return e.selected&&Object(k.a)(xf())}),(function(e){return e.active?"display: none":""})),Wf=k.b.input(hf(),(function(e){return e.active?"display: none":""})),Bf=r.a.memo((function(e){var t=e.layerSelectIdx,n=e.layerData,o=e.shiftDown,f=e.showLayers,c=e.addNewLayerHandle,l=e.removeLayerHandle,i=e.mergeLayerHandle,u=e.moveUpHandle,d=e.moveDownHandle,s=e.selectLayerIdxHandle,m=e.renameLayerHandle,p=e.handleChangeTyping,b=e.handleChangeShowLayers,E=Object(a.useState)(!1),g=Object(A.a)(E,2),O=g[0],v=g[1],h=Object(a.useState)(""),x=Object(A.a)(h,2),C=x[0],j=x[1],y=Object(a.useRef)(null);Object(a.useEffect)((function(){j(n[t].layerName)}),[t,n]);var T=function(){v(!0)};Object(a.useEffect)((function(){O?(y.current.focus(),p(!0)):p(!1)}),[O,p]);return r.a.createElement(Rf,null,r.a.createElement(Nf,null,"Layers",r.a.createElement(Pf,{showLayers:f,onClick:b},r.a.createElement(tt,{placement:"left",tooltip:r.a.createElement(r.a.Fragment,null,"Show all layers")},r.a.createElement(co.d,null)))),r.a.createElement(zf,null,r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Add new layer",r.a.createElement("span",{className:"tooltip-name"},r.a.createElement("span",{className:"tooltip-key"},"SHIFT"),"Copy select layer"))},r.a.createElement(Ff,{onClick:function(){c(o)}},r.a.createElement(co.j,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Move up selected layer",r.a.createElement("span",{className:"tooltip-name"},r.a.createElement("span",{className:"tooltip-key"},"SHIFT"),"Move to Top"))},r.a.createElement(Ff,{onClick:function(){u(o)},disable:t===n.length-1},r.a.createElement(co.b,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Move down selected layer",r.a.createElement("span",{className:"tooltip-name"},r.a.createElement("span",{className:"tooltip-key"},"SHIFT"),"Move to down"))},r.a.createElement(Ff,{onClick:function(){d(o)},disable:0===t},r.a.createElement(co.a,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Edit layer name")},r.a.createElement(Ff,{onClick:function(){v(!0)}},r.a.createElement(co.g,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Merge with below layer")},r.a.createElement(Ff,{onClick:i,disable:0===t},r.a.createElement(co.e,null))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement(r.a.Fragment,null,"Delete selected layer")},r.a.createElement(Ff,{onClick:l,disable:1===n.length},r.a.createElement(co.c,null)))),r.a.createElement(Hf,null,n.map((function(e,n){return n===t?r.a.createElement(Mf,{key:n,selected:!0},r.a.createElement(Wf,{value:C,ref:y,active:!O,onBlur:function(){return v(!1),p(!1),void m(C)},onChange:function(e){return j(e.target.value)},onKeyPress:function(e){return function(e){13!==e.kayCode&&"Enter"!==e.key||(v(!1),p(!1),m(C))}(e)}}),r.a.createElement(Gf,{onClick:T,active:O,selected:!0},e.layerName)):r.a.createElement(Mf,{onClick:function(){return s(n)},key:n},r.a.createElement(Gf,null,e.layerName))}))))})),Vf=function(){var e=Object(Je.c)(),t=Object(Je.d)((function(e){var t=e.dotArt;return{layerList:t.present.dot.dotFrameList[t.present.dot.activeIdx].layerList,layerSelectIdx:t.present.dot.layerSelectIdx,layerData:t.present.dot.layerData}})),n=t.layerList,o=t.layerSelectIdx,f=t.layerData,c=Object(Je.d)((function(e){var t=e.observer;return{shiftDown:t.shiftDown,showLayers:t.showLayers}})),l=c.shiftDown,i=c.showLayers,u=Object(a.useCallback)((function(t){e(He(t))}),[e]),d=Object(a.useCallback)((function(){e(Me())}),[e]),s=Object(a.useCallback)((function(){e(Ge())}),[e]),m=Object(a.useCallback)((function(t){e(We(t))}),[e]),p=Object(a.useCallback)((function(t){e(Be(t))}),[e]),b=Object(a.useCallback)((function(t){e(Ve(t))}),[e]),E=Object(a.useCallback)((function(t){e(Ue(t))}),[e]),g=Object(a.useCallback)((function(t){e(Ea(t))}),[e]),O=Object(a.useCallback)((function(){e(ya())}),[e]);return r.a.createElement(Bf,{layerList:n,layerSelectIdx:o,layerData:f,shiftDown:l,showLayers:i,addNewLayerHandle:u,removeLayerHandle:d,mergeLayerHandle:s,moveUpHandle:m,moveDownHandle:p,selectLayerIdxHandle:b,renameLayerHandle:E,handleChangeTyping:g,handleChangeShowLayers:O})},Uf=n(225),Yf=n.n(Uf);function Kf(){var e=Object(g.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return Kf=function(){return e},e}function Zf(){var e=Object(g.a)(["\n  position: absolute;\n  z-index: 2;\n"]);return Zf=function(){return e},e}function Jf(){var e=Object(g.a)(["\n  background: ",";\n  width: 50px;\n  height: 50px;\n  border: 3px solid #a69e94;\n"]);return Jf=function(){return e},e}function Xf(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  & > span {\n    &:hover {\n      color: #db3e00;\n    }\n  }\n"]);return Xf=function(){return e},e}var Qf=k.b.div(Xf()),$f=k.b.div(Jf(),(function(e){return e.color?e.color:"#ffffff"})),qf=k.b.div(Zf()),ec=k.b.div(Kf()),tc=r.a.memo((function(e){var t=e.leftColor,n=e.rightColor,o=e.colorShortcut,f=e.changeLeftColorHandle,c=e.changeRightColorHandle,l=e.swapLeftRightColorHandle,i=Object(a.useState)(!1),u=Object(A.a)(i,2),d=u[0],s=u[1],m=Object(a.useState)(!1),p=Object(A.a)(m,2),b=p[0],E=p[1],g=Object(a.useState)(""),O=Object(A.a)(g,2),v=O[0],h=O[1],x=Object(a.useState)(""),C=Object(A.a)(x,2),j=C[0],y=C[1],T=Object(a.useState)(["#000000"]),S=Object(A.a)(T,2),L=S[0],I=S[1],D=Object(a.useState)(["#ffffff"]),k=Object(A.a)(D,2),_=k[0],w=k[1];Object(a.useEffect)((function(){h(t),y(n)}),[t,n]);var R=function(e){"LEFT"===e?s(!d):E(!b)},N=function(e){if("LEFT"===e){if(s(!1),0===L.filter((function(e){return e===v})).length){var t=L.concat(v);t.length>8&&t.shift(),I(t)}f(v)}else{if(E(!1),0===_.filter((function(e){return e===j})).length){var n=_.concat(j);n.length>8&&n.shift(),w(n)}c(j)}};return r.a.createElement(Qf,null,r.a.createElement("div",null,r.a.createElement($f,{onClick:function(){return R("LEFT")},color:v}),d&&r.a.createElement(qf,null,r.a.createElement(ec,{onClick:function(){return N("LEFT")}}),r.a.createElement(Cn.SketchPicker,{presetColors:L,disableAlpha:!0,color:v,onChange:function(e){h(e.hex)}}))),r.a.createElement(tt,{placement:"top",tooltip:r.a.createElement("div",null,"Swap left right color",r.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(o.SWAP.key,")")))},r.a.createElement(Yf.a,{onClick:l,fontSize:"large"})),r.a.createElement("div",null,r.a.createElement($f,{onClick:function(){return R("RIGHT")},color:j}),b&&r.a.createElement(qf,null,r.a.createElement(ec,{onClick:function(){return N("RIGHT")}}),r.a.createElement(Cn.SketchPicker,{presetColors:_,disableAlpha:!0,color:j,onChange:function(e){y(e.hex)}}))))})),nc=function(){var e=Object(Je.c)(),t=Object(Je.d)((function(e){var t=e.palettes;return{leftColor:t.leftColor,rightColor:t.rightColor}})),n=t.leftColor,o=t.rightColor,f=Object(Je.d)((function(e){return{colorShortcut:e.keybind.color}})).colorShortcut,c=Object(a.useCallback)((function(t){e(la({color:t}))}),[e]),l=Object(a.useCallback)((function(t){e(ia({color:t}))}),[e]),i=Object(a.useCallback)((function(){e(ua())}),[e]);return r.a.createElement(tc,{leftColor:n,rightColor:o,colorShortcut:f,changeLeftColorHandle:c,changeRightColorHandle:l,swapLeftRightColorHandle:i})},ac=n(226);function rc(){var e=Object(g.a)(["\n  color: #59564f;\n  border-radius: 5px;\n  text-align: center;\n\n  &:hover {\n    color: #0d0d0d;\n  }\n"]);return rc=function(){return e},e}function oc(){var e=Object(g.a)(["\n  position: fixed;\n  bottom: 8px;\n"]);return oc=function(){return e},e}var fc=k.b.div(oc()),cc=k.b.div(rc()),lc=r.a.memo((function(e){var t=e.isTyping,n=e.dotSize,o=e.openKeyBindDialog,f=e.paintTools,c=e.color,l=e.storage,i=e.misc,u=Object(Je.c)();return Object(a.useEffect)((function(){var e={};function a(t){var n=function(n){e[t[n].code]=function(e){e.preventDefault(),o(n)}};for(var a in t)n(a)}a(f),a(c),a(l),a(i);var r=document.getElementById("paintBox"),o=function(e){switch(e){case"UNDO":return u(Jr.ActionCreators.undo()),void u($r());case"REDO":return u(Jr.ActionCreators.redo()),void u($r());case"SWAP":return void u(ua());case"PALETTE_LINE_UP":return void u(da());case"PALETTE_LINE_DOWN":return void u(sa());case"PALETTE_SELECT_1":return void u(ma(0));case"PALETTE_SELECT_2":return void u(ma(1));case"PALETTE_SELECT_3":return void u(ma(2));case"PALETTE_SELECT_4":return void u(ma(3));case"PALETTE_SELECT_5":return void u(ma(4));case"PALETTE_SELECT_6":return void u(ma(5));case"PALETTE_SELECT_7":return void u(ma(6));case se:return void u(ge(se));case me:return void u(ge(me));case pe:return void u(ge(pe));case be:return void u(ge(be));case Ee:return void u(ge(Ee));case"SAMECOLOR":return void u(ge("SAMECOLOR"));case"DITHERING":return void u(ge("DITHERING"));case"INCREASE_COLUMN":return void u(ye());case"DECREASE_COLUMN":return void u(Te());case"INCREASE_ROW":return void u(Se());case"DECREASE_ROW":return void u(Le());case"INCREASE_DOTSIZE":return void u(ha());case"DECREASE_DOTSIZE":return void u(xa());case"MOVE_VIEWPORT_UP":return void r.scrollBy(0,-n);case"MOVE_VIEWPORT_RIGHT":return void r.scrollBy(n,0);case"MOVE_VIEWPORT_DOWN":return void r.scrollBy(0,n);case"MOVE_VIEWPORT_LEFT":return void r.scrollBy(-n,0);case"SAVE_DOTART":return void u(Sa(!0));case"LOAD_DOTART":return void u(Pt("LoadDialog"));default:return console.log("bind error")}},d=Object(ac.a)(window,e);return t&&d(),function(){d()}}),[t,n,f,c,l,i,u]),r.a.createElement(fc,null,r.a.createElement(tt,{tooltip:r.a.createElement(r.a.Fragment,null,"Key bind help")},r.a.createElement(cc,null,r.a.createElement(co.f,{size:"2.5rem",onClick:o}))))})),ic=function(){var e=Object(Je.c)(),t=Object(Je.d)((function(e){var t=e.observer;return{isTyping:t.isTyping,dotSize:t.dotSize}})),n=t.isTyping,o=t.dotSize,f=Object(Je.d)((function(e){var t=e.keybind;return{paintTools:t.paintTools,color:t.color,storage:t.storage,misc:t.misc}})),c=f.paintTools,l=f.color,i=f.storage,u=f.misc,d=Object(a.useCallback)((function(){e(Pt("KeybindDialog"))}),[e]);return r.a.createElement(lc,{isTyping:n,dotSize:o,paintTools:c,color:l,storage:i,misc:u,openKeyBindDialog:d})};function uc(){var e=Object(g.a)(["\n  position: absolute;\n  bottom: 16px;\n"]);return uc=function(){return e},e}var dc=k.b.div(uc()),sc=function(e){var t=e.mousePosition,n=e.dotSize,o=e.paintState,f=e.selectedPaintTool,c=e.rowCount,l=e.columnCount,i=e.onChangePaintStateHandle,u=e.onUpdateDotArtHandle,d=e.onAltDownHandle,s=e.onShiftDownHandle;return Object(a.useEffect)((function(){var e=function(e){u(f),i("IDLE")};return"DRAGGING"===o&&window.addEventListener("mouseup",e,!1),function(){window.removeEventListener("mouseup",e,!1)}}),[o,f,i,u]),Object(a.useEffect)((function(){var e,t,n=function(n){e=n.clientX,t=n.clientY},a=document.getElementById("paintBox"),r=a.parentNode,o=a.childNodes[0],f=function(n){n.preventDefault();var f=parseInt(a.scrollHeight/c);if(!(f>99||f<5)){var i=a.scrollTop,u=a.scrollLeft,d=r.getBoundingClientRect(),s=a.offsetTop===r.offsetTop,m=a.offsetLeft===o.offsetLeft,p=n.deltaY>0?-2:2;if(s){var b=100/(d.height/(t-d.y)),E=a.scrollTop/a.scrollHeight*100;i=(f+p)*c/100*(E+(b-E)/10)}if(m){var g=100/(d.width/(e-d.x)),O=a.scrollLeft/a.scrollWidth*100;u=(f+p)*l/100*(O+(g-O)/10)}a.scrollTo(u,i)}};return r.addEventListener("wheel",f),r.addEventListener("mousemove",n),function(){r.removeEventListener("wheel",f),r.removeEventListener("mousemove",n)}}),[c,l]),Object(a.useEffect)((function(){var e=function(e){"AltLeft"===e.code&&d(!1),"ShiftLeft"===e.code&&s(!1)},t=function(e){"AltLeft"===e.code&&d(!0),"ShiftLeft"===e.code&&s(!0)};return window.addEventListener("keyup",e,!1),window.addEventListener("keydown",t,!1),function(){window.removeEventListener("keyup",e,!1),window.removeEventListener("keydown",t,!1)}}),[d,s]),r.a.createElement(dc,null,r.a.createElement("h5",null,n,"px"),r.a.createElement("h5",null,"[",l," x ",c,"]",""!==t.x&&"".concat(t.x,", ").concat(t.y)))},mc=function(){var e=Object(Je.c)(),t=Object(Je.d)((function(e){var t=e.observer;return{mousePosition:t.mousePosition,dotSize:t.dotSize}})),n=t.mousePosition,o=t.dotSize,f=Object(Je.d)((function(e){var t=e.paintTool;return{paintState:t.paintState,selectedPaintTool:t.selectedPaintTool}})),c=f.paintState,l=f.selectedPaintTool,i=Object(Je.d)((function(e){var t=e.dotArt;return{rowCount:t.present.dot.rowCount,columnCount:t.present.dot.columnCount}})),u=i.rowCount,d=i.columnCount,s=Object(a.useCallback)((function(t){e(Oe(t))}),[e]),m=Object(a.useCallback)((function(t){e(Fe(t))}),[e]),p=Object(a.useCallback)((function(t){e(Ca(t))}),[e]),b=Object(a.useCallback)((function(t){e(ja(t))}),[e]);return r.a.createElement(sc,{mousePosition:n,dotSize:o,paintState:c,selectedPaintTool:l,rowCount:u,columnCount:d,onChangePaintStateHandle:s,onUpdateDotArtHandle:m,onAltDownHandle:p,onShiftDownHandle:b})};function pc(){var e=Object(g.a)(["\n  position: sticky;\n  max-height: 90vh;\n  width: 204px;\n  & > *:not(:first-child) {\n    margin: 4px 0px;\n  }\n"]);return pc=function(){return e},e}function bc(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  left: 0px;\n  width: 250px;\n  min-width: 250px;\n  margin-right: 4px;\n  & > * {\n    margin-bottom: 16px;\n  }\n"]);return bc=function(){return e},e}function Ec(){var e=Object(g.a)(["\n  display: flex;\n"]);return Ec=function(){return e},e}var gc=k.b.div(Ec()),Oc=k.b.div(bc()),vc=k.b.div(pc()),hc=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Na,null),r.a.createElement(gc,null,r.a.createElement(Oc,null,r.a.createElement(_o,null),r.a.createElement(vf,null),r.a.createElement(go,null),r.a.createElement($o,null),r.a.createElement(nc,null)),r.a.createElement(sr,null),r.a.createElement(fo,null),r.a.createElement(vc,null,r.a.createElement(Lr,null),r.a.createElement(mf,null),r.a.createElement(Vf,null),r.a.createElement(mc,null))),r.a.createElement(ic,null))},xc=Object(l.f)((function(e){var t=e.match;return r.a.createElement(c.a,null,r.a.createElement(E,{path:t.path},r.a.createElement(l.c,null,r.a.createElement(l.a,{path:[t.path,"".concat(t.path,"/dot")],component:hc}))))})),Cc=n(228),jc=n(514),Ac=Object(Cc.a)({palette:{primary:{main:"#F2E8DC",light:"#F2F2F2",dark:"#59564F",contrastText:"#0D0D0D"},secondary:{main:"#59564F"}}}),yc=function(){return r.a.createElement(jc.a,{theme:Ac},r.a.createElement(Nt.a,{maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"center"},disableWindowBlurListener:!0},r.a.createElement(xc,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(452);var Tc=Object(Vr.createStore)(oo);f.a.render(r.a.createElement(Je.a,{store:Tc},r.a.createElement(c.a,null,r.a.createElement(yc,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAVElEQVRYR+3UoQ0AQAhD0UOyG5b9x0DebVDEiZqPJSTNS2hU1T1iMlOtz8zI/XYfBEAAAbtAd8se+P3z7T4IgAACdgF7EREAAQTsAvYiIgACCLgFHo3ZzjG+nqs2AAAAAElFTkSuQmCC"},52:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAUklEQVRYR+3UsQkAQAhDUd3J/RfQnbwNYnFFmm8rQnhgsrs3xFSVWsfMyP11nwRAAAG7wO7KHvj98+s+CYAAAnYBexERAAEE7AL2IiIAAgi4BR59ogXwC7msxgAAAABJRU5ErkJggg=="}},[[242,1,2]]]);
//# sourceMappingURL=main.783f615d.chunk.js.map