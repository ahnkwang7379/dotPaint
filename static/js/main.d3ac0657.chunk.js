(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{247:function(e,t,n){e.exports=n(473)},252:function(e,t,n){},291:function(e,t){},293:function(e,t){},303:function(e,t){},473:function(e,t,n){"use strict";n.r(t);var r=n(1),f=n.n(r),a=n(17),o=n.n(a),c=(n(252),n(70)),l=n(27),i=n(11),u=n(7),d=n(14),s=n(9),b=n(529),p=n(527),m=n(530),O=n(475),E=n(524),h=n(36),v=n(531),g=Object(E.a)((function(e){return{root:{display:"flex"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},toolbar:{height:"64px"},drawerPaper:{width:240},content:{width:"100%",height:"100vh",flexGrow:1,padding:e.spacing(1),background:"#F2E8DC"}}})),C=f.a.memo(Object(l.f)((function(e){e.window;var t=e.children,n=(e.path,e.history),a=e.user,o=e.onLogout,c=g(),l=(Object(h.a)(),Object(r.useState)(!1)),i=Object(d.a)(l,2),E=(i[0],i[1],Object(r.useState)(!1)),C=Object(d.a)(E,2),j=C[0];C[1];return f.a.createElement("div",{className:c.root,id:"mainBox"},f.a.createElement(p.a,null),f.a.createElement(b.a,{position:"fixed",className:Object(s.a)(c.appBar,Object(u.a)({},c.appBarShift,j))},f.a.createElement(m.a,null,f.a.createElement(O.a,{variant:"h6",className:c.title,noWrap:!0},"Dot Art"),a?f.a.createElement(f.a.Fragment,null,f.a.createElement(O.a,{variant:"h6"},a.username),f.a.createElement(v.a,{color:"inherit",onClick:o},"Logout")):f.a.createElement(v.a,{color:"inherit",onClick:function(){return n.push("/login")}},"Login"))),f.a.createElement("main",{className:c.content},f.a.createElement("div",{className:c.toolbar}),t))}))),j=n(3),x=n(37),A=n.n(x),I=n(541),y=n(538),w=n(32),S=n(213),L=n.n(S).a.create();L.interceptors.request.use((function(e){try{var t=localStorage.getItem("access_token");t&&(e.headers.common.Authorization="Bearer ".concat(t))}catch(n){console.log("localStorage is not working")}return e})),L.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var T,k,_=L,D=function(){return _.post("/api/auth/logout")},R=Object(I.a)("loading/START_LOADING",(function(e){return e})),N=Object(I.a)("loading/FINISH_LOADING",(function(e){return e})),P=Object(y.a)((T={},Object(u.a)(T,"loading/START_LOADING",(function(e,t){return Object(j.a)({},e,Object(u.a)({},t.payload,!0))})),Object(u.a)(T,"loading/FINISH_LOADING",(function(e,t){return Object(j.a)({},e,Object(u.a)({},t.payload,!1))})),T),{}),z=function(e){return[e,"".concat(e,"_SUCCESS"),"".concat(e,"_FAILURE")]};function F(e,t){var n="".concat(e,"_SUCCESS"),r="".concat(e,"_FAILURE");return A.a.mark((function f(a){var o;return A.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Object(w.c)(R(e));case 2:return f.prev=2,f.next=5,Object(w.b)(t,a.payload);case 5:return o=f.sent,f.next=8,Object(w.c)({type:n,payload:o.data});case 8:f.next=14;break;case 10:return f.prev=10,f.t0=f.catch(2),f.next=14,Object(w.c)({type:r,payload:f.t0,error:!0});case 14:return f.next=16,Object(w.c)(N(e));case 16:case"end":return f.stop()}}),f,null,[[2,10]])}))}var H=A.a.mark(Q),M=A.a.mark(q),G=z("user/CHECK"),B=Object(d.a)(G,3),W=B[0],V=B[1],U=B[2],Y=Object(I.a)("user/TEMP_SET_USER",(function(e){return e})),K=Object(I.a)(W),Z=Object(I.a)("user/LOGOUT"),J=F(W,(function(){return _.get("/api/auth/check")}));function X(){try{localStorage.removeItem("dotArt_user")}catch(e){console.log("localStorage is not working!")}}function Q(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(w.b)(D);case 3:localStorage.removeItem("dotArt_user"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),H,null,[[0,6]])}function q(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.d)(W,J);case 2:return e.next=4,Object(w.d)(U,X);case 4:return e.next=6,Object(w.d)("user/LOGOUT",Q);case 6:case"end":return e.stop()}}),M)}var $=Object(y.a)((k={},Object(u.a)(k,"user/TEMP_SET_USER",(function(e,t){var n=t.payload;return Object(j.a)({},e,{user:n})})),Object(u.a)(k,V,(function(e,t){var n=t.payload;return Object(j.a)({},e,{user:n,checkError:null})})),Object(u.a)(k,U,(function(e,t){var n=t.payload;return Object(j.a)({},e,{user:null,checkError:n})})),Object(u.a)(k,"user/LOGOUT",(function(e){return Object(j.a)({},e,{user:null})})),k),{user:null,checkError:null}),ee=f.a.memo((function(e){var t=e.children,n=e.path,a=Object(i.c)(),o=Object(i.d)((function(e){return{user:e.user.user}})).user,c=Object(r.useCallback)((function(){a(Z())}),[a]);return f.a.createElement(C,{window:document.window,path:n,user:o,onLogout:c},t)})),te=n(4),ne=n(12),re=n(533),fe=n(534),ae=n(221),oe=n.n(ae),ce=n(535),le=n(214);function ie(e,t,n,r){return be(e,{pSize:n,c:t,duration:r,cssClassName:"dotArt-to-css"})}var ue=function(e,t){e=e.flat();var n=function(e){return e%t.c*t.pSize+t.pSize},r=function(e){return parseInt(e/t.c,10)*t.pSize+t.pSize};switch(t.format){case"array":return e.reduce((function(e,t,f){return""!==t&&e.push({x:n(f),y:r(f),color:t}),e}),[]);default:return e.reduce((function(e,t,f){return""!==t?"".concat(e," ").concat(n(f),"px ").concat(r(f),"px ").concat(t,","):e}),"").slice(1,-1)}},de=function(e,t){var n=Object(le.generateAnimationIntervals)(e);return e.reduce((function(e,r,f){var a=e;try{var o=r.layer||r.get("layer")||0;if(o){var c=ue(o,{pSize:t.pSize,c:t.c});""===c&&(c="0px 0px #00000000");var l=0===f?0:n[f]+.01,i=n[f+1];a["".concat(l,"%, ").concat(i,"%")]={boxShadow:"".concat(c,";height: ").concat(t.pSize,"px; width: ").concat(t.pSize,"px")}}}catch(u){console.error("Input data error: Each frame object must contain a grid value")}return a}),{})},se=function(e,t){var n=ue(e,t);return".".concat(t.cssClassName," {\n  box-shadow: ").concat(n,";\n  height: ").concat(t.pSize,"px;\n  width: ").concat(t.pSize,"px;\n}")},be=function(e,t){var n=de(e,t),r="";for(var f in r+=".".concat(t.cssClassName," {\n  position: absolute;\n  "),r+="animation: x ".concat(t.duration,"s infinite;\n  "),r+="-webkit-animation: x ".concat(t.duration,"s infinite;\n  "),r+="-moz-animation: x ".concat(t.duration,"s infinite;\n  "),r+="-o-animation: x ".concat(t.duration,"s infinite;\n}\n\n"),r+="@keyframes x {\n",n)if(Object.prototype.hasOwnProperty.call(n,f)){var a=n[f].boxShadow;r+="".concat(f,"{\n  box-shadow: ").concat(a,"\n  }\n")}return r+="}"},pe=n(5),me=n(30),Oe=n.n(me);function Ee(){var e=Object(te.a)(["",""]);return Ee=function(){return e},e}var he=function(e){var t=e.boxShadow,n=e.duration,r="anim-".concat(Oe.a.generate()),a="".concat(r),o=Object(pe.c)(Ee(),t).rules,c={position:"absolute",animation:"x ".concat(n,"s infinite"),animationName:a},l="@keyframes ".concat(a," {").concat(o,"}");return f.a.createElement("div",null,f.a.createElement("div",{className:"animation-container",style:c}),f.a.createElement("style",null,l))},ve=f.a.memo((function(e){var t=e.dotSet,n=e.dotList,r=e.column,a=e.size,o=e.animation,c=e.duration,l=e.zIndex,i=e.opacity,u="string"===typeof a?parseFloat(a):a,d={position:"relative",top:"-".concat(u,"px"),left:"-".concat(u,"px")};return f.a.createElement("div",{className:"preview",style:d},function(){var e,a,d=r,s=i||1;if(o)return a=function(e,t,n){return de(e,{pSize:n,c:t})}(n,d,u),f.a.createElement(he,{boxShadow:a,duration:c});e=function(e,t,n,r){return ue(e,{format:r,pSize:n,c:t})}(t,d,u,"string");var b={previewWrapper:{position:"absolute",height:u,width:u,boxShadow:e,MozBoxShadow:e,WebkitBoxShadow:e,border:"0px",zIndex:l||"",opacity:s}};return f.a.createElement("div",{style:b.previewWrapper})}())})),ge=n(123);function Ce(){var e=Object(te.a)(["\n      color: #0d0d0d;\n      background: ",";\n      box-shadow: 0 0.1rem #666;\n      transform: translateY(4px);\n    "]);return Ce=function(){return e},e}function je(){var e=Object(te.a)(["\n      &:hover {\n        color: #0d0d0d;\n        background: ",";\n      }\n      &:active {\n        color: #0d0d0d;\n        background: ",";\n        box-shadow: 0 0.1rem #666;\n        transform: translateY(4px);\n      }\n    "]);return je=function(){return e},e}function xe(){var e=Object(te.a)(["\n      background: ",";\n      color: #fff;\n    "]);return xe=function(){return e},e}function Ae(){var e=Object(te.a)(["\n  background-color: #f2f2f2;\n  font-size: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #59564f;\n  ","\n  width: ",";\n  height: ",";\n  border: 2px solid #59564f;\n  outline: none;\n  border-radius: 0.5rem;\n  text-align: center;\n  box-shadow: 0 0.3rem #999;\n  transition: all 0.05s ease-in-out;\n  ","\n\n  &:disabled {\n    background: #afafaf;\n    color: #777777;\n  }\n\n  ","\n"]);return Ae=function(){return e},e}var Ie=pe.b.button(Ae(),(function(e){return e.baseColor&&Object(pe.a)(xe(),e.baseColor)}),(function(e){return e.width?"".concat(e.width,"px"):"100%"}),(function(e){return e.height?"".concat(e.height,"px"):"auto"}),(function(e){return!e.disable&&Object(pe.a)(je(),(function(e){return e.color?"".concat(e.color):"#F2E8DC"}),(function(e){return e.color?"".concat(e.color):"#F2E8DC"}))}),(function(e){return!0===e.selected&&Object(pe.a)(Ce(),(function(e){return e.selectColor?"".concat(e.selectColor):"#F2E8DC"}))})),ye=f.a.memo((function(e){var t=e.children,n=Object(ge.a)(e,["children"]);return f.a.createElement(Ie,n,t)})),we=n(58),Se=n(537);function Le(e,t){return new Array(e).fill().map((function(){return new Array(t).fill("")}))}function Te(e,t,n,r){for(var f=Le(n=n||e.length,r=r||e[0].length),a=0;a<n;a++)for(var o=0;o<r;o++)""!==e[a][o]?f[a][o]=e[a][o]:f[a][o]=t[a][o];return f}function ke(e,t,n,r){n=n||e[0].length,r=r||e[0][0].length;for(var f=t.map((function(e){return e.dotFrameIdx})),a=Le(n,r),o=0;o<n;o++)for(var c=0;c<r;c++)for(var l=f.length-1;l>=0;l--){var i=e[f[l]][o][c];if(""!==i){a[o][c]=i;break}}return a}function _e(e,t){return e.map((function(e){return Object(j.a)({},e,{layer:ke(e.layerList,t)})}))}function De(){var e=Object(te.a)([""]);return De=function(){return e},e}function Re(){var e=Object(te.a)(["\n  overflow: auto;\n  max-width: 100%;\n  max-height: 100%;\n  border: 1px solid #9e9e9e;\n"]);return Re=function(){return e},e}function Ne(){var e=Object(te.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  margin-bottom: 8px;\n  & > * {\n    margin: 8px;\n    max-width: 160px;\n  }\n"]);return Ne=function(){return e},e}function Pe(){var e=Object(te.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n"]);return Pe=function(){return e},e}var ze,Fe,He=pe.b.div(Pe()),Me=pe.b.div(Ne()),Ge=pe.b.div(Re()),Be=pe.b.div.attrs((function(e){var t=e.pixelSize,n=e.columnCount,r=e.rowCount;return{style:{width:"".concat(n*t,"px"),height:"".concat(r*t,"px")}}}))(De()),We=function(e){var t=e.dotFrameList,n=e.activeIdx,a=e.rowCount,o=e.columnCount,c=e.animationDuration,l=e.pixelSize,i=e.layerData,u=e.handleChangeAnimationDuration,s=e.handleChangePixelSize,b=Object(r.useState)(!0),p=Object(d.a)(b,2),m=p[0],O=p[1];return f.a.createElement(He,null,f.a.createElement(Me,null,f.a.createElement(Se.a,{size:"small",variant:"outlined",type:"number",label:"Animation Duration",value:c,onChange:function(e){return function(e){O(!1),e.target.value<=0||""===e.target.value?u(0):u(e.target.value)}(e)}}),f.a.createElement(Se.a,{size:"small",variant:"outlined",type:"number",label:"PixelSize",value:l,onChange:function(e){return function(e){s(e.target.value)}(e)}}),f.a.createElement(ye,{onClick:function(){O(!m)},selected:m,selectColor:"#f05556",color:m?"#b71b2d":"#008000",width:"40",height:"40",baseColor:"#3db12a"},m?f.a.createElement(we.d,null):f.a.createElement(we.e,null))),f.a.createElement(Ge,null,f.a.createElement(Be,{pixelSize:l,columnCount:o,rowCount:a},!m&&f.a.createElement(ve,{dotSet:ke(t[n].layerList,i),column:o,size:l}),m&&f.a.createElement(ve,{dotList:_e(t,i),column:o,size:l,animation:m,duration:c}))))},Ve=n(26),Ue="DOT",Ye=Object(I.a)("paintTool/CHANGE_PAINT_TOOL",(function(e){return e})),Ke=Object(I.a)("paintTool/CHANGE_PAINT_STATE",(function(e){return e})),Ze=Object(I.a)("paintTool/SET_DIRECTION",(function(e){return e})),Je={selectedPaintTool:Ue,paintState:"IDLE",direction:"LEFT"},Xe=Object(y.a)((ze={},Object(u.a)(ze,"paintTool/CHANGE_PAINT_TOOL",(function(e,t){var n=t.payload;return Object(j.a)({},e,{selectedPaintTool:n})})),Object(u.a)(ze,"paintTool/CHANGE_PAINT_STATE",(function(e,t){var n=t.payload;return Object(j.a)({},e,{paintState:n})})),Object(u.a)(ze,"paintTool/SET_DIRECTION",(function(e,t){var n=t.payload;return Object(j.a)({},e,{direction:n})})),ze),Je),Qe=Object(I.a)("dot/CLEAR_DOT"),qe=Object(I.a)("dot/NEW_DOT_ART_PROJECT"),$e=Object(I.a)("dot/LOAD_DOT_ART",(function(e){return e})),et=Object(I.a)("dot/INCREASE_COLUMN"),tt=Object(I.a)("dot/DECREASE_COLUMN"),nt=Object(I.a)("dot/INCREASE_ROW"),rt=Object(I.a)("dot/DECREASE_ROW"),ft=Object(I.a)("dot/CHANGE_DOT_AREA",(function(e){return{newRow:e.newRow,newColumn:e.newColumn}})),at=Object(I.a)("dot/CHANGE_ACTIVE_IDX",(function(e){return e})),ot=Object(I.a)("dot/REMOVE_ACTIVE_DOT_ART"),ct=Object(I.a)("dot/COPY_ACTIVE_DOT_ART"),lt=Object(I.a)("dot/ADD_NEW_DOT_ART"),it=Object(I.a)("dot/CHANGE_ANIMATION_INTERVAL",(function(e,t){return{interval:e,activeIdx:t}})),ut=Object(I.a)("dot/CHANGE_ANIMATION_DURATION",(function(e){return e})),dt=Object(I.a)("dot/CHANGE_PIXEL_SIZE",(function(e){return e})),st=Object(I.a)("dot/REORDER_DOT_LIST",(function(e){return{startIdx:e.startIdx,endIdx:e.endIdx}})),bt=Object(I.a)("dot/UPDATE_DOT_ART",(function(e){return e})),pt=Object(I.a)("dot/ADD_NEW_LAYER",(function(e){return e})),mt=Object(I.a)("dot/REMOVE_LAYER"),Ot=Object(I.a)("dot/MERGE_LAYER"),Et=Object(I.a)("dot/MOVE_UP_LAYER",(function(e){return e})),ht=Object(I.a)("dot/MOVE_DOWN_LAYER",(function(e){return e})),vt=Object(I.a)("dot/SELECT_LAYER_IDX",(function(e){return e})),gt=Object(I.a)("dot/RENAME_LAYER",(function(e){return e}));function Ct(e){var t=100/e.length;return e.map((function(n,r){return Object(j.a)({},n,{interval:r===e.length?100:Math.round((r+1)*t*100)/100})}))}var jt={fakeDotArt:Le(16,16),dotFrameList:[{id:Oe.a.generate(),layerList:[Le(16,16)],interval:100}],columnCount:16,rowCount:16,animationDuration:2,activeIdx:0,layerSelectIdx:0,layerData:[{layerName:"Layer 1",dotFrameIdx:0}],pixelSize:32},xt=Object(y.a)((Fe={},Object(u.a)(Fe,"dot/CLEAR_DOT",(function(e){return Object(Ve.a)(e,(function(t){var n=t.layerData[t.layerSelectIdx].dotFrameIdx;t.dotFrameList[e.activeIdx].layerList[n]=Le(t.rowCount,t.columnCount)}))})),Object(u.a)(Fe,"dot/NEW_DOT_ART_PROJECT",(function(){return Object(j.a)({},jt)})),Object(u.a)(Fe,"dot/LOAD_DOT_ART",(function(e,t){var n=t.payload;return Object(j.a)({},e,{activeIdx:0,fakeDotArt:Le(n.rowCount,n.columnCount),layerSelectIdx:0},n)})),Object(u.a)(Fe,"dot/INCREASE_COLUMN",(function(e){return Object(Ve.a)(e,(function(e){e.columnCount=e.columnCount+1;for(var t=0;t<e.dotFrameList.length;t++)e.dotFrameList[t].layerList.map((function(e){return e.map((function(e){return e.push("")}))}))}))})),Object(u.a)(Fe,"dot/DECREASE_COLUMN",(function(e){return Object(Ve.a)(e,(function(e){if(e.columnCount>1){e.columnCount=e.columnCount-1;for(var t=0;t<e.dotFrameList.length;t++)e.dotFrameList[t].layerList.map((function(e){return e.map((function(e){return e.pop()}))}))}}))})),Object(u.a)(Fe,"dot/INCREASE_ROW",(function(e){return Object(Ve.a)(e,(function(e){e.rowCount=e.rowCount+1;for(var t=0;t<e.dotFrameList.length;t++)e.dotFrameList[t].layerList.map((function(t){return t.push(new Array(e.columnCount).fill(""))}));e.fakeDotArt=Le(e.rowCount,e.columnCount)}))})),Object(u.a)(Fe,"dot/DECREASE_ROW",(function(e){return Object(Ve.a)(e,(function(e){if(e.rowCount>1){e.rowCount=e.rowCount-1;for(var t=0;t<e.dotFrameList.length;t++)e.dotFrameList[t].layerList.map((function(e){return e.pop()}));e.fakeDotArt=Le(e.rowCount,e.columnCount)}}))})),Object(u.a)(Fe,"dot/CHANGE_DOT_AREA",(function(e,t){var n=t.payload,r=n.newRow,f=n.newColumn;return Object(Ve.a)(e,(function(e){if(!(r<1||f<1)){for(var t=e.rowCount,n=e.columnCount,a=0;a<e.dotFrameList.length;a++){if(f>n)for(var o=n;o<f;o++)e.dotFrameList[a].layerList.map((function(e){return e.map((function(e){return e.push("")}))}));if(f<n)for(var c=f;c<n;c++)e.dotFrameList[a].layerList.map((function(e){return e.map((function(e){return e.pop()}))}));if(r>t)for(var l=t;l<r;l++)e.dotFrameList[a].layerList.map((function(e){return e.push(new Array(f).fill(""))}));if(r<t)for(var i=r;i<t;i++)e.dotFrameList[a].layerList.map((function(e){return e.pop()}))}e.rowCount=r,e.columnCount=f,e.fakeDotArt=Le(e.rowCount,e.columnCount)}}))})),Object(u.a)(Fe,"dot/CHANGE_ACTIVE_IDX",(function(e,t){var n=t.payload;return Object(j.a)({},e,{activeIdx:n})})),Object(u.a)(Fe,"dot/REMOVE_ACTIVE_DOT_ART",(function(e){if(1===e.dotFrameList.length)return Object(j.a)({},e);var t=e.dotFrameList,n=e.activeIdx,r=Ct([].concat(t.slice(0,n)).concat(t.slice(n+1)));return Object(j.a)({},e,{dotFrameList:r,activeIdx:n>r.length-1?n-1:n})})),Object(u.a)(Fe,"dot/COPY_ACTIVE_DOT_ART",(function(e){var t=e.dotFrameList,n=e.activeIdx,r=Ct([].concat(t.slice(0,n+1)).concat(Object(j.a)({},t[n],{id:Oe.a.generate()})).concat(t.slice(n+1)));return Object(j.a)({},e,{dotFrameList:r,activeIdx:n+1})})),Object(u.a)(Fe,"dot/ADD_NEW_DOT_ART",(function(e){var t=Le(e.rowCount,e.columnCount),n={id:Oe.a.generate(),layerList:new Array(e.layerData.length).fill(t),interval:0},r=Ct([].concat(e.dotFrameList.slice()).concat(n));return Object(j.a)({},e,{dotFrameList:r,activeIdx:r.length-1})})),Object(u.a)(Fe,"dot/CHANGE_ANIMATION_INTERVAL",(function(e,t){var n=t.payload,r=n.interval,f=n.activeIdx;return Object(Ve.a)(e,(function(e){var t=e.dotFrameList;t[f+1].interval<r?t[f].interval=t[f+1].interval:t[f].interval=0===f?r<=0?.1:r:t[f-1].interval>r?t[f-1].interval:r}))})),Object(u.a)(Fe,"dot/CHANGE_ANIMATION_DURATION",(function(e,t){var n=t.payload;return Object(j.a)({},e,{animationDuration:n})})),Object(u.a)(Fe,"dot/CHANGE_PIXEL_SIZE",(function(e,t){var n=t.payload;return Object(j.a)({},e,{pixelSize:n})})),Object(u.a)(Fe,"dot/REORDER_DOT_LIST",(function(e,t){var n=t.payload,r=n.startIdx,f=n.endIdx;return Object(Ve.a)(e,(function(e){var t=e.dotFrameList.reduce((function(e,t){return e.concat(t.interval)}),[]),n=e.dotFrameList.splice(r,1),a=Object(d.a)(n,1)[0];e.dotFrameList.splice(f,0,a),t.map((function(t,n){return e.dotFrameList[n].interval=t}));var o=e.activeIdx;o===r?e.activeIdx=f:o>r?o<=f&&(e.activeIdx-=1):o>=f&&(e.activeIdx+=1)}))})),Object(u.a)(Fe,"dot/UPDATE_DOT_ART",(function(e,t){var n,r=t.payload;if("PICKER"===r)return Object(j.a)({},e);if(r===Ue){var f=e.layerData[e.layerSelectIdx].dotFrameIdx;n=Te(e.fakeDotArt,e.dotFrameList[e.activeIdx].layerList[f],e.rowCount,e.columnCount)}return"ERASER"===r&&(n=e.fakeDotArt),"BUCKET"===r&&(n=e.fakeDotArt),"MOVE"===r&&(n=e.fakeDotArt),"SAMECOLOR"===r&&(n=e.fakeDotArt),Object(Ve.a)(e,(function(e){e.dotFrameList[e.activeIdx].layerList[e.layerData[e.layerSelectIdx].dotFrameIdx]=n}))})),Object(u.a)(Fe,"dot/ADD_NEW_LAYER",(function(e,t){var n,r,f=t.payload,a=e.layerSelectIdx,o=e.layerData,c=o.length,l=o[a].dotFrameIdx,i=[];if(f){for(var u=0;u<e.dotFrameList.length;u++)i=i.concat([e.dotFrameList[u].layerList[l].slice()]);n={layerName:"".concat(o[a].layerName," (copy)"),dotFrameIdx:c},r=e.dotFrameList.map((function(e,t){return Object(j.a)({},e,{layerList:[].concat(e.layerList.slice()).concat([i[t]])})}))}else i=[Le(e.rowCount,e.columnCount)],n={layerName:"Layer ".concat(c+1),dotFrameIdx:c},r=e.dotFrameList.map((function(e){return Object(j.a)({},e,{layerList:[].concat(e.layerList.slice()).concat(i)})}));var d=[].concat(o.slice(0,a+1)).concat(n).concat(o.slice(a+1));return Object(j.a)({},e,{dotFrameList:r,layerSelectIdx:a+1,layerData:d})})),Object(u.a)(Fe,"dot/REMOVE_LAYER",(function(e){if(1===e.layerData.length)return Object(j.a)({},e);var t=e.layerSelectIdx,n=e.layerData,r=n.length,f=n[t].dotFrameIdx,a=e.dotFrameList.map((function(e){return Object(j.a)({},e,{layerList:[].concat(e.layerList.slice(0,f)).concat(e.layerList.slice(f+1))})})),o=[].concat(n.slice(0,t)).concat(n.slice(t+1));return o=o.map((function(e){return e.dotFrameIdx>f?Object(j.a)({},e,{dotFrameIdx:e.dotFrameIdx-1}):Object(j.a)({},e)})),Object(j.a)({},e,{dotFrameList:a,layerData:o,layerSelectIdx:e.layerSelectIdx===r-1?e.layerSelectIdx-1:e.layerSelectIdx})})),Object(u.a)(Fe,"dot/MERGE_LAYER",(function(e){var t=e.layerSelectIdx,n=e.layerData,r=e.dotFrameList;if(1===n.length)return Object(j.a)({},e);if(0===t)return Object(j.a)({},e);for(var f=n[t].dotFrameIdx,a=n[t-1].dotFrameIdx,o=[],c=function(t){var n=r[t].layerList[f].slice(),c=r[t].layerList[a].slice(),l=r[t].layerList.reduce((function(t,r,o){return o===f?t.concat([Te(n,c,e.rowCount,e.columnCount)]):o===a?t:t.concat([r])}),[]),i={id:r[t].id,layerList:l,interval:r[t].interval};o.push(i)},l=0;l<r.length;l++)c(l);var i=[].concat(n.slice(0,t-1)).concat(n.slice(t)),u=n[t-1].dotFrameIdx;return i=i.map((function(e){return e.dotFrameIdx>u?Object(j.a)({},e,{dotFrameIdx:e.dotFrameIdx-1}):Object(j.a)({},e)})),Object(j.a)({},e,{dotFrameList:o,layerSelectIdx:e.layerSelectIdx-1,layerData:i})})),Object(u.a)(Fe,"dot/MOVE_UP_LAYER",(function(e,t){var n,r,f=t.payload,a=e.layerData.length,o=e.layerSelectIdx,c=e.layerData;return o===a-1?Object(j.a)({},e):(f?(n=[].concat(c.slice(0,0===o?0:o)).concat(c.slice(o+1)).concat(c.slice(o,o+1)),r=a-1):(n=[].concat(c.slice(0,0===o?0:o)).concat(c.slice(o+1,o+2)).concat(c.slice(o,o+1)).concat(c.slice(o+2)),r=o+1),Object(j.a)({},e,{layerSelectIdx:r,layerData:n}))})),Object(u.a)(Fe,"dot/MOVE_DOWN_LAYER",(function(e,t){var n,r,f=t.payload,a=e.layerSelectIdx,o=e.layerData;return 0===a?Object(j.a)({},e):(f?(n=[].concat(o.slice(a,a+1)).concat(o.slice(0,a)).concat(o.slice(a+1)),r=0):(n=[].concat(o.slice(0,a-1)).concat(o.slice(a,a+1)).concat(o.slice(a-1,a)).concat(o.slice(a+1)),r=a-1),Object(j.a)({},e,{layerSelectIdx:r,layerData:n}))})),Object(u.a)(Fe,"dot/SELECT_LAYER_IDX",(function(e,t){var n=t.payload;return Object(j.a)({},e,{layerSelectIdx:n})})),Object(u.a)(Fe,"dot/RENAME_LAYER",(function(e,t){var n=t.payload;return Object(j.a)({},e,{layerData:e.layerData.map((function(t,r){return r===e.layerSelectIdx?Object(j.a)({},t,{layerName:n}):Object(j.a)({},t)}))})})),Fe),jt),At=function(e){var t=e.dot,n=Object(i.c)(),a=Object(r.useCallback)((function(e){n(ut(e))}),[n]),o=Object(r.useCallback)((function(e){n(dt(parseInt(e)))}),[n]);return f.a.createElement(We,{dotFrameList:t.dotFrameList,activeIdx:t.activeIdx,rowCount:t.rowCount,columnCount:t.columnCount,animationDuration:t.animationDuration,pixelSize:t.pixelSize,layerData:t.layerData,handleChangeAnimationDuration:a,handleChangePixelSize:o})},It=n(57),yt=n.n(It);function wt(){var e=Object(te.a)(["\n  background: #9e9e9e;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 1.5rem;\n  height: 1.5rem;\n  font-size: 1rem;\n  color: #f0f0f0;\n  &:hover {\n    background: #6e6e6e;\n    color: #fff;\n  }\n"]);return wt=function(){return e},e}function St(){var e=Object(te.a)(["\n  height: fit-content;\n  background: rgb(255, 255, 255);\n  opacity: 1;\n  border: solid 1px black;\n  box-sizing: border-box;\n  display: flex;\n  cursor: pointer;\n"]);return St=function(){return e},e}function Lt(){var e=Object(te.a)(["\n  width: ","px;\n  height: ","px;\n"]);return Lt=function(){return e},e}function Tt(){var e=Object(te.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  & > * {\n    margin: 8px;\n  }\n  overflow: auto;\n"]);return Tt=function(){return e},e}function kt(){var e=Object(te.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  margin-bottom: 8px;\n  & > * {\n    margin: 8px;\n    max-width: 160px;\n  }\n"]);return kt=function(){return e},e}function _t(){var e=Object(te.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n"]);return _t=function(){return e},e}var Dt=pe.b.div(_t()),Rt=pe.b.div(kt()),Nt=pe.b.div(Tt()),Pt=pe.b.div(Lt(),(function(e){return e.columnCount*e.size}),(function(e){return e.rowCount*e.size})),zt=pe.b.div(St()),Ft=pe.b.div(wt()),Ht=function(e){var t=e.loadedData,n=e.removeDotArtHandle,r=e.loadDotArtHandle,a=e.clearStorageHandler;return f.a.createElement(Dt,null,f.a.createElement(Rt,null,f.a.createElement(ye,{width:"100",height:"50",onClick:a},"Clear storage!")),f.a.createElement(Nt,null,t&&0!==t.dotArt.length?t.dotArt.map((function(e,t){return f.a.createElement(zt,{key:e.dot.id,onClick:function(){return r(e)}},f.a.createElement(Pt,{size:"4",columnCount:e.dot.columnCount,rowCount:e.dot.rowCount,key:e.dot.id},f.a.createElement(ve,{dotList:_e(e.dot.dotFrameList,e.dot.layerData),column:e.dot.columnCount,size:"4",duration:e.dot.animationDuration,key:e.dot.id,animation:!0})),f.a.createElement(Ft,{onClick:function(e){return function(e,t){t.stopPropagation(),n(e)}(t,e)}},f.a.createElement(yt.a,null)))})):f.a.createElement("h1",null,"No Save Data")))},Mt={id:"example-cat",dotFrameList:[{id:Oe.a.generate(),layerList:[[["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#ffffff","#ffffff","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#000000","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#ffffff","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46"],["#607d8b","#607d8b","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#607d8b"]]],interval:25},{id:Oe.a.generate(),layerList:[[["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#ffffff","#ffffff","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#ffffff","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46"],["#607d8b","#607d8b","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#607d8b"]]],interval:50},{id:Oe.a.generate(),layerList:[[["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#ffffff","#ffffff","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#ffffff","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46"],["#607d8b","#607d8b","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#607d8b"]]],interval:75},{id:Oe.a.generate(),layerList:[[["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#ffffff","#ffffff","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#ffffff","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46"],["#607d8b","#607d8b","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#607d8b"]]],interval:100}],layerData:[{layerName:"Layer 1",dotFrameIdx:0}],columnCount:16,rowCount:16,animationDuration:2},Gt=[{id:Oe.a.generate(),colors:["#393b2d","#75651a","#775b1c","#788260","#bab887","#dfd6c5"]},{id:Oe.a.generate(),colors:["#4b73a4","#667883","#937e6a","#b89d80","#dadbd6","#faf9fb"]},{id:Oe.a.generate(),colors:["#03070a","#374552","#3c8999","#959ea7","#9ccce3","#b8cde0"]},{id:Oe.a.generate(),colors:["#171516","#303030","#553634","#92898c","#a70d01","#c4c2c3"]},{id:Oe.a.generate(),colors:["#1d0e0b","#393e54","#5e260d"]}];function Bt(e){try{var t=e.getItem("dotArt_storage");return!!t&&JSON.parse(t)}catch(n){return!1}}function Wt(e,t){try{var n=function(e){try{var t=e.getItem("dotArt_palettes_storage");return!!t&&JSON.parse(t)}catch(n){return!1}}(e);return n?n.push(t):n=[t],e.setItem("dotArt_palettes_storage",JSON.stringify(n)),!0}catch(r){return!1}}function Vt(e,t){var n=Bt(e);if(n){var r=0;return n.dotArt.splice(t,1),0===n.dotArt.length?r=-1:n.current>t&&(r=n.current-1),n.current=r,function(e,t){try{return e.setItem("dotArt_storage",JSON.stringify(t)),!0}catch(n){return!1}}(e,n)}return!1}function Ut(e){try{var t=e.getItem("dotArt_private_setting");return!!t&&JSON.parse(t)}catch(n){return!1}}var Yt,Kt=n(63),Zt=Object(I.a)("dialog/CHANGE_TYPE_AND_OPEN",(function(e){return e})),Jt=Object(I.a)("dialog/CLOSE_DIALOG"),Xt=Object(y.a)((Yt={},Object(u.a)(Yt,"dialog/CHANGE_TYPE_AND_OPEN",(function(e,t){var n=t.payload;return Object(j.a)({},e,{dialogType:n,open:!0})})),Object(u.a)(Yt,"dialog/CLOSE_DIALOG",(function(e){return Object(j.a)({},e,{open:!1})})),Yt),{dialogType:"",open:!1}),Qt=function(){var e=Object(i.c)(),t=Object(Kt.b)().enqueueSnackbar,n=Object(r.useState)(Bt(localStorage)),a=Object(d.a)(n,2),o=a[0],c=a[1],l=Object(r.useCallback)((function(n){e($e(n.dot)),e(Jt()),t("Load DotArt From LocalStorage",{variant:"success"})}),[e,t]);return f.a.createElement(Ht,{loadedData:o,removeDotArtHandle:function(e){Vt(localStorage,e),c(Bt(localStorage))},loadDotArtHandle:l,clearStorageHandler:function(){localStorage.removeItem("dotArt_storage"),c(Bt(localStorage)),t("Clear DotArt From LocalStorage",{variant:"success"})}})};function qt(){var e=Object(te.a)(["\n  margin-top: 0.5em;\n  width: 100%;\n  padding: 1em 0.5em 0;\n  text-align: left;\n  display: block;\n  resize: none;\n  height: 20em;\n  background-color: #f2e8dc;\n  font-weight: bold;\n  font-size: 15px;\n  color: #0d0d0d;\n"]);return qt=function(){return e},e}function $t(){var e=Object(te.a)(["\n  width: 100%;\n"]);return $t=function(){return e},e}function en(){var e=Object(te.a)([""]);return en=function(){return e},e}function tn(){var e=Object(te.a)(["\n  overflow: auto;\n  max-width: 100%;\n  max-height: 100%;\n  border: 1px solid #9e9e9e;\n  margin-bottom: 16px;\n"]);return tn=function(){return e},e}function nn(){var e=Object(te.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  margin-bottom: 8px;\n  & > * {\n    margin: 8px;\n    height: 40px;\n    width: 80px;\n  }\n"]);return nn=function(){return e},e}function rn(){var e=Object(te.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n"]);return rn=function(){return e},e}var fn=pe.b.div(rn()),an=pe.b.div(nn()),on=pe.b.div(tn()),cn=pe.b.div.attrs((function(e){var t=e.pixelSize,n=e.columnCount,r=e.rowCount;return{style:{width:"".concat(n*t,"px"),height:"".concat(r*t,"px")}}}))(en()),ln=pe.b.div($t()),un=pe.b.textarea(qt()),dn=function(e){var t=e.dot,n=e.dialogType,a=e.saveFileHandler,o=e.handleChangeAnimationDuration,c=e.handleChangePixelSize,l=Object(Kt.b)().enqueueSnackbar,i=Object(r.useState)(""),u=Object(d.a)(i,2),s=u[0],b=u[1],p=Object(r.useState)("single"),m=Object(d.a)(p,2),O=m[0],E=m[1],h=Object(r.useRef)(null),v=t.dotFrameList,g=t.layerData,C=t.columnCount,j=t.rowCount,x=t.activeIdx,A=t.pixelSize,I=t.animationDuration;Object(r.useEffect)((function(){b(n)}),[n]);var y,w,S;return f.a.createElement(fn,null,f.a.createElement(an,null,f.a.createElement(Se.a,{size:"small",variant:"outlined",type:"number",label:"Animation",value:I,onChange:function(e){return function(e){e.target.value<=0||""===e.target.value?o(0):o(e.target.value)}(e)}}),f.a.createElement(Se.a,{size:"small",variant:"outlined",type:"number",label:"PixelSize",value:A,onChange:function(e){return function(e){c(e.target.value)}(e)}}),f.a.createElement(ye,{selected:"single"===O,onClick:function(){return E("single")}},"single"),f.a.createElement(ye,{selected:"gif"===O,onClick:function(){return E("gif")}},"gif"),"DownLoad"===s&&f.a.createElement(ye,{selected:"spritesheet"===O,onClick:function(){return E("spritesheet")}},"sprite")),f.a.createElement(on,null,f.a.createElement(cn,{pixelSize:A,columnCount:C,rowCount:j},f.a.createElement(ve,{dotSet:ke(v[x].layerList,g),dotList:_e(v,g),column:C,size:A,animation:"gif"===O,duration:I}))),"DownLoad"===s&&f.a.createElement(ye,{baseColor:"#0f0f0f",width:"160",onClick:function(){return a(O)}},"download!"),"Css"===s&&f.a.createElement(ln,null,f.a.createElement(ye,{width:"240",height:"40",onClick:function(e){h.current.select(),document.execCommand("copy"),e.target.focus(),l("Copy Success!",{variant:"success"})}},"Copy To ClipBoard"),f.a.createElement(un,{ref:h,value:"single"===O?(y=ke(v[x].layerList,g),w=C,S=A,se(y,{format:"string",pSize:S,c:w,cssClassName:"dotArt-to-css"})):ie(_e(v,g),C,A,I),readOnly:!0})))},sn=n(218),bn=n.n(sn),pn=n(219),mn=n.n(pn),On=n(220);function En(e,t){var n=t.dotArt,r=t.cols,f=t.pixelSize,a=t.dotArtHeight,o=t.dotArtIdx,c=e;return n.layer.flat().forEach((function(e,t){if(e){c.fillStyle=e;var n=t%r,l=Math.floor(t/r);c.fillRect(n*f,l*f+a*o,f,f)}})),c}function hn(e,t,n,r){var f=t.canvas,a=t.canvasHeight,o=t.canvasWidth,c=n.dotArt,l=n.dotArtHeight,i=n.dotArtWidth,u=n.pixelSize,d=Math.floor(i/u),s=f.getContext("2d");switch(s.canvas.width=o,s.canvas.height=a,e){case"spritesheet":r.forEach((function(e,t){s=En(s,{dotArt:e,cols:d,pixelSize:u,dotArtHeight:l,dotArtIdx:t})}));break;default:s=En(s,{dotArt:c,cols:d,pixelSize:u,dotArtHeight:l,dotArtIdx:0})}return s.getImageData(0,0,o,a).data}var vn=function(e,t){Object(On.saveAs)(e,"".concat(Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8),".").concat(t))},gn=function(e,t){var n=t.dotFrameList,r=t.layerData,f=t.columnCount,a=t.rowCount,o=t.animationDuration,c=t.activeIdx,l=t.pixelSize,i=_e(n,r),u=1e3*o,d=f*l,s=a*l,b=d,p="spritesheet"===e?s*i.length:s,m=document.createElement("canvas"),O=new bn.a(b,p);switch(O.pipe(mn()()).on("finish",(function(){vn(this.toBlob(),"gif")})),O.setRepeat(0),O.setDispose(3),O.writeHeader(),e){case"single":case"spritesheet":hn(e,{canvas:m,canvasHeight:p,canvasWidth:b},{dotArt:i[c],dotArtHeight:s,dotArtWidth:d,pixelSize:l},i),m.toBlob((function(e){vn(e,"png")}));break;default:var E=0;i.forEach((function(t,n,r){var f=n===r.length-1?100:i[n].interval,a=.01*(f-E)*u;O.setDelay(a),E=f,O.addFrame(hn(e,{canvas:m,canvasHeight:p,canvasWidth:b},{dotArt:t,dotArtHeight:s,dotArtWidth:d,pixelSize:l}))})),O.finish()}},Cn=function(e){var t=e.dot,n=e.dialogType,a=Object(i.c)(),o=Object(r.useCallback)((function(e){a(ut(e))}),[a]),c=Object(r.useCallback)((function(e){a(dt(parseInt(e)))}),[a]);return f.a.createElement(dn,{dot:t,dialogType:n,saveFileHandler:function(e){gn(e,t)},handleChangeAnimationDuration:o,handleChangePixelSize:c})};function jn(){var e=Object(te.a)(["\n  color: black;\n  font-size: 16px;\n  margin-left: 8px;\n  line-height: 30px;\n"]);return jn=function(){return e},e}function xn(){var e=Object(te.a)(["\n  width: fit-content;\n  padding: 0px 8px;\n  font-size: 1.5rem;\n  color: #87ceeb;\n  border: 3px solid #87ceeb;\n  border-radius: 4px;\n  font-weight: bold;\n  font-family: monospace;\n  text-align: center;\n  line-height: 24px;\n"]);return xn=function(){return e},e}function An(){var e=Object(te.a)(["\n  width: 100%;\n  margin: 4px 0px;\n  display: flex;\n"]);return An=function(){return e},e}function In(){var e=Object(te.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow: auto;\n"]);return In=function(){return e},e}var yn=pe.b.div(In()),wn=pe.b.div(An()),Sn=pe.b.div(xn()),Ln=pe.b.span(jn()),Tn=function(e){var t=e.keySet;return f.a.createElement(yn,null,t.map((function(e){return f.a.createElement(wn,{key:e.action},f.a.createElement(Sn,{key:e.action},e.key),f.a.createElement(Ln,null,e.helpText))})))},kn=function(){var e=Object(i.d)((function(e){return{keySet:e.keybind.keySet}})).keySet;return f.a.createElement(Tn,{keySet:e})},_n=n(540),Dn=Object(E.a)((function(e){return{closeButton:{marginRight:e.spacing(1)}}})),Rn=Object(ne.a)((function(e){return{paperScrollPaper:{height:"calc(100% - 64px)",backgroundColor:"#F2E8DC"}}}))(_n.a),Nn=Object(ne.a)((function(e){return{root:{overflow:"hidden",height:"100%"}}}))(re.a),Pn=function(e){var t=e.dialogType,n=e.open,r=e.handleCloseDialog,a=Dn(),o=Object(i.d)((function(e){return{dot:e.dotArt.present.dot}})).dot,c=function(){r()};return f.a.createElement(f.a.Fragment,null,f.a.createElement(Rn,{open:n,fullWidth:!0,maxWidth:"xl",onClose:c},f.a.createElement(fe.a,null,f.a.createElement(ce.a,{color:"inherit",onClick:c,size:"small",className:a.closeButton},f.a.createElement(oe.a,null)),t),f.a.createElement(Nn,{dividers:!0},n&&function(){switch(t){case"Preview":return f.a.createElement(At,{dot:o});case"DownLoad":return f.a.createElement(Cn,{dot:o,dialogType:t});case"Load":return f.a.createElement(Qt,null);case"Css":return f.a.createElement(Cn,{dot:o,dialogType:t});case"Palettes":return f.a.createElement("div",null,"a");case"KeyBind":return f.a.createElement(kn,null);default:return null}}())))},zn=f.a.memo((function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.dialog;return{dialogType:t.dialogType,open:t.open}})),n=t.dialogType,a=t.open,o=Object(r.useCallback)((function(){e(Jt())}),[e]);return a&&f.a.createElement(Pn,{dialogType:n,open:a,handleCloseDialog:o})})),Fn=n(154),Hn=n.n(Fn),Mn=n(28),Gn=n(61),Bn=n.n(Gn),Wn=n(62),Vn=n.n(Wn);function Un(){var e=Object(te.a)(["\n      border-top: solid 3px #b22222;\n    "]);return Un=function(){return e},e}function Yn(){var e=Object(te.a)(["\n  padding: 0px;\n  margin: 0px;\n  border: none;\n  outline: none;\n  border-top: solid 3px black;\n  ","\n  width: 96px;\n  height: 19px;\n  font-size: 16px;\n  font-weight: bold;\n  background: rgba(0, 0, 0, 1);\n  text-align: center;\n  color: white;\n  &:focus {\n    background: rgba(230, 230, 230, 1);\n    color: rgba(0, 0, 0, 0.7);\n  }\n  -moz-appearance: textfield;\n  &::-webkit-outer-spin-button,\n  &::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"]);return Yn=function(){return e},e}function Kn(){var e=Object(te.a)(["\n      &:hover {\n        background: #6e6e6e;\n        color: #fff;\n      }\n    "]);return Kn=function(){return e},e}function Zn(){var e=Object(te.a)(["\n  background: #9e9e9e;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 24px;\n  height: 24px;\n  font-size: 1rem;\n  color: #f0f0f0;\n  ","\n"]);return Zn=function(){return e},e}function Jn(){var e=Object(te.a)(["\n          height: 96px;\n          width: ",";\n        "]);return Jn=function(){return e},e}function Xn(){var e=Object(te.a)(["\n          width: 96px;\n          height: ",";\n        "]);return Xn=function(){return e},e}function Qn(){var e=Object(te.a)(["\n  background-image: ",";\n  ","\n"]);return Qn=function(){return e},e}function qn(){var e=Object(te.a)(["\n  width: 96px;\n  height: 96px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return qn=function(){return e},e}function $n(){var e=Object(te.a)(["\n      opacity: 1;\n      border: solid 3px #b22222;\n    "]);return $n=function(){return e},e}function er(){var e=Object(te.a)(["\n  position: relative;\n  outline: none;\n  opacity: 0.8;\n  border-radius: 0.3rem;\n  border: solid 3px black;\n  box-sizing: border-box;\n  cursor: pointer;\n  ","\n  &:hover {\n    & > :nth-child(2) {\n      display: block;\n    }\n  }\n"]);return er=function(){return e},e}function tr(){var e=Object(te.a)(["\n  background: orange;\n  color: black;\n  text-align: center;\n  width: 24px;\n  height: 24px;\n  line-height: 24px;\n  position: absolute;\n  z-index: 10;\n  font-weight: 900;\n  font-size: 12px;\n"]);return tr=function(){return e},e}function nr(){var e=Object(te.a)(["\n  z-index: 1;\n  display: none;\n  left: 72px;\n  position: absolute;\n  width: 24px;\n  margin: 0px;\n  padding: 0px;\n  & > * + * {\n    margin-top: 48px;\n  }\n"]);return nr=function(){return e},e}var rr=pe.b.div(nr()),fr=pe.b.div(tr()),ar=pe.b.div(er(),(function(e){return e.active&&Object(pe.a)($n())})),or=pe.b.div(qn()),cr=pe.b.div(Qn(),(function(e){return 1===e.backgroundImg?"url(".concat(Bn.a,")"):"url(".concat(Vn.a,")")}),(function(e){return e.columnCount>e.rowCount?Object(pe.a)(Xn(),(function(e){return"".concat(e.rowCount*e.pixelSize,"px")})):Object(pe.a)(Jn(),(function(e){return"".concat(e.columnCount*e.pixelSize,"px")}))})),lr=pe.b.div(Zn(),(function(e){return!e.disabled&&Object(pe.a)(Kn())})),ir=pe.b.input(Yn(),(function(e){return e.active&&Object(pe.a)(Un())})),ur=f.a.memo((function(e){var t=e.active,n=e.idx,a=e.dot,o=e.interval,c=e.columnCount,l=e.rowCount,i=e.backgroundImg,u=e.handleChangeIdx,s=e.handleCopyDotArt,b=e.handleRemoveDotArt,p=e.handleChangeInterval,m=e.lastIndex,O=Object(r.useState)(o),E=Object(d.a)(O,2),h=E[0],v=E[1],g=Object(r.useState)(),C=Object(d.a)(g,2),j=C[0],x=C[1];Object(r.useEffect)((function(){v(o)}),[o]),Object(r.useEffect)((function(){var e=Math.floor(c>l?96/c:96/l);e!==j&&(x(e),0===e&&x(1))}),[l,c,j]);var A=function(e){v(e.target.value)},I=Object(r.useCallback)((function(e){0!==e.target.value.length?(v(o),p(Math.round(100*e.target.value)/100,n)):v(o)}),[p,n,o]);return!0===t?f.a.createElement(Mn.b,{key:n,draggableId:"dotArt-".concat(n),index:n},(function(e){return f.a.createElement(ar,Object.assign({active:!0,ref:e.innerRef},e.draggableProps,e.dragHandleProps),f.a.createElement(fr,null,n+1),f.a.createElement(rr,null,f.a.createElement(lr,{onClick:b},f.a.createElement(yt.a,{fontSize:"inherit"})),f.a.createElement(lr,{onClick:s},f.a.createElement(Hn.a,{fontSize:"inherit"}))),f.a.createElement(or,null,f.a.createElement(cr,{columnCount:c,rowCount:l,backgroundImg:i,pixelSize:j},f.a.createElement(ve,{dotSet:a,column:c,size:j}))),f.a.createElement(ir,{active:!0,value:h,type:"number",onChange:A,onBlur:function(e){return I(e)},disabled:m,step:"0.1"}))})):f.a.createElement(Mn.b,{key:n,draggableId:"dotArt-".concat(n),index:n},(function(e){return f.a.createElement(ar,Object.assign({id:"Card",active:!1,onClick:function(){return u(n)},ref:e.innerRef},e.draggableProps,e.dragHandleProps),f.a.createElement(fr,null,n+1),f.a.createElement(rr,null,f.a.createElement(lr,{disabled:!0},f.a.createElement(yt.a,{fontSize:"inherit"})),f.a.createElement(lr,{disabled:!0},f.a.createElement(Hn.a,{fontSize:"inherit"}))),f.a.createElement(or,null,f.a.createElement(cr,{columnCount:c,rowCount:l,backgroundImg:i,pixelSize:j},f.a.createElement(ve,{dotSet:a,column:c,size:j}))),f.a.createElement(ir,{value:o,disabled:!0}))}))})),dr=n(222),sr=n.n(dr);function br(){var e=Object(te.a)(["\n  font-size: 16px;\n"]);return br=function(){return e},e}function pr(){var e=Object(te.a)(["\n  background: #a69e94;\n  border-radius: 0.2rem;\n  width: auto;\n  height: 100%;\n  margin: 0px 8px;\n  flex-wrap: nowrap;\n  overflow: auto;\n  position: sticky;\n  & > *:not(:last-child) {\n    width: 102px;\n    min-width: 102px;\n    height: 121px;\n  }\n  & > * {\n    margin: 8px;\n  }\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: #888;\n  }\n  &::-webkit-scrollbar-thumb:hover {\n    background: #555;\n  }\n"]);return pr=function(){return e},e}function mr(){var e=Object(te.a)(["\n  max-height: 92vh;\n  width: fit-content;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return mr=function(){return e},e}var Or,Er=pe.b.div(mr()),hr=pe.b.div(pr()),vr=pe.b.span(br()),gr=f.a.memo((function(e){var t=e.dotFrameList,n=e.activeIdx,r=e.layerIdx,a=e.columnCount,o=e.rowCount,c=e.backgroundImg,l=e.handleChangeIdx,i=e.handleRemoveDotArt,u=e.handleCopyDotArt,d=e.handleAddDotArt,s=e.handleChangeInterval,b=e.handleReorderDotList;return f.a.createElement(Er,null,f.a.createElement(Mn.a,{onDragEnd:function(e){e.destination&&"dotList"===e.type&&b(e.source.index,e.destination.index)}},f.a.createElement(Mn.c,{droppableId:"dotList",type:"dotList"},(function(e){return f.a.createElement(hr,Object.assign({ref:e.innerRef},e.droppableProps),t&&t.map((function(e,d){return f.a.createElement(ur,{active:n===d,idx:d,key:e.id,dot:e.layerList[r],interval:e.interval,columnCount:a,rowCount:o,backgroundImg:c,handleCopyDotArt:u,handleRemoveDotArt:i,handleChangeInterval:s,handleChangeIdx:l,lastIndex:t.length-1===d})})),e.placeholder,f.a.createElement(ye,{width:"96",height:"30",onClick:function(){return d()}},f.a.createElement(sr.a,null),f.a.createElement(vr,null,"Add")))}))))})),Cr=f.a.memo((function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.dotArt.present.dot;return{dotList:t.dotList,dotFrameList:t.dotFrameList,activeIdx:t.activeIdx,layerIdx:t.layerData[t.layerSelectIdx].dotFrameIdx,columnCount:t.columnCount,rowCount:t.rowCount}})),n=t.dotFrameList,a=t.activeIdx,o=t.layerIdx,c=t.columnCount,l=t.rowCount,u=Object(i.d)((function(e){return{backgroundImg:e.observer.backgroundImg}})).backgroundImg,d=Object(r.useCallback)((function(t){e(at(t))}),[e]),s=Object(r.useCallback)((function(){e(ot())}),[e]),b=Object(r.useCallback)((function(){e(ct())}),[e]),p=Object(r.useCallback)((function(){e(lt())}),[e]),m=Object(r.useCallback)((function(t,n){e(it(t,n))}),[e]),O=Object(r.useCallback)((function(t,n){e(st({startIdx:t,endIdx:n}))}),[e]);return f.a.createElement(gr,{dotFrameList:n,activeIdx:a,layerIdx:o,columnCount:c,rowCount:l,backgroundImg:u,handleChangeIdx:d,handleRemoveDotArt:s,handleCopyDotArt:b,handleAddDotArt:p,handleChangeInterval:m,handleReorderDotList:O})})),jr=Object(I.a)("observer/CHANGE_TYPING_STATE",(function(e){return e})),xr=Object(I.a)("observer/MOUSE_LEAVES_PAINT_AREA"),Ar=Object(I.a)("observer/CHANGE_DOT_BORDER_SIZE",(function(e){return e})),Ir=Object(I.a)("observer/CHANGE_DOT_BORDER_COLOR",(function(e){return e})),yr=Object(I.a)("observer/INCREASE_DOT_SIZE"),wr=Object(I.a)("observer/DECREASE_DOT_SIZE"),Sr=(Object(I.a)("observer/CHANGE_DOT_SIZE",(function(e){return e})),Object(I.a)("observer/ALT_DOWN",(function(e){return e}))),Lr=Object(I.a)("observer/SHIFT_DOWN",(function(e){return e})),Tr=Object(I.a)("observer/LOAD_DATA",(function(e){return e})),kr=Object(I.a)("observer/CHANGE_SHOW_LAYERS"),_r=Object(I.a)("observer/CHANGE_BACKGROUND_IMG",(function(e){return e})),Dr=Object(I.a)("observer/SAVE_START",(function(e){return e})),Rr=Object(y.a)((Or={},Object(u.a)(Or,"observer/CHANGE_TYPING_STATE",(function(e,t){var n=t.payload;return Object(j.a)({},e,{isTyping:n})})),Object(u.a)(Or,"observer/MOUSE_LEAVES_PAINT_AREA",(function(e){return Object(j.a)({},e,{mousePosition:{x:"",y:""}})})),Object(u.a)(Or,"observer/CHANGE_DOT_BORDER_SIZE",(function(e,t){var n=t.payload;return Object(j.a)({},e,{dotBorder:Object(j.a)({},e.dotBorder,{size:n})})})),Object(u.a)(Or,"observer/CHANGE_DOT_BORDER_COLOR",(function(e,t){var n=t.payload;return Object(j.a)({},e,{dotBorder:Object(j.a)({},e.dotBorder,{color:n})})})),Object(u.a)(Or,"observer/INCREASE_DOT_SIZE",(function(e){return Object(j.a)({},e,{dotSize:e.dotSize<100?e.dotSize+4:e.dotSize})})),Object(u.a)(Or,"observer/DECREASE_DOT_SIZE",(function(e){return Object(j.a)({},e,{dotSize:e.dotSize>4?e.dotSize-4:e.dotSize})})),Object(u.a)(Or,"observer/CHANGE_DOT_SIZE",(function(e,t){var n=t.payload;return Object(j.a)({},e,{dotSize:n})})),Object(u.a)(Or,"observer/ALT_DOWN",(function(e,t){var n=t.payload;return Object(j.a)({},e,{altDown:n})})),Object(u.a)(Or,"observer/SHIFT_DOWN",(function(e,t){var n=t.payload;return Object(j.a)({},e,{shiftDown:n})})),Object(u.a)(Or,"observer/LOAD_DATA",(function(e,t){var n=t.payload;return Object(j.a)({},e,{},n)})),Object(u.a)(Or,"observer/CHANGE_SHOW_LAYERS",(function(e){return Object(j.a)({},e,{showLayers:!e.showLayers})})),Object(u.a)(Or,"observer/CHANGE_BACKGROUND_IMG",(function(e,t){var n=t.payload;return Object(j.a)({},e,{backgroundImg:n})})),Object(u.a)(Or,"observer/SAVE_START",(function(e,t){var n=t.payload;return Object(j.a)({},e,{saveState:n})})),Or),{isTyping:!1,mousePosition:{x:"",y:""},startPosition:{x:"",y:""},dotSize:32,dotBorder:{size:1,color:"#000000"},showLayers:!0,backgroundImg:1,saveState:!1,altDown:!1,shiftDown:!1}),Nr=n(542);function Pr(){var e=Object(te.a)(["\n  font-size: 12px;\n  line-height: 26px;\n  margin-right: 8px;\n  white-space: nowrap;\n"]);return Pr=function(){return e},e}function zr(){var e=Object(te.a)(["\n  width: 100%;\n  height: 40px;\n  display: flex;\n  background: #f2e8dc;\n  padding: 8px;\n  font-size: 8px;\n"]);return zr=function(){return e},e}function Fr(){var e=Object(te.a)(["\n      color: #fff;\n      background: ",";\n      box-shadow: 0 0.05rem #666;\n      transform: translateY(4px);\n    "]);return Fr=function(){return e},e}function Hr(){var e=Object(te.a)(["\n  width: 32px;\n  height: 22px;\n  padding: 0;\n  box-shadow: 0 0.2rem #666;\n  font-size: 14px;\n  border-radius: 0.3rem;\n  ","\n"]);return Hr=function(){return e},e}function Mr(){var e=Object(te.a)(["\n  z-index: 10;\n  position: absolute;\n  display: flex;\n  width: 80px;\n  height: 30px;\n  top: 0.5rem;\n  right: 0.5rem;\n  opacity: ",";\n  transition: opacity 0.3s;\n  & > * {\n    margin: 0px 2px;\n  }\n"]);return Mr=function(){return e},e}function Gr(){var e=Object(te.a)(["\n  background-color: #a69e94;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 200px;\n  height: 200px;\n  overflow: hidden;\n"]);return Gr=function(){return e},e}function Br(){var e=Object(te.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n"]);return Br=function(){return e},e}var Wr=pe.b.div(Br()),Vr=pe.b.div(Gr()),Ur=pe.b.div(Mr(),(function(e){return e.hovered?1:0})),Yr=Object(pe.b)(ye)(Hr(),(function(e){return!0===e.selected&&Object(pe.a)(Fr(),(function(e){return e.selectColor?"".concat(e.selectColor):"skyblue"}))})),Kr=pe.b.div(zr()),Zr=pe.b.div(Pr()),Jr=f.a.memo((function(e){var t=e.animationDuration,n=e.dotFrameList,a=e.layerList,o=e.rowCount,c=e.columnCount,l=e.layerData,i=e.backgroundImg,u=e.handleOpenDialog,s=e.handleChangeAnimationDuration,b=Object(r.useState)(!0),p=Object(d.a)(b,2),m=p[0],O=p[1],E=Object(r.useState)(!0),h=Object(d.a)(E,2),v=h[0],g=h[1],C=Object(r.useState)(1),j=Object(d.a)(C,2),x=j[0],A=j[1],I=Object(r.useState)(!1),y=Object(d.a)(I,2),w=y[0],S=y[1],L=Object(r.useState)(_e(n,l)),T=Object(d.a)(L,2),k=T[0],_=T[1];Object(r.useEffect)((function(){_(_e(n,l))}),[m,n,l]),Object(r.useEffect)((function(){var e=document.getElementById("previewBlock"),t=o<c?200/c:200/o;A(v?t:t/2),e.style.backgroundImage="url(".concat(i?Bn.a:Vn.a,")"),e.style.position="absolute",e.style.width="".concat(Math.min(t*c,200),"px"),e.style.height="".concat(Math.min(t*o,200),"px")}),[o,c,i,v]),Object(r.useEffect)((function(){var e=document.getElementById("paintBox"),t=e.parentNode,n=e.childNodes[0],r=document.getElementById("previewBlock"),f=document.createElement("div");f.style.position="absolute",f.style.zIndex=1,f.style.border="3px solid red",f.style.display="none",f.style.cursor="pointer",f.attributes.draggable=!1,r.appendChild(f);var a=function(a){var o=e.offsetTop===t.offsetTop,c=e.offsetLeft===n.offsetLeft;if(o||c){if(f.style.display="block",o)f.style.top="".concat(e.scrollTop/e.scrollHeight*r.clientHeight,"px"),f.style.height="".concat(e.clientHeight/e.scrollHeight*r.clientHeight,"px");else{var l=Math.min(t.clientHeight/e.clientHeight*r.clientHeight,200);f.style.height="".concat(l,"px"),f.style.top="-".concat((l-r.clientHeight)/2,"px")}if(c)f.style.left="".concat(e.scrollLeft/e.scrollWidth*r.clientWidth,"px"),f.style.width="".concat(e.clientWidth/e.scrollWidth*r.clientWidth,"px");else{var i=Math.min(e.clientWidth/n.clientWidth*r.clientWidth,200);f.style.width="".concat(i,"px"),f.style.left="-".concat((i-r.clientWidth)/2,"px")}}else f.style.display="none"},o=!1;return new MutationObserver((function(e){e.forEach((function(e){a()}))})).observe(r,{attributes:!0}),e.addEventListener("scroll",a,{passive:!0}),f.addEventListener("mousedown",(function(e){o=!0}),{passive:!0}),document.body.addEventListener("mouseup",(function(e){o=!1}),{passive:!0}),document.body.addEventListener("mousemove",(function(t){if(o){var n=document.getElementById("previewWrapper").getBoundingClientRect(),r=t.clientX-n.x,f=t.clientY-n.y,a=e.scrollWidth/200*r-e.clientWidth/2,c=e.scrollHeight/200*f-e.clientHeight/2;e.scrollTo(a,c)}}),{passive:!0}),function(){e.removeEventListener("scroll",a,{passive:!0})}}),[]);var D=function(e){S(e)};return f.a.createElement(Wr,{onMouseOver:function(){return D(!0)},onMouseOut:function(){return D(!1)}},f.a.createElement(Ur,{hovered:w},f.a.createElement(Yr,{onClick:function(){O(!m)},selected:m,selectColor:"#f05556",color:m?"#b71b2d":"#008000",baseColor:"#3db12a"},m?f.a.createElement(we.d,null):f.a.createElement(we.e,null)),f.a.createElement(Yr,{onClick:function(){g(!v)}},v?f.a.createElement(we.c,null):f.a.createElement(we.b,null)),f.a.createElement(Yr,{onClick:function(){return u("Preview")}},f.a.createElement(we.a,null))),f.a.createElement(Vr,{backgroundImg:i,id:"previewWrapper"},f.a.createElement("div",{id:"previewBlock"},!m&&f.a.createElement(ve,{dotSet:ke(a,l),column:c,size:x}),m&&f.a.createElement(ve,{dotList:k,column:c,size:x,animation:m,duration:t}))),f.a.createElement(Kr,null,f.a.createElement(Zr,null,"Duration ",t,"S"),f.a.createElement(Nr.a,{defaultValue:2,"aria-labelledby":"vertical-slider",valueLabelDisplay:"auto",step:1,color:"secondary",min:1,max:10,onChange:function(e,t){s(t)}})))})),Xr=f.a.memo((function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.dotArt.present.dot;return{dotFrameList:t.dotFrameList,layerList:t.dotFrameList[t.activeIdx].layerList,rowCount:t.rowCount,columnCount:t.columnCount,animationDuration:t.animationDuration,layerData:t.layerData}})),n=t.dotFrameList,a=t.layerList,o=t.rowCount,c=t.columnCount,l=t.animationDuration,u=t.layerData,d=Object(i.d)((function(e){return{backgroundImg:e.observer.backgroundImg}})).backgroundImg,s=Object(r.useCallback)((function(t){e(Zt(t))}),[e]),b=Object(r.useCallback)((function(t){e(ut(t))}),[e]),p=Object(r.useCallback)((function(t){e(jr(t))}),[e]);return f.a.createElement(Jr,{animationDuration:l,dotFrameList:n,layerList:a,rowCount:o,columnCount:c,layerData:u,backgroundImg:d,handleOpenDialog:s,handleChangeAnimationDuration:b,handleChangeTyping:p})})),Qr=function(e){var t=e.rowIdx,n=e.columnIdx,r=e.onMouseOverHandler;return f.a.createElement("div",{onMouseOver:function(e){return r(e,t,n)},onMouseDown:function(e){return r(e,t,n)}})},qr=f.a.memo((function(e){var t=e.dotLineIdx,n=e.onMouseOverHandler,a=Object(i.d)((function(e){return{columnCount:e.dotArt.present.dot.columnCount}}),i.b).columnCount,o=Object(r.useCallback)((function(){for(var e=[],r=0;r<a;r++)e.push(f.a.createElement(Qr,{key:r,rowIdx:t,columnIdx:r,onMouseOverHandler:n}));return e}),[a,t,n]);return f.a.createElement("div",null,o())}));function $r(){var e=Object(te.a)([""]);return $r=function(){return e},e}function ef(){var e=Object(te.a)([""]);return ef=function(){return e},e}var tf=pe.b.div(ef()),nf=pe.b.div($r()),rf=f.a.memo((function(e){var t=e.layerList,n=e.fakeDotArt,r=e.columnCount,a=e.dotSize,o=e.layerIdx,c=e.selectedPaintTool,l=e.showLayers;return f.a.createElement(tf,null,t.map((function(e,t){return t===o?f.a.createElement(nf,{key:"selectLayer",id:"selectLayer"},c===Ue&&f.a.createElement(f.a.Fragment,null,f.a.createElement(ve,{key:t,dotSet:e,column:r,size:a,zIndex:2,opacity:1}),f.a.createElement(ve,{dotSet:n,column:r,size:a,zIndex:100})),c!==Ue&&f.a.createElement(f.a.Fragment,null,f.a.createElement(ve,{dotSet:n,column:r,size:a,zIndex:2}))):l?f.a.createElement(ve,{key:t,dotSet:e,column:r,size:a,zIndex:1,opacity:.5}):void 0})))})),ff=function(){var e=Object(i.d)((function(e){var t=e.dotArt.present.dot;return{layerList:t.dotFrameList[t.activeIdx].layerList,layerIdx:t.layerData[t.layerSelectIdx].dotFrameIdx,fakeDotArt:t.fakeDotArt,columnCount:t.columnCount}})),t=e.layerList,n=e.layerIdx,r=e.fakeDotArt,a=e.columnCount,o=Object(i.d)((function(e){var t=e.observer;return{dotSize:t.dotSize,showLayers:t.showLayers}})),c=o.dotSize,l=o.showLayers,u=Object(i.d)((function(e){return{selectedPaintTool:e.paintTool.selectedPaintTool}})).selectedPaintTool;return f.a.createElement(rf,{layerList:t,fakeDotArt:r,columnCount:a,dotSize:c,layerIdx:n,selectedPaintTool:u,showLayers:l})};function af(){var e=Object(te.a)(["\n          border: ","px solid ",";\n          width: ","px;\n          height: ","px;\n          min-width: ","px;\n          min-height: ","px;\n        "]);return af=function(){return e},e}function of(){var e=Object(te.a)(["\n      border: ","px solid ",";\n    "]);return of=function(){return e},e}function cf(){var e=Object(te.a)(["\n  background-image: ",";\n  display: inline-flex;\n  justify-content: flex-start;\n  flex-direction: column;\n  width: auto;\n  height: fit-content;\n  margin: 0 auto;\n  padding: 0;\n  box-sizing: border-box;\n  ",";\n  & > :nth-child(n + 2) {\n    display: flex;\n    & > * {\n      z-index: 99;\n      cursor: cell;\n      box-sizing: border-box;\n      :hover {\n        background: rgba(255, 255, 255, 0.2);\n      }\n      ",";\n    }\n  }\n"]);return cf=function(){return e},e}function lf(){var e=Object(te.a)(["\n  display: flex;\n  box-sizing: border-box;\n  touch-action: none;\n  overflow: auto;\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: #888;\n  }\n  &::-webkit-scrollbar-thumb:hover {\n    background: #555;\n  }\n"]);return lf=function(){return e},e}function uf(){var e=Object(te.a)(["\n  width: 100%;\n  height: 92vh;\n  max-height: 92vh;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  overflow: hidden;\n  background: #a69e94;\n  margin-right: 8px;\n"]);return uf=function(){return e},e}var df,sf=pe.b.div(uf()),bf=pe.b.div(lf()),pf=pe.b.div(cf(),(function(e){return 1===e.backgroundImg?"url(".concat(Bn.a,")"):"url(".concat(Vn.a,")")}),(function(e){return Object(pe.a)(of(),e.borderSize,e.borderColor)}),(function(e){return Object(pe.a)(af(),e.borderSize,e.borderColor,e.dotSize,e.dotSize,e.dotSize,e.dotSize)})),mf=f.a.memo((function(e){var t=e.border,n=e.dotSize,a=e.rowCount,o=(e.columnCount,e.backgroundImg),c=e.onWheelHandle,l=e.onChangePaintStateHandle,i=e.onDotActionHandle,u=e.onSetDirectionHandle,d=e.onLeavesPaintAreaHandle,s=Object(r.useCallback)((function(e){e.preventDefault(),1!==e.button&&(u(0===e.button?"LEFT":"RIGHT"),l("DRAGGING"))}),[l,u]),b=Object(r.useCallback)((function(e,t,n){e.preventDefault(),i(t,n)}),[i]),p=Object(r.useCallback)((function(){for(var e=[],t=0;t<a;t++)e.push(f.a.createElement(qr,{key:t,dotLineIdx:t,onMouseDownHandler:s,onMouseOverHandler:b}));return e}),[a,s,b]);return f.a.createElement(sf,{onWheel:function(e){return c(e)},onContextMenu:function(e){return e.preventDefault()}},f.a.createElement(bf,{id:"paintBox"},f.a.createElement(pf,{dotSize:n,borderColor:t.color,borderSize:n>16?t.size:n>4?1:0,backgroundImg:o,onMouseLeave:d,onMouseDownCapture:s,onContextMenu:function(e){return e.preventDefault()}},f.a.createElement(ff,null),p())))})),Of=n(29),Ef=A.a.mark(Tf),hf=z("auth/SIGNUP"),vf=Object(d.a)(hf,3),gf=vf[0],Cf=vf[1],jf=vf[2],xf=z("auth/LOGIN"),Af=Object(d.a)(xf,3),If=Af[0],yf=Af[1],wf=Af[2],Sf=(Object(I.a)("auth/CHANGE_FILED",(function(e){return{form:e.form,key:e.key,value:e.value}})),Object(I.a)("auth/INITIALIZE_FORM",(function(e){return e})),Object(I.a)("auth/RESET_ERROR"),Object(I.a)(gf,(function(e){return{username:e.username,password:e.password}})),Object(I.a)(If,(function(e){return{username:e.username,password:e.password}})),F(gf,(function(e){var t=e.username,n=e.password;return _.post("/api/auth/signup",{username:t,password:n})}))),Lf=F(If,(function(e){var t=e.username,n=e.password;return _.post("/api/auth/login",{username:t,password:n})}));function Tf(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.d)(gf,Sf);case 2:return e.next=4,Object(w.d)(If,Lf);case 4:case"end":return e.stop()}}),Ef)}var kf,_f,Df={signup:{username:"",password:"",passwordConfirm:""},login:{username:"",password:""}},Rf=Object(y.a)((df={},Object(u.a)(df,"auth/CHANGE_FILED",(function(e,t){var n=t.payload,r=n.form,f=n.key,a=n.value;return Object(Ve.a)(e,(function(e){e[r][f]=a}))})),Object(u.a)(df,"auth/INITIALIZE_FORM",(function(e,t){var n=t.payload;return Object(j.a)({},e,Object(u.a)({authError:null},n,Df[n]))})),Object(u.a)(df,"auth/RESET_ERROR",(function(e){return Object(j.a)({},e,{authError:null})})),Object(u.a)(df,Cf,(function(e,t){var n=t.payload;return Object(j.a)({},e,{authError:null,auth:n})})),Object(u.a)(df,jf,(function(e,t){var n=t.payload;return Object(j.a)({},e,{authError:n})})),Object(u.a)(df,yf,(function(e,t){var n=t.payload;return Object(j.a)({},e,{authError:null,auth:n})})),Object(u.a)(df,wf,(function(e,t){var n=t.payload;return Object(j.a)({},e,{authError:n})})),df),Df),Nf=n(122),Pf=(Object(I.a)("palettes/LOAD_PALETTES",(function(e){return e})),Object(I.a)("palettes/SELECT_LEFT_COLOR",(function(e){return{color:e.color,paletteId:e.paletteId,selectIdx:e.selectIdx}}))),zf=Object(I.a)("palettes/SELECT_RIGHT_COLOR",(function(e){return{color:e.color}})),Ff=Object(I.a)("palettes/SWAP_LEFT_RIGHT_COLOR"),Hf=Object(I.a)("palettes/REDORDER_PALETTES",(function(e){return{startIdx:e.startIdx,endIdx:e.endIdx}})),Mf=Object(I.a)("palettes/REORDER_PALETTE_CELL",(function(e){return{startPaletteId:e.startPaletteId,endPaletteId:e.endPaletteId,startIdx:e.startIdx,endIdx:e.endIdx}})),Gf=Object(I.a)("palettes/MOVE_PALETTE_TO_TRASH_CAN",(function(e){return{dragIdx:e.dragIdx}})),Bf=Object(I.a)("palettes/MOVE_CELL_TO_TRASH_CAN",(function(e){return{paletteId:e.paletteId,dragIdx:e.dragIdx}})),Wf=Object(I.a)("palettes/MOVE_CELL_FROM_TRASH_CAN",(function(e){return{endPaletteId:e.endPaletteId,startIdx:e.startIdx,endIdx:e.endIdx}})),Vf=Object(I.a)("palettes/SELECT_COLOR_CELL",(function(e){return{paletteId:e.paletteId,selectIdx:e.selectIdx}})),Uf=(Object(I.a)("palettes/INSERT_NEW_PALETTE"),Object(I.a)("palettes/MOVE_UP_PALETTE_CELL")),Yf=Object(I.a)("palettes/MOVE_DOWN_PALETTE_CELL"),Kf=Object(I.a)("palettes/MOVE_LEFT_PALETTE_CELL"),Zf=Object(I.a)("palettes/MOVE_RIGHT_PALETTE_CELL"),Jf={palettes:Gt,selectColorId:{paletteId:Gt[0].id,colorId:0},leftColor:"#000000",rightColor:"#ffffff",trashCan:[]},Xf=function(e){return e.length<30?e:e.splice(0,30)},Qf=Object(y.a)((kf={},Object(u.a)(kf,"palettes/LOAD_PALETTES",(function(e,t){var n=t.payload;return Object(j.a)({},e,{palettes:Object(Nf.a)(n),selectColorId:{paletteId:n[0].id,colorId:0}})})),Object(u.a)(kf,"palettes/SELECT_LEFT_COLOR",(function(e,t){var n=t.payload,r=n.color,f=n.paletteId,a=n.selectIdx;return Object(j.a)({},e,{leftColor:r,selectColorId:{paletteId:f,colorId:a},trashCan:e.trashCan.concat(r)})})),Object(u.a)(kf,"palettes/SELECT_RIGHT_COLOR",(function(e,t){var n=t.payload.color;return Object(j.a)({},e,{rightColor:n,trashCan:e.trashCan.concat(n)})})),Object(u.a)(kf,"palettes/SWAP_LEFT_RIGHT_COLOR",(function(e){return Object(j.a)({},e,{leftColor:e.rightColor,rightColor:e.leftColor})})),Object(u.a)(kf,"palettes/REDORDER_PALETTES",(function(e,t){var n=t.payload,r=n.startIdx,f=n.endIdx;return Object(Ve.b)(e,(function(e){var t=e.palettes.splice(r,1),n=Object(d.a)(t,1)[0];e.palettes.splice(f,0,n)}))})),Object(u.a)(kf,"palettes/REORDER_PALETTE_CELL",(function(e,t){var n=t.payload,r=n.startPaletteId,f=n.endPaletteId,a=n.startIdx,o=n.endIdx;return Object(Ve.b)(e,(function(e){if(r===f){var t=e.palettes.reduce((function(e,t,n){return t.id===f?n:e}),[]),n=e.palettes[t].colors.splice(a,1),c=Object(d.a)(n,1)[0];e.palettes[t].colors.splice(o,0,c)}else{var l=e.palettes.reduce((function(e,t){return t.id===r?t.colors.splice(a,1):e}),[]);e.palettes.map((function(e){return e.id===f?e.colors.splice(o,0,l):""}))}e.selectColorId={paletteId:f,colorId:o}}))})),Object(u.a)(kf,"palettes/MOVE_PALETTE_TO_TRASH_CAN",(function(e,t){var n=t.payload.dragIdx;return Object(Ve.b)(e,(function(e){var t=e.palettes.splice(n,1);if(t[0].colors.map((function(t){return e.trashCan.unshift(t)})),e.trashCan=Xf(e.trashCan),t[0].id===e.selectColorId.paletteId)for(var r=0;r<e.palettes.length;r++)if(e.palettes[r].colors.length>0){e.selectColorId={paletteId:e.palettes[r].id,colorId:0};break}}))})),Object(u.a)(kf,"palettes/MOVE_CELL_TO_TRASH_CAN",(function(e,t){var n=t.payload,r=n.paletteId,f=n.dragIdx;return Object(Ve.b)(e,(function(e){var t=e.palettes.filter((function(e){return e.id===r})),n=t[0].colors.splice(f,1);if(e.trashCan.unshift(n[0]),e.trashCan=Xf(e.trashCan),e.selectColorId.paletteId===r)if(e.selectColorId.colorId>f)e.selectColorId.colorId--;else if(t[0].colors.length<=0)for(var a=0;a<e.palettes.length;a++)if(e.palettes[a].colors.length>0){e.selectColorId={paletteId:e.palettes[a].id,colorId:0};break}}))})),Object(u.a)(kf,"palettes/MOVE_CELL_FROM_TRASH_CAN",(function(e,t){var n=t.payload,r=n.endPaletteId,f=n.startIdx,a=n.endIdx;return Object(Ve.b)(e,(function(e){var t=e.trashCan.splice(f,1);e.palettes.map((function(e){return e.id===r?e.colors.splice(a,0,t[0]):""})),e.selectColorId={paletteId:r,colorId:a}}))})),Object(u.a)(kf,"palettes/SELECT_COLOR_CELL",(function(e,t){var n=t.payload,r=n.paletteId,f=n.selectIdx;return Object(j.a)({},e,{selectColorId:{paletteId:r,colorId:f}})})),Object(u.a)(kf,"palettes/MOVE_UP_PALETTE_CELL",(function(e){return Object(Ve.b)(e,(function(e){var t=e.selectColorId.paletteId,n=e.palettes.findIndex((function(e){return e.id===t}));n>0&&e.palettes[n-1].colors.length>0&&(e.palettes[n-1].colors.length-1>=e.selectColorId.colorId?e.selectColorId={paletteId:e.palettes[n-1].id,colorId:e.selectColorId.colorId}:e.selectColorId={paletteId:e.palettes[n-1].id,colorId:e.palettes[n-1].colors.length-1}),e.leftColor=e.palettes.filter((function(t){return t.id===e.selectColorId.paletteId}))[0].colors[e.selectColorId.colorId]}))})),Object(u.a)(kf,"palettes/MOVE_DOWN_PALETTE_CELL",(function(e){return Object(Ve.b)(e,(function(e){var t=e.selectColorId.paletteId,n=e.palettes.findIndex((function(e){return e.id===t}));n<e.palettes.length-1&&e.palettes[n+1].colors.length>0&&(e.palettes[n+1].colors.length-1>=e.selectColorId.colorId?e.selectColorId={paletteId:e.palettes[n+1].id,colorId:e.selectColorId.colorId}:e.selectColorId={paletteId:e.palettes[n+1].id,colorId:e.palettes[n+1].colors.length-1}),e.leftColor=e.palettes.filter((function(t){return t.id===e.selectColorId.paletteId}))[0].colors[e.selectColorId.colorId]}))})),Object(u.a)(kf,"palettes/MOVE_LEFT_PALETTE_CELL",(function(e){return Object(Ve.b)(e,(function(e){e.selectColorId={paletteId:e.selectColorId.paletteId,colorId:e.selectColorId.colorId<=0?e.selectColorId.colorId:e.selectColorId.colorId-1},e.leftColor=e.palettes.filter((function(t){return t.id===e.selectColorId.paletteId}))[0].colors[e.selectColorId.colorId]}))})),Object(u.a)(kf,"palettes/MOVE_RIGHT_PALETTE_CELL",(function(e){return Object(Ve.b)(e,(function(e){var t=e.selectColorId.paletteId;e.palettes.filter((function(e){return e.id===t}))[0].colors.length-1>e.selectColorId.colorId&&e.selectColorId.colorId++,e.leftColor=e.palettes.filter((function(t){return t.id===e.selectColorId.paletteId}))[0].colors[e.selectColorId.colorId]}))})),kf),Jf),qf=(Object(I.a)("keybind/CHANGE_KEY_BIND",(function(e){return{action:e.action,key:e.key}})),Object(j.a)({},{keySet:[{action:"DOT",key:"q",code:"KeyQ",helpText:"Pen tool"},{action:"BUCKET",key:"b",code:"KeyB",helpText:"Bucket tool"},{action:"PIKCER",key:"p",code:"KeyP",helpText:"Color picker tool"},{action:"ERASER",key:"e",code:"KeyE",helpText:"Eraser tool"},{action:"MOVE",key:"m",code:"KeyM",helpText:"Move tool"},{action:"SAMECOLOR",key:"a",code:"KeyA",helpText:"Bucket all same colors pixel"},{action:"SWAP",key:"x",code:"KeyX",helpText:"Swap first/second Color"},{action:"PALETTE_UP",key:"arrowUp",code:"ArrowUp",helpText:"Select palette move up"},{action:"PALETTE_DOWN",key:"arrowDown",code:"ArrowDown",helpText:"Select palette move down"},{action:"PALETTE_LEFT",key:"arrowLeft",code:"ArrowLeft",helpText:"Select palette move left"},{action:"PALETTE_RIGHT",key:"arrowRight",code:"ArrowRight",helpText:"Select palette move right"},{action:"UNDO",key:"ctrl + z",code:"$mod+KeyZ",helpText:"Undo"},{action:"REDO",key:"ctrl + shift + z",code:"$mod+Shift+KeyZ",helpText:"Redo"},{action:"INCREASE_COLUMN",key:"ctrl + arrowRight",code:"$mod+ArrowRight",helpText:"Column + 1"},{action:"DECREASE_COLUMN",key:"ctrl + arrowLeft",code:"$mod+ArrowLeft",helpText:"Column - 1"},{action:"INCREASE_ROW",key:"ctrl + arrowDown",code:"$mod+ArrowDown",helpText:"Row + 1"},{action:"DECREASE_ROW",key:"ctrl + arrowUp",code:"$mod+ArrowUp",helpText:"Row - 1"},{action:"INCREASE_DOTSIZE",key:"-",code:"Equal",helpText:"Increase dot size"},{action:"DECREASE_DOTSIZE",key:"+",code:"Minus",helpText:"Decrease dot size"},{action:"MOVE_VIEWPORT_UP",key:"shift + arrowUp",code:"Shift+ArrowUp",helpText:"Move viewport up"},{action:"MOVE_VIEWPORT_RIGHT",key:"shift + arrowRight",code:"Shift+ArrowRight",helpText:"Move viewport right"},{action:"MOVE_VIEWPORT_DOWN",key:"shift + arrowDown",code:"Shift+ArrowDown",helpText:"Move viewport down"},{action:"MOVE_VIEWPORT_LEFT",key:"shift + arrowLeft",code:"Shift+ArrowLeft",helpText:"Move viewport left"},{action:"SAVE_DOTART",key:"ctrl + s",code:"$mod+KeyS",helpText:"Save to localStorage"}]})),$f=Object(y.a)(Object(u.a)({},"keybind/CHANGE_KEY_BIND",(function(e){return Object(j.a)({},e)})),qf),ea=n(85),ta=n.n(ea),na=A.a.mark(da),ra=Object(I.a)("index/DOT_ACTIONS",(function(e){return{rowIdx:e.rowIdx,columnIdx:e.columnIdx}})),fa=Object(I.a)("index/CLEAR_FAKE_DOT_ART"),aa=Object(Of.combineReducers)({dot:xt}),oa=Object(Of.combineReducers)({dotArt:ta()(aa,{limit:100,ignoreInitialState:!0,filter:Object(ea.includeAction)(["dot/CLEAR_DOT","dot/NEW_DOT_ART_PROJECT","dot/LOAD_DOT_ART","dot/INCREASE_COLUMN","dot/DECREASE_COLUMN","dot/INCREASE_ROW","dot/DECREASE_ROW","dot/CHANGE_DOT_AREA","dot/CHANGE_ACTIVE_IDX","dot/REMOVE_ACTIVE_DOT_ART","dot/COPY_ACTIVE_DOT_ART","dot/ADD_NEW_DOT_ART","dot/CHANGE_ANIMATION_INTERVAL","dot/REORDER_DOT_LIST","dot/UPDATE_DOT_ART","dot/ADD_NEW_LAYER","dot/REMOVE_LAYER","dot/MERGE_LAYER","dot/MOVE_UP_LAYER","dot/MOVE_DOWN_LAYER","dot/SELECT_LAYER_IDX","dot/RENAME_LAYER"])}),palettes:Qf,paintTool:Xe,auth:Rf,dialog:Xt,user:$,loading:P,observer:Rr,keybind:$f}),ca=function(e,t,n,r,f){var a,o=[];return(t+1)%f!==0&&e[a=t+1]===n&&o.push(a),t%f!==0&&e[a=t-1]===n&&o.push(a),t>=f&&e[a=t-f]===n&&o.push(a),t<f*r-f&&e[a=t+f]===n&&o.push(a),o},la=function(e,t,n,r,f,a){if("IDLE"===n||"DRAGGING"!==n)return Object(j.a)({},e);switch(t){case Ue:if("DRAGGING"===n){var o="LEFT"===r?e.palettes.leftColor:e.palettes.rightColor,c=e.dotArt.present.dot.fakeDotArt.map((function(e){return e.slice()}));return c[f][a]=o,Object(j.a)({},e,{dotArt:Object(j.a)({},e.dotArt,{present:Object(j.a)({},e.dotArt.present,{dot:Object(j.a)({},e.dotArt.present.dot,{fakeDotArt:c})})})})}return Object(j.a)({},e);case"BUCKET":if("DRAGGING"===n){for(var l="LEFT"===r?e.palettes.leftColor:e.palettes.rightColor,i=e.dotArt.present.dot,u=i.rowCount,d=i.columnCount,s=e.dotArt.present.dot.fakeDotArt.reduce((function(e,t){return e.concat(t)})),b=f*d+a,p=function(e,t,n,r,f,a){for(var o,c,l,i,u=[t],d=e.slice();u.length>0;){d[o=u.pop()]=r,c=ca(d,o,n,f,a);for(var s=0;s<c.length;s++)i=e[l=c[s]],-1===u.indexOf(l)&&i!==r&&u.push(l)}return d}(s,b,s[b],l,u,d),m=[],O=0,E=0;E<u;E++){for(var h=[],v=0;v<d;v++)h.push(p[O]),O++;m.push(h),h=[]}return Object(j.a)({},e,{dotArt:Object(j.a)({},e.dotArt,{present:Object(j.a)({},e.dotArt.present,{dot:Object(j.a)({},e.dotArt.present.dot,{fakeDotArt:m})})})})}return Object(j.a)({},e);case"PICKER":if("DRAGGING"===n){var g=e.dotArt.present.dot.fakeDotArt[f][a];return g?"LEFT"===r?Object(j.a)({},e,{palettes:Object(j.a)({},e.palettes,{leftColor:g})}):Object(j.a)({},e,{palettes:Object(j.a)({},e.palettes,{rightColor:g})}):Object(j.a)({},e)}return Object(j.a)({},e);case"ERASER":if("DRAGGING"===n){var C=e.dotArt.present.dot.fakeDotArt.map((function(e){return e.slice()}));return C[f][a]="",Object(j.a)({},e,{dotArt:Object(j.a)({},e.dotArt,{present:Object(j.a)({},e.dotArt.present,{dot:Object(j.a)({},e.dotArt.present.dot,{fakeDotArt:C})})})})}return Object(j.a)({},e);case"MOVE":if("DRAGGING"===n){var x,A=e.observer.startPosition.x,I=e.observer.startPosition.y,y=e.observer.mousePosition.x,w=e.observer.mousePosition.y,S=y-A,L=w-I,T=e.dotArt.present.dot,k=T.columnCount,_=T.layerSelectIdx,D=T.layerData[_].dotFrameIdx,R=T.dotFrameList[T.activeIdx].layerList[D].slice();return e.observer.altDown?(L>0?(x=R.slice(R.length-L),R=x.concat(R.slice(0,R.length-L))):L<0&&(x=R.slice(0,-L),R=R.slice(-L).concat(x)),S>0?R=R.map((function(e){return e.slice(-S).concat(e.slice(0,e.length-S))})):S<0&&(R=R.map((function(e){return e.slice(-S).concat(e.slice(0,-S))})))):(L>0?R=R.slice(0,R.length-L):L<0&&(R=R.slice(-L)),S>0?R=R.map((function(e){return new Array(S).fill("").concat(e.slice(0,e.length-S))})):S<0&&(R=R.map((function(e){return e.slice(-S).concat(new Array(-S).fill(""))}))),L>0?R=Le(L,k).concat(R):L<0&&(R=R.concat(Le(-L,k)))),Object(j.a)({},e,{dotArt:Object(j.a)({},e.dotArt,{present:Object(j.a)({},e.dotArt.present,{dot:Object(j.a)({},e.dotArt.present.dot,{fakeDotArt:R})})})})}return Object(j.a)({},e);case"SAMECOLOR":if("DRAGGING"===n){var N="LEFT"===r?e.palettes.leftColor:e.palettes.rightColor,P=e.dotArt.present.dot.fakeDotArt.map((function(e){return e.slice()})),z=P[f][a];return P=P.map((function(e){return e.map((function(e){return e===z?N:e}))})),Object(j.a)({},e,{dotArt:Object(j.a)({},e.dotArt,{present:Object(j.a)({},e.dotArt.present,{dot:Object(j.a)({},e.dotArt.present.dot,{fakeDotArt:P})})})})}return Object(j.a)({},e);default:return Object(j.a)({},e)}},ia=function(e){switch(e.paintTool.selectedPaintTool){case Ue:var t=Le(e.dotArt.present.dot.rowCount,e.dotArt.present.dot.columnCount);return Object(j.a)({},e,{dotArt:Object(j.a)({},e.dotArt,{present:Object(j.a)({},e.dotArt.present,{dot:Object(j.a)({},e.dotArt.present.dot,{fakeDotArt:t})})}),observer:Object(j.a)({},e.observer,{startPosition:{x:"",y:""}})});case"BUCKET":case"ERASER":case"SAMECOLOR":case"PICKER":case"MOVE":var n=e.dotArt.present.dot,r=n.activeIdx,f=n.layerSelectIdx,a=n.layerData[f].dotFrameIdx;return Object(j.a)({},e,{dotArt:Object(j.a)({},e.dotArt,{present:Object(j.a)({},e.dotArt.present,{dot:Object(j.a)({},e.dotArt.present.dot,{fakeDotArt:e.dotArt.present.dot.dotFrameList[r].layerList[a]})})}),observer:Object(j.a)({},e.observer,{startPosition:{x:"",y:""}})});case"PICKER":default:return Object(j.a)({},e)}},ua=Object(y.a)((_f={},Object(u.a)(_f,"index/DOT_ACTIONS",(function(e,t){var n=t.payload,r=n.rowIdx,f=n.columnIdx,a=Object(j.a)({},e,{observer:Object(j.a)({},e.observer,{mousePosition:{x:f,y:r},startPosition:"DRAGGING"===e.paintTool.paintState&&""===e.observer.startPosition.x&&""===e.observer.startPosition.y?{x:f,y:r}:e.observer.startPosition})});return la(a,e.paintTool.selectedPaintTool,e.paintTool.paintState,e.paintTool.direction,r,f)})),Object(u.a)(_f,"dot/CLEAR_DOT",(function(e){return ia(e)})),Object(u.a)(_f,"dot/LOAD_DOT_ART",(function(e){return ia(e)})),Object(u.a)(_f,"dot/NEW_DOT_ART_PROJECT",(function(e){return ia(e)})),Object(u.a)(_f,"paintTool/CHANGE_PAINT_TOOL",(function(e){return ia(e)})),Object(u.a)(_f,"index/CLEAR_FAKE_DOT_ART",(function(e){return ia(e)})),Object(u.a)(_f,"dot/UPDATE_DOT_ART",(function(e){return ia(e)})),Object(u.a)(_f,"dot/INCREASE_COLUMN",(function(e){return ia(e)})),Object(u.a)(_f,"dot/DECREASE_COLUMN",(function(e){return ia(e)})),Object(u.a)(_f,"dot/INCREASE_ROW",(function(e){return ia(e)})),Object(u.a)(_f,"dot/DECREASE_ROW",(function(e){return ia(e)})),Object(u.a)(_f,"dot/CHANGE_DOT_AREA",(function(e){return ia(e)})),Object(u.a)(_f,"dot/CHANGE_ACTIVE_IDX",(function(e){return ia(e)})),Object(u.a)(_f,"dot/ADD_NEW_DOT_ART",(function(e){return ia(e)})),Object(u.a)(_f,"dot/REMOVE_LAYER",(function(e){return ia(e)})),Object(u.a)(_f,"dot/MERGE_LAYER",(function(e){return ia(e)})),Object(u.a)(_f,"dot/MOVE_UP_LAYER",(function(e){return ia(e)})),Object(u.a)(_f,"dot/MOVE_DOWN_LAYER",(function(e){return ia(e)})),Object(u.a)(_f,"dot/SELECT_LAYER_IDX",(function(e){return ia(e)})),Object(u.a)(_f,"dot/RENAME_LAYER",(function(e){return ia(e)})),_f),{});function da(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)([Tf(),q()]);case 2:case"end":return e.stop()}}),na)}var sa=function(e,t){var n=oa(e,t);return ua(n,t)},ba=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.dotArt;return{rowCount:t.present.dot.rowCount,columnCount:t.present.dot.columnCount}})),n=t.rowCount,a=t.columnCount,o=Object(i.d)((function(e){var t=e.observer;return{border:t.dotBorder,dotSize:t.dotSize,backgroundImg:t.backgroundImg}})),c=o.border,l=o.dotSize,u=o.backgroundImg,d=Object(r.useCallback)((function(t){t.deltaY>0?e(wr()):e(yr())}),[e]),s=Object(r.useCallback)((function(t){return e(Ke(t))}),[e]),b=Object(r.useCallback)((function(t,n){return e(ra({rowIdx:t,columnIdx:n}))}),[e]),p=Object(r.useCallback)((function(t){return e(Ze(t))}),[e]),m=Object(r.useCallback)((function(){return e(xr())}),[e]);return f.a.createElement(mf,{border:c,dotSize:l,rowCount:n,columnCount:a,backgroundImg:u,onWheelHandle:d,onChangePaintStateHandle:s,onDotActionHandle:b,onSetDirectionHandle:p,onLeavesPaintAreaHandle:m})},pa=n(42),ma=n(223),Oa=n(73);function Ea(){var e=Object(te.a)(["\n  display: flex;\n  height: 32px;\n"]);return Ea=function(){return e},e}function ha(){var e=Object(te.a)(["\n  /* display: flex; */\n  height: 64px;\n"]);return ha=function(){return e},e}var va=pe.b.div(ha()),ga=pe.b.div(Ea()),Ca=f.a.memo((function(e){var t=e.onChangePaintTool,n=e.selectedPaintTool;return f.a.createElement(va,null,f.a.createElement(ga,null,f.a.createElement(ye,{selected:n===Ue,onClick:function(){return t(Ue)}},f.a.createElement(pa.h,null)),f.a.createElement(ye,{selected:"BUCKET"===n,onClick:function(){return t("BUCKET")}},f.a.createElement(ma.a,null)),f.a.createElement(ye,{selected:"PICKER"===n,onClick:function(){return t("PICKER")}},f.a.createElement(pa.i,null))),f.a.createElement(ga,null,f.a.createElement(ye,{selected:"ERASER"===n,onClick:function(){return t("ERASER")}},f.a.createElement(Oa.d,null)),f.a.createElement(ye,{selected:"MOVE"===n,onClick:function(){return t("MOVE")}},f.a.createElement(Oa.e,null)),f.a.createElement(ye,{selected:"SAMECOLOR"===n,onClick:function(){return t("SAMECOLOR")}},f.a.createElement(Oa.c,null))))})),ja=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return{selectedPaintTool:e.paintTool.selectedPaintTool}})).selectedPaintTool,n=Object(r.useCallback)((function(t){return e(Ye(t))}),[e]);return f.a.createElement(Ca,{onChangePaintTool:n,selectedPaintTool:t})},xa=n(226),Aa=n.n(xa),Ia=n(225),ya=n.n(Ia),wa=n(224),Sa=n.n(wa),La=n(227),Ta=n.n(La);function ka(){var e=Object(te.a)(["\n  display: flex;\n  height: 40px;\n"]);return ka=function(){return e},e}var _a=pe.b.div(ka()),Da=function(e){var t=e.newProjectHandle,n=e.saveHandle,a=e.dialogOpenHandle,o=Object(r.useCallback)((function(){t()}),[t]);return f.a.createElement(f.a.Fragment,null,f.a.createElement(_a,null,f.a.createElement(ye,{onClick:o},f.a.createElement(Sa.a,{fontSize:"large"})),f.a.createElement(ye,{onClick:n},f.a.createElement(ya.a,null)),f.a.createElement(ye,{onClick:function(){return a("Load")}},f.a.createElement(Aa.a,null))),f.a.createElement(_a,null,f.a.createElement(ye,{onClick:function(){return a("DownLoad")}},f.a.createElement(Ta.a,null)),f.a.createElement(ye,{onClick:function(){return a("Css")}},"css")))},Ra=f.a.memo((function(){var e=Object(Kt.b)().enqueueSnackbar,t=Object(i.c)(),n=Object(i.d)((function(e){var t=e.dotArt.present.dot;return{dotFrameList:t.dotFrameList,columnCount:t.columnCount,rowCount:t.rowCount,animationDuration:t.animationDuration,layerData:t.layerData}})),a=n.dotFrameList,o=n.columnCount,c=n.rowCount,l=n.animationDuration,u=n.layerData,d=Object(i.d)((function(e){var t=e.observer;return{dotBorder:t.dotBorder,backgroundImg:t.backgroundImg,saveState:t.saveState}})),s=d.dotBorder,b=d.backgroundImg,p=d.saveState;Object(r.useEffect)((function(){var e=Bt(localStorage),n=Ut(localStorage);e||(localStorage.setItem("dotArt_storage",JSON.stringify({dotArt:[{dot:Object(j.a)({},Mt)}],current:0})),e=Bt(localStorage)),t($e(e.dotArt[e.current].dot)),t(Tr(n))}),[]);var m=Object(r.useCallback)((function(){t(qe())}),[t]),O=Object(r.useCallback)((function(e){t(Zt(e))}),[t]);Object(r.useEffect)((function(){if(p){var n={dot:{id:Oe.a.generate(),dotFrameList:a,columnCount:o,rowCount:c,animationDuration:l,layerData:u}};(function(e,t){try{var n=Bt(e);return n&&n.dotArt?(n.dotArt.push(t),n.current=n.dotArt.length-1):n=Object(j.a)({},n,{dotArt:[t],current:0}),e.setItem("dotArt_storage",JSON.stringify(n)),!0}catch(r){return!1}})(localStorage,n)?e("Save DotArt To LocalStorage",{variant:"success"}):e("Save Fail!",{variant:"error"}),t(Dr(!1))}}),[p,t]),Object(r.useEffect)((function(){var e={dotBorder:s,backgroundImg:b},t=function(){!function(e,t){try{var n=Object(j.a)({},Ut(e),{},t);e.setItem("dotArt_private_setting",JSON.stringify(n))}catch(r){return!1}}(localStorage,e)};return window.addEventListener("beforeunload",t,!1),function(){window.removeEventListener("beforeunload",t,!1)}}),[s,b]);var E=Object(r.useCallback)((function(){t(Dr(!0))}),[t]);return f.a.createElement(Da,{newProjectHandle:m,saveHandle:E,dialogOpenHandle:O})}));function Na(){var e=Object(te.a)(["\n  cursor: pointer;\n  box-sizing: border-box;\n  position: relative;\n  width: 30px;\n  height: 17.32px;\n  margin-left: 0px;\n  background-color: ",";\n  border-left: solid 3px\n    ",";\n  border-right: solid 3px\n    ",";\n  outline: none;\n\n  :before,\n  :after {\n    content: '';\n    box-sizing: border-box;\n    position: absolute;\n    z-index: 1;\n    width: 21.21px;\n    height: 21.21px;\n    -webkit-transform: scaleY(0.5774) rotate(-45deg);\n    -ms-transform: scaleY(0.5774) rotate(-45deg);\n    transform: scaleY(0.5774) rotate(-45deg);\n    background-color: ",";\n    left: 1.3934px;\n  }\n\n  :before {\n    top: -10.6066px;\n    border-top: solid 4.2426px\n      ",";\n    border-right: solid 4.2426px\n      ",";\n  }\n\n  :after {\n    bottom: -10.6066px;\n    border-bottom: solid 4.2426px\n      ",";\n    border-left: solid 4.2426px\n      ",";\n  }\n\n  &:hover {\n    color: white;\n  }\n"]);return Na=function(){return e},e}var Pa=pe.b.div(Na(),(function(e){return e.color||""}),(function(e){return e.selected?"#000000":"#ffffff"}),(function(e){return e.selected?"#000000":"#ffffff"}),(function(e){return e.color||""}),(function(e){return e.selected?"#000000":"#ffffff"}),(function(e){return e.selected?"#000000":"#ffffff"}),(function(e){return e.selected?"#000000":"#ffffff"}),(function(e){return e.selected?"#000000":"#ffffff"})),za=function(e){var t=e.children,n=e.innerRef,r=Object(ge.a)(e,["children","innerRef"]);return f.a.createElement(Pa,Object.assign({ref:n},r),t)},Fa=function(e){var t=e.color,n=e.paletteId,r=e.cellIdx,a=e.selected,o=(e.handleSelectColorCell,e.handleSelectLeftColor),c=e.handleSelectRightColor;return f.a.createElement(Mn.b,{key:r,draggableId:"cell-".concat(n,"-").concat(r),index:r},(function(e){return f.a.createElement(za,Object.assign({color:t,selected:a,innerRef:e.innerRef},e.draggableProps,e.dragHandleProps,{onClick:function(){return o(n,r,t)},onContextMenu:function(e){return c(e,t)}}))}))},Ha=n(228);function Ma(){var e=Object(te.a)(["\n  display: flex;\n  /* width: 300px; */\n"]);return Ma=function(){return e},e}function Ga(){var e=Object(te.a)(["\n  width: 16px;\n  height: 16px;\n"]);return Ga=function(){return e},e}function Ba(){var e=Object(te.a)(["\n  display: flex;\n  margin-top: 8px;\n  &:nth-child(odd) {\n    margin-left: 16px;\n  }\n"]);return Ba=function(){return e},e}var Wa=pe.b.div(Ba()),Va=pe.b.div(Ga()),Ua=pe.b.div(Ma());function Ya(e,t,n,r){return t.isDragging?e:null===e.transform?Object(j.a)({},e):Object(j.a)({},e,{marginLeft:"0px",transform:"".concat(e.transform.slice(0,9),"(").concat(r?n?16:0:n?0:16).concat(e.transform.slice(11))})}var Ka=function(e){var t=e.palette,n=e.idx,r=e.dragIdx,a=e.selectColorId,o=e.handleSelectColorCell,c=e.handleSelectLeftColor,l=e.handleSelectRightColor;return f.a.createElement(Mn.b,{key:t.id,draggableId:"pale-".concat(t.id),index:n},(function(e,i){return f.a.createElement(Wa,Object.assign({},e.draggableProps,{ref:e.innerRef,style:Ya(e.draggableProps.style,i,n%2!==0,r>n)}),f.a.createElement(Va,e.dragHandleProps,f.a.createElement(Ha.a,null)),f.a.createElement(Mn.c,{droppableId:"".concat(t.id),type:"cell",direction:"horizontal",isDropDisabled:!(t.colors.length<7)},(function(e,n){return f.a.createElement(Ua,Object.assign({ref:e.innerRef},e.droppableProps,{style:(r=n.isDraggingOver,{background:r?"gray":""})}),t.colors.map((function(e,n){return f.a.createElement(Fa,{color:e,paletteId:t.id,cellIdx:n,key:"".concat(t.id).concat(n),selected:a.paletteId===t.id&&a.colorId===n,handleSelectColorCell:o,handleSelectLeftColor:c,handleSelectRightColor:l})})),e.placeholder);var r})))}))};function Za(){var e=Object(te.a)(["\n  width: 35px;\n  height: 35px;\n  background: skyblue;\n"]);return Za=function(){return e},e}function Ja(){var e=Object(te.a)(["\n  ","\n"]);return Ja=function(){return e},e}var Xa=pe.b.div(Ja(),(function(e){return e.displayBool?"":"display: none"})),Qa=pe.b.div(Za()),qa=function(e){var t=e.dragType;return f.a.createElement(f.a.Fragment,null,f.a.createElement(Xa,{displayBool:"pale"===t},f.a.createElement(Mn.c,{type:"palettes",droppableId:"PaletteTrashCan"},(function(e){return f.a.createElement(Qa,Object.assign({ref:e.innerRef},e.droppableProps),f.a.createElement(yt.a,{fontSize:"large"}),e.placeholder)}))),f.a.createElement(Xa,{displayBool:"cell"===t},f.a.createElement(Mn.c,{type:"cell",droppableId:"CellTrashCan"},(function(e){return f.a.createElement(Qa,Object.assign({ref:e.innerRef},e.droppableProps),f.a.createElement(yt.a,{fontSize:"large"}),e.placeholder)}))),f.a.createElement(Xa,{displayBool:"temp"===t},f.a.createElement(Qa,null,f.a.createElement(yt.a,{fontSize:"large"}))))},$a=function(e){var t=e.color,n=e.cellIdx;return f.a.createElement(Mn.b,{key:n,draggableId:"temp-".concat(n),index:n},(function(e){return f.a.createElement(za,Object.assign({color:t,innerRef:e.innerRef},e.draggableProps,e.dragHandleProps))}))};function eo(){var e=Object(te.a)(["\n  background: rgba(0, 0, 0, 0.3);\n  /* width: calc(100% - 40px); */\n  width: 100%;\n  padding: 8px;\n  display: flex;\n  flex-wrap: nowrap;\n  overflow-x: auto;\n  overflow-y: hidden;\n  & > * {\n    min-width: 30px;\n    /* margin-top: 8px; */\n  }\n  &::-webkit-scrollbar {\n    width: 2px;\n    height: 2px;\n  }\n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: #888;\n  }\n  &::-webkit-scrollbar-thumb:hover {\n    background: #555;\n  }\n"]);return eo=function(){return e},e}var to=pe.b.div(eo()),no=function(e){var t=e.trashCan;return f.a.createElement(Mn.c,{droppableId:"temp",type:"cell",direction:"horizontal",isDropDisabled:!0},(function(e){return f.a.createElement(to,Object.assign({ref:e.innerRef},e.droppableProps),t.map((function(e,t){return f.a.createElement($a,{color:e,cellIdx:t,key:"temp-".concat(t)})})),e.placeholder)}))};function ro(){var e=Object(te.a)(["\n  display: flex;\n"]);return ro=function(){return e},e}function fo(){var e=Object(te.a)(["\n  display: flex;\n  margin-left: 32px;\n"]);return fo=function(){return e},e}function ao(){var e=Object(te.a)(["\n  padding: 8px 0px;\n  background: gray;\n"]);return ao=function(){return e},e}function oo(){var e=Object(te.a)(["\n  border: 2px solid #9e9e9e;\n"]);return oo=function(){return e},e}var co=pe.b.div(oo()),lo=pe.b.div(ao()),io=pe.b.div(fo()),uo=pe.b.div(ro()),so=f.a.memo((function(e){var t=e.palettes,n=e.trashCan,a=e.selectColorId,o=e.handleSelectLeftColor,c=e.handleSelectRightColor,l=e.handleReorderPalettes,i=e.handleReorderCell,u=e.handleMovePaletteToTrashCan,s=e.handleMoveCellToTrashCan,b=e.handleMoveCellFromTrashCan,p=e.handleSelectColorCell,m=e.handleSavePalettes,O=Object(r.useState)(0),E=Object(d.a)(O,2),h=E[0],v=E[1],g=Object(r.useState)("pale"),C=Object(d.a)(g,2),j=C[0],x=C[1];return f.a.createElement(co,null,f.a.createElement(Mn.a,{onDragEnd:function(e){e.destination&&("palettes"===e.type?"PaletteTrashCan"===e.destination.droppableId?u(e.source.index):l(e.source.index,e.destination.index):"cell"===e.type?"CellTrashCan"===e.destination.droppableId?s(e.source.droppableId,e.source.index):"temp"===e.source.droppableId?b(e.destination.droppableId,e.source.index,e.destination.index):i(e.source.droppableId,e.destination.droppableId,e.source.index,e.destination.index):console.log(e))},onBeforeDragStart:function(e){v(e.source.index)},onBeforeCapture:function(e){x(e.draggableId.substring(0,4))}},f.a.createElement(uo,null,f.a.createElement(qa,{dragType:j}),f.a.createElement(no,{trashCan:n})),f.a.createElement(Mn.c,{droppableId:"palettes",type:"palettes",renderClone:function(e){return f.a.createElement(io,Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),f.a.createElement(za,null),f.a.createElement(za,null),f.a.createElement(za,null),f.a.createElement(za,null),f.a.createElement(za,null))}},(function(e,n){return f.a.createElement(lo,Object.assign({ref:e.innerRef},e.droppableProps,{style:(r=n.isDraggingOver,{background:r?"lightblue":"lightgrey"})}),t.map((function(e,t){return f.a.createElement(Ka,{palette:e,key:e.id,idx:t,dragIdx:h,selectColorId:a,handleSelectColorCell:p,handleSelectLeftColor:o,handleSelectRightColor:c})})),e.placeholder);var r})),f.a.createElement("button",{onClick:function(){return m("test")}},"save")))})),bo=f.a.memo((function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.palettes;return{palettes:t.palettes,trashCan:t.trashCan,selectColorId:t.selectColorId}})),n=t.palettes,a=t.trashCan,o=t.selectColorId,c=Object(r.useCallback)((function(t,n){e(Hf({startIdx:t,endIdx:n}))}),[e]),l=Object(r.useCallback)((function(t,n,r,f){e(Mf({startPaletteId:t,endPaletteId:n,startIdx:r,endIdx:f}))}),[e]),u=Object(r.useCallback)((function(t){e(Gf({dragIdx:t}))}),[e]),d=Object(r.useCallback)((function(t,n){e(Bf({paletteId:t,dragIdx:n}))}),[e]),s=Object(r.useCallback)((function(t,n,r){e(Wf({endPaletteId:t,startIdx:n,endIdx:r}))}),[e]),b=Object(r.useCallback)((function(t,n){return e(Vf({paletteId:t,selectIdx:n}))}),[e]),p=Object(r.useCallback)((function(t,n,r){return e(Pf({paletteId:t,selectIdx:n,color:r}))}),[e]),m=Object(r.useCallback)((function(t,n){t.preventDefault(),e(zf({color:n}))}),[e]),O=Object(r.useCallback)((function(e){var t={palettesName:e,palettes:Object(Nf.a)(n)};Wt(localStorage,t)}),[n]);return f.a.createElement(so,{palettes:n,trashCan:a,selectColorId:o,handleSelectLeftColor:p,handleSelectRightColor:m,handleReorderPalettes:c,handleReorderCell:l,handleMovePaletteToTrashCan:u,handleMoveCellToTrashCan:d,handleMoveCellFromTrashCan:s,handleSelectColorCell:b,handleSavePalettes:O})})),po=n(94);function mo(){var e=Object(te.a)(["\n  margin-top: 8px;\n  margin-left: -2px;\n"]);return mo=function(){return e},e}function Oo(){var e=Object(te.a)(["\n  cursor: pointer;\n  margin-right: 3px;\n  border: 2px solid ",";\n  width: 20px;\n  height: 20px;\n  padding: ",";\n  :before {\n    content: '';\n    display: block;\n    width: 100%;\n    height: 100%;\n    background-color: ",";\n  }\n"]);return Oo=function(){return e},e}function Eo(){var e=Object(te.a)(["\n  margin-top: 8px;\n  display: flex;\n  align-items: center;\n  & > h4 {\n    padding: 0;\n    margin: 0;\n    margin-right: 8px;\n  }\n"]);return Eo=function(){return e},e}function ho(){var e=Object(te.a)(["\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  margin-right: 3px;\n  background-image: ",";\n  border: 2px solid ",";\n"]);return ho=function(){return e},e}function vo(){var e=Object(te.a)(["\n  display: flex;\n  & > h4 {\n    padding: 0;\n    margin: 0;\n    margin-right: 8px;\n  }\n"]);return vo=function(){return e},e}function go(){var e=Object(te.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n  padding: 4px 6px;\n  background-color: #f2e8dc;\n"]);return go=function(){return e},e}var Co=pe.b.div(go()),jo=pe.b.div(vo()),xo=pe.b.div(ho(),(function(e){return 1===e.backgroundImg?"url(".concat(Bn.a,")"):"url(".concat(Vn.a,")")}),(function(e){return e.selected?"orange":"#6f6f6f"})),Ao=pe.b.div(Eo()),Io=pe.b.div(Oo(),(function(e){return e.selected?"orange":"#afafaf"}),(function(e){return"".concat(6-e.pixel,"px")}),(function(e){return e.selected?"orange":"#afafaf"})),yo=pe.b.div(mo()),wo=f.a.memo((function(e){var t=e.borderSize,n=e.borderColor,r=e.backgroundImg,a=e.onChangeDotBorderSize,o=e.onChangeDotBorderColor,c=e.onChangeBackgroundImg;return f.a.createElement(Co,null,f.a.createElement(jo,null,f.a.createElement("h4",null,"Background"),f.a.createElement(xo,{backgroundImg:0,selected:0===r,onClick:function(){return c(0)}}),f.a.createElement(xo,{backgroundImg:1,selected:1===r,onClick:function(){return c(1)}})),f.a.createElement(Ao,null,f.a.createElement("h4",null,"Dot Border"),f.a.createElement(Io,{onClick:function(){return a(0)},pixel:-2,selected:0===t,borderColor:n}),f.a.createElement(Io,{onClick:function(){return a(1)},pixel:1,selected:1===t,borderColor:n}),f.a.createElement(Io,{onClick:function(){return a(2)},pixel:2,selected:2===t,borderColor:n}),f.a.createElement(Io,{onClick:function(){return a(3)},pixel:3,selected:3===t,borderColor:n})),f.a.createElement(yo,null,f.a.createElement(po.GithubPicker,{onChange:o,width:190,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#1273DE","#004DCF","#5300EB","#000000","#9b9b9b","#ffffff","#f78da7","#eb144c","#9379d2","#87ceeb"]})))})),So=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.observer;return{borderSize:t.dotBorder.size,borderColor:t.dotBorder.color,backgroundImg:t.backgroundImg}})),n=t.borderSize,a=t.borderColor,o=t.backgroundImg,c=Object(r.useCallback)((function(t){e(Ar(t))}),[e]),l=Object(r.useCallback)((function(t){e(Ir(t.hex))}),[e]),u=Object(r.useCallback)((function(t){e(_r(t))}),[e]);return f.a.createElement(wo,{borderSize:n,borderColor:a,backgroundImg:o,onChangeDotBorderSize:c,onChangeDotBorderColor:l,onChangeBackgroundImg:u})};function Lo(){var e=Object(te.a)(["\n  font-size: 20px;\n  width: 40px;\n  height: 40px;\n  border: 1px solid #225ea7;\n  outline: none;\n  border-radius: 0.5rem;\n  text-align: center;\n  box-shadow: 0 0.3rem #999;\n  transition: all 0.3s ease-in-out;\n"]);return Lo=function(){return e},e}function To(){var e=Object(te.a)(["\n  display: flex;\n  width: 120px;\n  height: 40px;\n"]);return To=function(){return e},e}var ko=pe.b.div(To()),_o=pe.b.input(Lo()),Do=f.a.memo((function(e){var t=e.onChangeArea,n=e.row,a=e.column,o=e.dotClear,c=Object(r.useState)(n),l=Object(d.a)(c,2),i=l[0],u=l[1],s=Object(r.useState)(a),b=Object(d.a)(s,2),p=b[0],m=b[1];return f.a.createElement(f.a.Fragment,null,f.a.createElement(ko,null,f.a.createElement(Oa.b,null),f.a.createElement(_o,{value:i,onChange:function(e){u(e.target.value.replace(/[^0-9]/g,""))}})),f.a.createElement(ko,null,f.a.createElement(Oa.a,null),f.a.createElement(_o,{value:p,onChange:function(e){m(e.target.value.replace(/[^0-9]/g,""))}})),f.a.createElement(ko,null,f.a.createElement(ye,{onClick:function(){return t(i,p)}},"Change"),f.a.createElement(ye,{onClick:o},"Clear")))})),Ro=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.dotArt;return{rowCount:t.present.dot.rowCount,columnCount:t.present.dot.columnCount}})),n=t.rowCount,a=t.columnCount,o=Object(r.useCallback)((function(t,n){e(ft({newRow:parseInt(t),newColumn:parseInt(n)}))}),[e]),c=Object(r.useCallback)((function(){e(Qe())}),[e]);return f.a.createElement(f.a.Fragment,null,f.a.createElement(Do,{onChangeArea:o,row:n,column:a,dotClear:c}))};function No(){var e=Object(te.a)(["\n  border: 1px solid orange;\n  width: 100%;\n  padding-left: 8px;\n  height: 24px;\n  outline: none;\n  cursor: pointer;\n  font-size: 12px;\n  color: white;\n  background: rgba(50, 50, 50, 1);\n  ","\n"]);return No=function(){return e},e}function Po(){var e=Object(te.a)(["\n      color: orange;\n      background: #59564f;\n    "]);return Po=function(){return e},e}function zo(){var e=Object(te.a)(["\n  overflow: hidden;\n  white-space: nowrap;\n  width: 100%;\n  line-height: 24px;\n  color: #0d0d0d;\n  padding-left: 8px;\n  height: 24px;\n  background: #f2e8dc;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  font-size: 12px;\n  border-top: 2px solid #0d0d0d;\n  ","\n  ","\n"]);return zo=function(){return e},e}function Fo(){var e=Object(te.a)(["\n  width: 100%;\n  height: 24px;\n  cursor: pointer;\n  display: flex;\n"]);return Fo=function(){return e},e}function Ho(){var e=Object(te.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n  max-height: 30vh;\n  overflow: auto;\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: #888;\n  }\n  &::-webkit-scrollbar-thumb:hover {\n    background: #555;\n  }\n"]);return Ho=function(){return e},e}function Mo(){var e=Object(te.a)(["\n      &:hover {\n        color: #1261a6;\n      }\n    "]);return Mo=function(){return e},e}function Go(){var e=Object(te.a)(["\n  outline: none;\n  font-size: 16px;\n  width: 100%;\n  height: 24px;\n  border: 1px solid #333333;\n  transition: all 0.2s ease-in-out;\n  color: #0d0d0d;\n  background: #f2e8dc;\n  ","\n\n  &:disabled {\n    background: #a69e94;\n    color: #59564f;\n  }\n"]);return Go=function(){return e},e}function Bo(){var e=Object(te.a)(["\n  display: flex;\n"]);return Bo=function(){return e},e}function Wo(){var e=Object(te.a)(["\n      color: #e83838;\n    "]);return Wo=function(){return e},e}function Vo(){var e=Object(te.a)(["\n  position: absolute;\n  top: 0;\n  right: 0.5rem;\n  color: #0d0d0d;\n  font-size: 24px;\n  cursor: pointer;\n  transition: 0.2s linear;\n  ","\n"]);return Vo=function(){return e},e}function Uo(){var e=Object(te.a)(["\n  position: relative;\n  font-size: 20px;\n  padding-left: 16px;\n  color: black;\n  background: #f2e8dc;\n"]);return Uo=function(){return e},e}function Yo(){var e=Object(te.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n"]);return Yo=function(){return e},e}var Ko=pe.b.div(Yo()),Zo=pe.b.div(Uo()),Jo=pe.b.div(Vo(),(function(e){return e.showLayers&&Object(pe.a)(Wo())})),Xo=pe.b.div(Bo()),Qo=pe.b.button(Go(),(function(e){return!e.disable&&Object(pe.a)(Mo())})),qo=pe.b.div(Ho()),$o=pe.b.div(Fo()),ec=pe.b.span(zo(),(function(e){return e.selected&&Object(pe.a)(Po())}),(function(e){return e.active?"display: none":""})),tc=pe.b.input(No(),(function(e){return e.active?"display: none":""})),nc=f.a.memo((function(e){var t=e.layerSelectIdx,n=e.layerData,a=e.shiftDown,o=e.showLayers,c=e.addNewLayerHandle,l=e.removeLayerHandle,i=e.mergeLayerHandle,u=e.moveUpHandle,s=e.moveDownHandle,b=e.selectLayerIdxHandle,p=e.renameLayerHandle,m=e.handleChangeTyping,O=e.handleChangeShowLayers,E=Object(r.useState)(!1),h=Object(d.a)(E,2),v=h[0],g=h[1],C=Object(r.useState)(""),j=Object(d.a)(C,2),x=j[0],A=j[1],I=Object(r.useRef)(null);Object(r.useEffect)((function(){A(n[t].layerName)}),[t,n]);var y=function(){g(!0)};Object(r.useEffect)((function(){v?(I.current.focus(),m(!0)):m(!1)}),[v,m]);return f.a.createElement(Ko,null,f.a.createElement(Zo,null,"Layers",f.a.createElement(Jo,{showLayers:o,onClick:O},f.a.createElement(pa.d,null))),f.a.createElement(Xo,null,f.a.createElement(Qo,{onClick:function(){c(a)},color:"#333333",baseColor:"#222222"},f.a.createElement(pa.j,null)),f.a.createElement(Qo,{onClick:function(){u(a)},color:"#333333",baseColor:"#222222",disable:t===n.length-1,disabled:t===n.length-1},f.a.createElement(pa.b,null)),f.a.createElement(Qo,{onClick:function(){s(a)},color:"#333333",baseColor:"#222222",disable:0===t,disabled:0===t},f.a.createElement(pa.a,null)),f.a.createElement(Qo,{color:"#333333",baseColor:"#222222",onClick:function(){g(!0)}},f.a.createElement(pa.g,null)),f.a.createElement(Qo,{onClick:i,color:"#333333",baseColor:"#222222",disable:0===t,disabled:0===t},f.a.createElement(pa.e,null)),f.a.createElement(Qo,{onClick:l,color:"#333333",baseColor:"#222222",disable:1===n.length,disabled:1===n.length},f.a.createElement(pa.c,null))),f.a.createElement(qo,null,n.map((function(e,n){return n===t?f.a.createElement($o,{key:n,selected:!0},f.a.createElement(tc,{value:x,ref:I,active:!v,onBlur:function(){return g(!1),m(!1),void p(x)},onChange:function(e){return A(e.target.value)},onKeyPress:function(e){return function(e){13!==e.kayCode&&"Enter"!==e.key||(g(!1),m(!1),p(x))}(e)}}),f.a.createElement(ec,{onClick:y,active:v,selected:!0},e.layerName)):f.a.createElement($o,{onClick:function(){return b(n)},key:n},f.a.createElement(ec,null,e.layerName))}))))})),rc=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.dotArt;return{layerList:t.present.dot.dotFrameList[t.present.dot.activeIdx].layerList,layerSelectIdx:t.present.dot.layerSelectIdx,layerData:t.present.dot.layerData}})),n=t.layerList,a=t.layerSelectIdx,o=t.layerData,c=Object(i.d)((function(e){var t=e.observer;return{shiftDown:t.shiftDown,showLayers:t.showLayers}})),l=c.shiftDown,u=c.showLayers,d=Object(r.useCallback)((function(t){e(pt(t))}),[e]),s=Object(r.useCallback)((function(){e(mt())}),[e]),b=Object(r.useCallback)((function(){e(Ot())}),[e]),p=Object(r.useCallback)((function(t){e(Et(t))}),[e]),m=Object(r.useCallback)((function(t){e(ht(t))}),[e]),O=Object(r.useCallback)((function(t){e(vt(t))}),[e]),E=Object(r.useCallback)((function(t){e(gt(t))}),[e]),h=Object(r.useCallback)((function(t){e(jr(t))}),[e]),v=Object(r.useCallback)((function(){e(kr())}),[e]);return f.a.createElement(nc,{layerList:n,layerSelectIdx:a,layerData:o,shiftDown:l,showLayers:u,addNewLayerHandle:d,removeLayerHandle:s,mergeLayerHandle:b,moveUpHandle:p,moveDownHandle:m,selectLayerIdxHandle:O,renameLayerHandle:E,handleChangeTyping:h,handleChangeShowLayers:v})};function fc(){var e=Object(te.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return fc=function(){return e},e}function ac(){var e=Object(te.a)(["\n  position: absolute;\n  z-index: 2;\n"]);return ac=function(){return e},e}function oc(){var e=Object(te.a)(["\n  background: ",";\n  width: 40px;\n  height: 40px;\n  border: 3px solid #afafaf;\n"]);return oc=function(){return e},e}function cc(){var e=Object(te.a)(["\n  z-index: 9;\n  margin-top: 24px;\n  margin-left: -16px;\n"]);return cc=function(){return e},e}function lc(){var e=Object(te.a)(["\n  z-index: 10;\n"]);return lc=function(){return e},e}function ic(){var e=Object(te.a)(["\n  display: flex;\n"]);return ic=function(){return e},e}var uc=pe.b.div(ic()),dc=pe.b.div(lc()),sc=pe.b.div(cc()),bc=pe.b.div(oc(),(function(e){return e.color?e.color:"#ffffff"})),pc=pe.b.div(ac()),mc=pe.b.div(fc()),Oc=f.a.memo((function(e){var t=e.leftColor,n=e.rightColor,a=e.changeLeftColor,o=e.changeRightColor,c=Object(r.useState)(!1),l=Object(d.a)(c,2),i=l[0],u=l[1],s=Object(r.useState)(!1),b=Object(d.a)(s,2),p=b[0],m=b[1],O=Object(r.useState)(""),E=Object(d.a)(O,2),h=E[0],v=E[1],g=Object(r.useState)(""),C=Object(d.a)(g,2),j=C[0],x=C[1];Object(r.useEffect)((function(){v(t),x(n)}),[t,n]);var A=function(e){"LEFT"===e?u(!i):m(!p)},I=function(e){"LEFT"===e?(u(!1),a(h)):(m(!1),o(j))};return f.a.createElement(uc,null,f.a.createElement(dc,null,f.a.createElement(bc,{onClick:function(){return A("LEFT")},color:h}),i?f.a.createElement(pc,null,f.a.createElement(mc,{onClick:function(){return I("LEFT")}}),f.a.createElement(po.ChromePicker,{disableAlpha:!0,color:h,onChange:function(e){v(e.hex)}})):null),f.a.createElement(sc,null,f.a.createElement(bc,{onClick:function(){return A("RIGHT")},color:j}),p?f.a.createElement(pc,null,f.a.createElement(mc,{onClick:function(){return I("RIGHT")}}),f.a.createElement(po.ChromePicker,{disableAlpha:!0,color:j,onChange:function(e){x(e.hex)}})):null))})),Ec=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.palettes;return{leftColor:t.leftColor,rightColor:t.rightColor}})),n=t.leftColor,a=t.rightColor,o=Object(r.useCallback)((function(t){e(Pf({color:t}))}),[e]),c=Object(r.useCallback)((function(t){e(zf({color:t}))}),[e]);return f.a.createElement(Oc,{leftColor:n,rightColor:a,changeLeftColor:o,changeRightColor:c})},hc=n(229),vc=n(230);function gc(){var e=Object(te.a)(["\n  color: #59564f;\n  border-radius: 5px;\n  width: 3rem;\n  height: 3rem;\n  text-align: center;\n  position: fixed;\n  bottom: 8px;\n\n  &:hover {\n    color: #0d0d0d;\n  }\n"]);return gc=function(){return e},e}var Cc=pe.b.div(gc()),jc=function(e){var t=e.isTyping,n=e.dotSize,a=e.openKeyBindDialog,o=e.keySet,c=Object(i.c)();return Object(r.useEffect)((function(){var e={};!function(t){var n,r=Object(hc.a)(t);try{var a=function(){var t=n.value;e[t.code]=function(e){e.preventDefault(),f(t.action)}};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}}(o);var r=document.getElementById("paintBox"),f=function(e){switch(e){case"UNDO":return c(ea.ActionCreators.undo()),void c(fa());case"REDO":return c(ea.ActionCreators.redo()),void c(fa());case"SWAP":return void c(Ff());case"PALETTE_UP":return void c(Uf());case"PALETTE_DOWN":return void c(Yf());case"PALETTE_LEFT":return void c(Kf());case"PALETTE_RIGHT":return void c(Zf());case"DOT":return void c(Ye(Ue));case"BUCKET":return void c(Ye("BUCKET"));case"PIKCER":return void c(Ye("PICKER"));case"ERASER":return void c(Ye("ERASER"));case"MOVE":return void c(Ye("MOVE"));case"SAMECOLOR":return void c(Ye("SAMECOLOR"));case"INCREASE_COLUMN":return void c(et());case"DECREASE_COLUMN":return void c(tt());case"INCREASE_ROW":return void c(nt());case"DECREASE_ROW":return void c(rt());case"INCREASE_DOTSIZE":return void c(yr());case"DECREASE_DOTSIZE":return void c(wr());case"MOVE_VIEWPORT_UP":return void r.scrollBy(0,-n);case"MOVE_VIEWPORT_RIGHT":return void r.scrollBy(n,0);case"MOVE_VIEWPORT_DOWN":return void r.scrollBy(0,n);case"MOVE_VIEWPORT_LEFT":return void r.scrollBy(-n,0);case"SAVE_DOTART":return void c(Dr(!0));default:return console.log("bind error")}},a=Object(vc.a)(window,e);return t&&a(),function(){a()}}),[t,n,o,c]),f.a.createElement(Cc,null,f.a.createElement(pa.f,{size:"2.5rem",onClick:a}))},xc=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.observer;return{isTyping:t.isTyping,dotSize:t.dotSize}})),n=t.isTyping,a=t.dotSize,o=Object(i.d)((function(e){return{keySet:e.keybind.keySet}})).keySet,c=Object(r.useCallback)((function(){e(Zt("KeyBind"))}),[e]);return f.a.createElement(jc,{isTyping:n,dotSize:a,openKeyBindDialog:c,keySet:o})};function Ac(){var e=Object(te.a)(["\n  position: absolute;\n  bottom: 16px;\n"]);return Ac=function(){return e},e}var Ic=pe.b.div(Ac()),yc=function(e){var t=e.mousePosition,n=e.dotSize,a=e.paintState,o=e.selectedPaintTool,c=e.rowCount,l=e.columnCount,i=e.onChangePaintStateHandle,u=e.onUpdateDotArtHandle,d=e.onAltDownHandle,s=e.onShiftDownHandle;return Object(r.useEffect)((function(){var e=function(e){u(o),i("IDLE")};return"DRAGGING"===a&&window.addEventListener("mouseup",e,!1),function(){window.removeEventListener("mouseup",e,!1)}}),[a,o,i,u]),Object(r.useEffect)((function(){var e,t,n=function(n){e=n.clientX,t=n.clientY},r=document.getElementById("paintBox"),f=r.parentNode,a=r.childNodes[0],o=function(n){n.preventDefault();var o=parseInt(r.scrollHeight/c);if(!(o>99||o<5)){var i=r.scrollTop,u=r.scrollLeft,d=f.getBoundingClientRect(),s=r.offsetTop===f.offsetTop,b=r.offsetLeft===a.offsetLeft,p=n.deltaY>0?-2:2;if(s){var m=100/(d.height/(t-d.y)),O=r.scrollTop/r.scrollHeight*100;i=(o+p)*c/100*(O+(m-O)/10)}if(b){var E=100/(d.width/(e-d.x)),h=r.scrollLeft/r.scrollWidth*100;u=(o+p)*l/100*(h+(E-h)/10)}r.scrollTo(u,i)}};return f.addEventListener("wheel",o),f.addEventListener("mousemove",n),function(){f.removeEventListener("wheel",o),f.removeEventListener("mousemove",n)}}),[c,l]),Object(r.useEffect)((function(){var e=function(e){"AltLeft"===e.code&&d(!1),"ShiftLeft"===e.code&&s(!1)},t=function(e){"AltLeft"===e.code&&d(!0),"ShiftLeft"===e.code&&s(!0)};return window.addEventListener("keyup",e,!1),window.addEventListener("keydown",t,!1),function(){window.removeEventListener("keyup",e,!1),window.removeEventListener("keydown",t,!1)}}),[d,s]),f.a.createElement(Ic,null,f.a.createElement("h5",null,n,"px"),f.a.createElement("h5",null,"[",l," x ",c,"]",""!==t.x&&"".concat(t.x,", ").concat(t.y)))},wc=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.observer;return{mousePosition:t.mousePosition,dotSize:t.dotSize}})),n=t.mousePosition,a=t.dotSize,o=Object(i.d)((function(e){var t=e.paintTool;return{paintState:t.paintState,selectedPaintTool:t.selectedPaintTool}})),c=o.paintState,l=o.selectedPaintTool,u=Object(i.d)((function(e){var t=e.dotArt;return{rowCount:t.present.dot.rowCount,columnCount:t.present.dot.columnCount}})),d=u.rowCount,s=u.columnCount,b=Object(r.useCallback)((function(t){e(Ke(t))}),[e]),p=Object(r.useCallback)((function(t){e(bt(t))}),[e]),m=Object(r.useCallback)((function(t){e(Sr(t))}),[e]),O=Object(r.useCallback)((function(t){e(Lr(t))}),[e]);return f.a.createElement(yc,{mousePosition:n,dotSize:a,paintState:c,selectedPaintTool:l,rowCount:d,columnCount:s,onChangePaintStateHandle:b,onUpdateDotArtHandle:p,onAltDownHandle:m,onShiftDownHandle:O})};function Sc(){var e=Object(te.a)(["\n  position: sticky;\n  max-height: 90vh;\n  width: 204px;\n  & > *:not(:first-child) {\n    margin: 4px 0px;\n  }\n"]);return Sc=function(){return e},e}function Lc(){var e=Object(te.a)(["\n  display: flex;\n  flex-direction: column;\n  left: 0px;\n  width: 200px;\n  & > * {\n    margin: 8px 0px;\n    max-width: 240px;\n    width: 200px;\n  }\n"]);return Lc=function(){return e},e}function Tc(){var e=Object(te.a)(["\n  display: flex;\n"]);return Tc=function(){return e},e}var kc=pe.b.div(Tc()),_c=pe.b.div(Lc()),Dc=pe.b.div(Sc()),Rc=function(){return f.a.createElement(f.a.Fragment,null,f.a.createElement(zn,null),f.a.createElement(kc,null,f.a.createElement(_c,null,f.a.createElement(Ra,null),f.a.createElement(ja,null),f.a.createElement(Ro,null),f.a.createElement(bo,null),f.a.createElement(Ec,null)),f.a.createElement(Cr,null),f.a.createElement(ba,null),f.a.createElement(Dc,null,f.a.createElement(Xr,null),f.a.createElement(So,null),f.a.createElement(rc,null),f.a.createElement(wc,null))),f.a.createElement(xc,null))},Nc=Object(l.f)((function(e){var t=e.match;return f.a.createElement(c.a,null,f.a.createElement(ee,{path:t.path},f.a.createElement(l.c,null,f.a.createElement(l.a,{path:[t.path,"".concat(t.path,"/dot")],component:Rc}))))})),Pc=n(232),zc=n(536),Fc=Object(Pc.a)({palette:{primary:{main:"#F2E8DC",light:"#F2F2F2",dark:"#59564F",contrastText:"#0D0D0D"},secondary:{main:"#E83838"}}}),Hc=function(){return f.a.createElement(zc.a,{theme:Fc},f.a.createElement(Kt.a,{maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"center"}},f.a.createElement(c.a,null,f.a.createElement(l.c,null,f.a.createElement(l.a,{component:Nc})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Mc=n(231),Gc=n(233),Bc=Object(Gc.a)(),Wc=Object(Of.createStore)(sa,Object(Mc.composeWithDevTools)(Object(Of.applyMiddleware)(Bc)));Bc.run(da),function(){try{var e=localStorage.getItem("dotArt_user");if(!e)return;Wc.dispatch(Y(e)),Wc.dispatch(K())}catch(t){console.log("localStorage is not working!")}}(),o.a.render(f.a.createElement(i.a,{store:Wc},f.a.createElement(c.a,null,f.a.createElement(Hc,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},61:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAUklEQVRYR+3UsQkAQAhDUd3J/RfQnbwNYnFFmm8rQnhgsrs3xFSVWsfMyP11nwRAAAG7wO7KHvj98+s+CYAAAnYBexERAAEE7AL2IiIAAgi4BR59ogXwC7msxgAAAABJRU5ErkJggg=="},62:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAVElEQVRYR+3UoQ0AQAhD0UOyG5b9x0DebVDEiZqPJSTNS2hU1T1iMlOtz8zI/XYfBEAAAbtAd8se+P3z7T4IgAACdgF7EREAAQTsAvYiIgACCLgFHo3ZzjG+nqs2AAAAAElFTkSuQmCC"}},[[247,1,2]]]);
//# sourceMappingURL=main.d3ac0657.chunk.js.map