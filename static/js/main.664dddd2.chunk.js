(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{252:function(e,t,n){e.exports=n(479)},257:function(e,t,n){},288:function(e,t,n){},297:function(e,t){},299:function(e,t){},309:function(e,t){},479:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(17),f=n.n(o),c=(n(257),n(70)),l=n(27),i=n(10),u=n(530),d=n(528),s=n(531),b=n(481),p=n(525),m=n(532),E=Object(p.a)((function(e){return{root:{display:"flex",maxWidth:"100%",overflow:"hidden"},title:{flexGrow:1},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},toolbar:{height:"64px"},content:{width:"100%",height:"100vh",flexGrow:1,padding:e.spacing(1),background:"#F2E8DC"}}})),O=a.a.memo(Object(l.f)((function(e){var t=e.children,n=e.history,r=e.user,o=e.onLogout,f=E();return a.a.createElement("div",{className:f.root,id:"mainBox"},a.a.createElement(d.a,null),a.a.createElement(u.a,{position:"fixed",className:f.appBar},a.a.createElement(s.a,null,a.a.createElement(b.a,{variant:"h6",className:f.title,noWrap:!0},"Dot Art"),r?a.a.createElement(a.a.Fragment,null,a.a.createElement(b.a,{variant:"h6"},r.username),a.a.createElement(m.a,{color:"inherit",onClick:o},"Logout")):a.a.createElement(m.a,{color:"inherit",onClick:function(){return n.push("/login")}},"Login"))),a.a.createElement("main",{className:f.content},a.a.createElement("div",{className:f.toolbar}),t))}))),g=n(7),v=n(3),h=n(36),C=n.n(h),x=n(14),j=n(542),A=n(539),y=n(31),I=n(214),S=n.n(I).a.create();S.interceptors.request.use((function(e){try{var t=localStorage.getItem("access_token");t&&(e.headers.common.Authorization="Bearer ".concat(t))}catch(n){console.log("localStorage is not working")}return e})),S.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var T,k,L=S,w=function(){return L.post("/api/auth/logout")},D=Object(j.a)("loading/START_LOADING",(function(e){return e})),_=Object(j.a)("loading/FINISH_LOADING",(function(e){return e})),R=Object(A.a)((T={},Object(g.a)(T,"loading/START_LOADING",(function(e,t){return Object(v.a)({},e,Object(g.a)({},t.payload,!0))})),Object(g.a)(T,"loading/FINISH_LOADING",(function(e,t){return Object(v.a)({},e,Object(g.a)({},t.payload,!1))})),T),{}),N=function(e){return[e,"".concat(e,"_SUCCESS"),"".concat(e,"_FAILURE")]};function F(e,t){var n="".concat(e,"_SUCCESS"),r="".concat(e,"_FAILURE");return C.a.mark((function a(o){var f;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(y.c)(D(e));case 2:return a.prev=2,a.next=5,Object(y.b)(t,o.payload);case 5:return f=a.sent,a.next=8,Object(y.c)({type:n,payload:f.data});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(2),a.next=14,Object(y.c)({type:r,payload:a.t0,error:!0});case 14:return a.next=16,Object(y.c)(_(e));case 16:case"end":return a.stop()}}),a,null,[[2,10]])}))}var P=C.a.mark(X),z=C.a.mark(J),H=N("user/CHECK"),M=Object(x.a)(H,3),G=M[0],W=M[1],B=M[2],V=Object(j.a)("user/TEMP_SET_USER",(function(e){return e})),U=Object(j.a)(G),Y=Object(j.a)("user/LOGOUT"),K=F(G,(function(){return L.get("/api/auth/check")}));function Z(){try{localStorage.removeItem("dotArt_user")}catch(e){console.log("localStorage is not working!")}}function X(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y.b)(w);case 3:localStorage.removeItem("dotArt_user"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),P,null,[[0,6]])}function J(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.d)(G,K);case 2:return e.next=4,Object(y.d)(B,Z);case 4:return e.next=6,Object(y.d)("user/LOGOUT",X);case 6:case"end":return e.stop()}}),z)}var Q=Object(A.a)((k={},Object(g.a)(k,"user/TEMP_SET_USER",(function(e,t){var n=t.payload;return Object(v.a)({},e,{user:n})})),Object(g.a)(k,W,(function(e,t){var n=t.payload;return Object(v.a)({},e,{user:n,checkError:null})})),Object(g.a)(k,B,(function(e,t){var n=t.payload;return Object(v.a)({},e,{user:null,checkError:n})})),Object(g.a)(k,"user/LOGOUT",(function(e){return Object(v.a)({},e,{user:null})})),k),{user:null,checkError:null}),q=a.a.memo((function(e){var t=e.children,n=e.path,o=Object(i.c)(),f=Object(i.d)((function(e){return{user:e.user.user}})).user,c=Object(r.useCallback)((function(){o(Y())}),[o]);return a.a.createElement(O,{window:document.window,path:n,user:f,onLogout:c},t)})),$=n(4),ee=n(12),te=n(534),ne=n(535),re=n(226),ae=n.n(re),oe=n(536),fe=n(215);function ce(e,t,n,r){return de(e,{pSize:n,c:t,duration:r,cssClassName:"dotArt-to-css"})}var le=function(e,t){e=e.flat();var n=function(e){return e%t.c*t.pSize+t.pSize},r=function(e){return parseInt(e/t.c,10)*t.pSize+t.pSize};switch(t.format){case"array":return e.reduce((function(e,t,a){return""!==t&&e.push({x:n(a),y:r(a),color:t}),e}),[]);default:return e.reduce((function(e,t,a){return""!==t?"".concat(e," ").concat(n(a),"px ").concat(r(a),"px ").concat(t,","):e}),"").slice(1,-1)}},ie=function(e,t){var n=Object(fe.generateAnimationIntervals)(e);return e.reduce((function(e,r,a){var o=e;try{var f=r.layer||r.get("layer")||0;if(f){var c=le(f,{pSize:t.pSize,c:t.c});""===c&&(c="0px 0px #00000000");var l=0===a?0:n[a]+.01,i=n[a+1];o["".concat(l,"%, ").concat(i,"%")]={boxShadow:"".concat(c,";height: ").concat(t.pSize,"px; width: ").concat(t.pSize,"px")}}}catch(u){console.error("Input data error: Each frame object must contain a grid value")}return o}),{})},ue=function(e,t){var n=le(e,t);return".".concat(t.cssClassName," {\n  box-shadow: ").concat(n,";\n  height: ").concat(t.pSize,"px;\n  width: ").concat(t.pSize,"px;\n}")},de=function(e,t){var n=ie(e,t),r="";for(var a in r+=".".concat(t.cssClassName," {\n  position: absolute;\n  "),r+="animation: x ".concat(t.duration,"s infinite;\n  "),r+="-webkit-animation: x ".concat(t.duration,"s infinite;\n  "),r+="-moz-animation: x ".concat(t.duration,"s infinite;\n  "),r+="-o-animation: x ".concat(t.duration,"s infinite;\n}\n\n"),r+="@keyframes x {\n",n)if(Object.prototype.hasOwnProperty.call(n,a)){var o=n[a].boxShadow;r+="".concat(a,"{\n  box-shadow: ").concat(o,"\n  }\n")}return r+="}"},se=n(5),be=n(21),pe=n.n(be);function me(){var e=Object($.a)(["",""]);return me=function(){return e},e}var Ee=function(e){var t=e.boxShadow,n=e.duration,r="anim-".concat(pe.a.generate()),o="".concat(r),f=Object(se.c)(me(),t).rules,c={position:"absolute",animation:"x ".concat(n,"s infinite"),animationName:o},l="@keyframes ".concat(o," {").concat(f,"}");return a.a.createElement("div",null,a.a.createElement("div",{className:"animation-container",style:c}),a.a.createElement("style",null,l))},Oe=a.a.memo((function(e){var t=e.dotSet,n=e.dotList,r=e.column,o=e.size,f=e.animation,c=e.duration,l=e.zIndex,i=e.opacity,u="string"===typeof o?parseFloat(o):o,d={position:"relative",top:"-".concat(u,"px"),left:"-".concat(u,"px")};return a.a.createElement("div",{className:"preview",style:d},function(){var e,o,d=r,s=i||1;if(f)return o=function(e,t,n){return ie(e,{pSize:n,c:t})}(n,d,u),a.a.createElement(Ee,{boxShadow:o,duration:c});e=function(e,t,n,r){return le(e,{format:r,pSize:n,c:t})}(t,d,u,"string");var b={previewWrapper:{position:"absolute",height:u,width:u,boxShadow:e,MozBoxShadow:e,WebkitBoxShadow:e,border:"0px",zIndex:l||"",opacity:s}};return a.a.createElement("div",{style:b.previewWrapper})}())})),ge=n(81);function ve(){var e=Object($.a)(["\n      color: #0d0d0d;\n      background: ",";\n      box-shadow: 0 0.1rem #666;\n      transform: translateY(4px);\n    "]);return ve=function(){return e},e}function he(){var e=Object($.a)(["\n      &:hover {\n        color: #0d0d0d;\n        background: ",";\n      }\n      &:active {\n        color: #0d0d0d;\n        background: ",";\n        box-shadow: 0 0.1rem #666;\n        transform: translateY(4px);\n      }\n    "]);return he=function(){return e},e}function Ce(){var e=Object($.a)(["\n      background: ",";\n      color: #fff;\n    "]);return Ce=function(){return e},e}function xe(){var e=Object($.a)(["\n  background-color: #f2f2f2;\n  font-size: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #59564f;\n  ","\n  width: ",";\n  height: ",";\n  border: 2px solid #59564f;\n  outline: none;\n  border-radius: 0.5rem;\n  text-align: center;\n  box-shadow: 0 0.3rem #999;\n  transition: all 0.05s ease-in-out;\n  ","\n\n  &:disabled {\n    background: #afafaf;\n    color: #777777;\n  }\n\n  ","\n"]);return xe=function(){return e},e}var je=se.b.button(xe(),(function(e){return e.baseColor&&Object(se.a)(Ce(),e.baseColor)}),(function(e){return e.width?"".concat(e.width,"px"):"100%"}),(function(e){return e.height?"".concat(e.height,"px"):"auto"}),(function(e){return!e.disable&&Object(se.a)(he(),(function(e){return e.color?"".concat(e.color):"#a69e94"}),(function(e){return e.color?"".concat(e.color):"#a69e94"}))}),(function(e){return!0===e.selected&&Object(se.a)(ve(),(function(e){return e.selectColor?"".concat(e.selectColor):"#a69e94"}))})),Ae=a.a.memo((function(e){var t=e.children,n=Object(ge.a)(e,["children"]);return a.a.createElement(je,n,t)})),ye=n(52),Ie=n(538);function Se(e,t){return new Array(e).fill().map((function(){return new Array(t).fill("")}))}function Te(e,t,n,r){for(var a=Se(n=n||e.length,r=r||e[0].length),o=0;o<n;o++)for(var f=0;f<r;f++)""!==e[o][f]?a[o][f]=e[o][f]:a[o][f]=t[o][f];return a}function ke(e,t,n,r){n=n||e[0].length,r=r||e[0][0].length;for(var a=t.map((function(e){return e.dotFrameIdx})),o=Se(n,r),f=0;f<n;f++)for(var c=0;c<r;c++)for(var l=a.length-1;l>=0;l--){var i=e[a[l]][f][c];if(""!==i){o[f][c]=i;break}}return o}function Le(e,t){return e.map((function(e){return Object(v.a)({},e,{layer:ke(e.layerList,t)})}))}function we(){var e=Object($.a)([""]);return we=function(){return e},e}function De(){var e=Object($.a)(["\n  overflow: auto;\n  max-width: 100%;\n  max-height: 100%;\n  border: 1px solid #9e9e9e;\n"]);return De=function(){return e},e}function _e(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  margin-bottom: 8px;\n  & > * {\n    margin: 8px;\n    max-width: 160px;\n  }\n"]);return _e=function(){return e},e}function Re(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n"]);return Re=function(){return e},e}var Ne,Fe,Pe=se.b.div(Re()),ze=se.b.div(_e()),He=se.b.div(De()),Me=se.b.div.attrs((function(e){var t=e.pixelSize,n=e.columnCount,r=e.rowCount;return{style:{width:"".concat(n*t,"px"),height:"".concat(r*t,"px")}}}))(we()),Ge=function(e){var t=e.dotFrameList,n=e.activeIdx,o=e.rowCount,f=e.columnCount,c=e.animationDuration,l=e.pixelSize,i=e.layerData,u=e.handleChangeAnimationDuration,d=e.handleChangePixelSize,s=Object(r.useState)(!0),b=Object(x.a)(s,2),p=b[0],m=b[1];return a.a.createElement(Pe,null,a.a.createElement(ze,null,a.a.createElement(Ie.a,{size:"small",variant:"outlined",type:"number",label:"Animation Duration",color:"secondary",value:c,onChange:function(e){return function(e){m(!1),e.target.value<=0||""===e.target.value?u(0):u(e.target.value)}(e)}}),a.a.createElement(Ie.a,{size:"small",variant:"outlined",type:"number",label:"PixelSize",color:"secondary",value:l,onChange:function(e){return function(e){d(e.target.value)}(e)}}),a.a.createElement(Ae,{onClick:function(){m(!p)},selected:p,selectColor:"#f05556",color:p?"#b71b2d":"#008000",width:"40",height:"40",baseColor:"#3db12a"},p?a.a.createElement(ye.e,null):a.a.createElement(ye.f,null))),a.a.createElement(He,null,a.a.createElement(Me,{pixelSize:l,columnCount:f,rowCount:o},!p&&a.a.createElement(Oe,{dotSet:ke(t[n].layerList,i),column:f,size:l}),p&&a.a.createElement(Oe,{dotList:Le(t,i),column:f,size:l,animation:p,duration:c}))))},We=n(29),Be="DOT",Ve="PICKER",Ue="MOVE",Ye=Object(j.a)("paintTool/CHANGE_PAINT_TOOL",(function(e){return e})),Ke=Object(j.a)("paintTool/CHANGE_PAINT_STATE",(function(e){return e})),Ze=Object(j.a)("paintTool/SET_DIRECTION",(function(e){return e})),Xe={selectedPaintTool:Be,paintState:"IDLE",direction:"LEFT"},Je=Object(A.a)((Ne={},Object(g.a)(Ne,"paintTool/CHANGE_PAINT_TOOL",(function(e,t){var n=t.payload;return Object(v.a)({},e,{selectedPaintTool:n})})),Object(g.a)(Ne,"paintTool/CHANGE_PAINT_STATE",(function(e,t){var n=t.payload;return Object(v.a)({},e,{paintState:n})})),Object(g.a)(Ne,"paintTool/SET_DIRECTION",(function(e,t){var n=t.payload;return Object(v.a)({},e,{direction:n})})),Ne),Xe),Qe=Object(j.a)("dot/CLEAR_DOT"),qe=Object(j.a)("dot/NEW_DOT_ART_PROJECT"),$e=Object(j.a)("dot/LOAD_DOT_ART",(function(e){return e})),et=Object(j.a)("dot/INCREASE_COLUMN"),tt=Object(j.a)("dot/DECREASE_COLUMN"),nt=Object(j.a)("dot/INCREASE_ROW"),rt=Object(j.a)("dot/DECREASE_ROW"),at=Object(j.a)("dot/CHANGE_DOT_AREA",(function(e){return{newRow:e.newRow,newColumn:e.newColumn}})),ot=Object(j.a)("dot/CHANGE_ACTIVE_IDX",(function(e){return e})),ft=Object(j.a)("dot/REMOVE_ACTIVE_DOT_ART"),ct=Object(j.a)("dot/COPY_ACTIVE_DOT_ART"),lt=Object(j.a)("dot/ADD_NEW_DOT_ART"),it=Object(j.a)("dot/CHANGE_ANIMATION_INTERVAL",(function(e,t){return{interval:e,activeIdx:t}})),ut=Object(j.a)("dot/CHANGE_ANIMATION_DURATION",(function(e){return e})),dt=Object(j.a)("dot/CHANGE_PIXEL_SIZE",(function(e){return e})),st=Object(j.a)("dot/REORDER_DOT_LIST",(function(e){return{startIdx:e.startIdx,endIdx:e.endIdx}})),bt=Object(j.a)("dot/UPDATE_DOT_ART",(function(e){return e})),pt=Object(j.a)("dot/ADD_NEW_LAYER",(function(e){return e})),mt=Object(j.a)("dot/REMOVE_LAYER"),Et=Object(j.a)("dot/MERGE_LAYER"),Ot=Object(j.a)("dot/MOVE_UP_LAYER",(function(e){return e})),gt=Object(j.a)("dot/MOVE_DOWN_LAYER",(function(e){return e})),vt=Object(j.a)("dot/SELECT_LAYER_IDX",(function(e){return e})),ht=Object(j.a)("dot/RENAME_LAYER",(function(e){return e}));function Ct(e){var t=100/e.length;return e.map((function(n,r){return Object(v.a)({},n,{interval:r===e.length?100:Math.round((r+1)*t*100)/100})}))}var xt={fakeDotArt:Se(16,16),dotFrameList:[{id:pe.a.generate(),layerList:[Se(16,16)],interval:100}],columnCount:16,rowCount:16,animationDuration:2,activeIdx:0,layerSelectIdx:0,layerData:[{layerName:"Layer 1",dotFrameIdx:0}],pixelSize:32},jt=Object(A.a)((Fe={},Object(g.a)(Fe,"dot/CLEAR_DOT",(function(e){return Object(We.a)(e,(function(t){var n=t.layerData[t.layerSelectIdx].dotFrameIdx;t.dotFrameList[e.activeIdx].layerList[n]=Se(t.rowCount,t.columnCount)}))})),Object(g.a)(Fe,"dot/NEW_DOT_ART_PROJECT",(function(){return Object(v.a)({},xt)})),Object(g.a)(Fe,"dot/LOAD_DOT_ART",(function(e,t){var n=t.payload;return Object(v.a)({},e,{activeIdx:0,fakeDotArt:Se(n.rowCount,n.columnCount),layerSelectIdx:0},n)})),Object(g.a)(Fe,"dot/INCREASE_COLUMN",(function(e){return Object(We.a)(e,(function(e){e.columnCount=e.columnCount+1;for(var t=0;t<e.dotFrameList.length;t++)e.dotFrameList[t].layerList.map((function(e){return e.map((function(e){return e.push("")}))}))}))})),Object(g.a)(Fe,"dot/DECREASE_COLUMN",(function(e){return Object(We.a)(e,(function(e){if(e.columnCount>1){e.columnCount=e.columnCount-1;for(var t=0;t<e.dotFrameList.length;t++)e.dotFrameList[t].layerList.map((function(e){return e.map((function(e){return e.pop()}))}))}}))})),Object(g.a)(Fe,"dot/INCREASE_ROW",(function(e){return Object(We.a)(e,(function(e){e.rowCount=e.rowCount+1;for(var t=0;t<e.dotFrameList.length;t++)e.dotFrameList[t].layerList.map((function(t){return t.push(new Array(e.columnCount).fill(""))}));e.fakeDotArt=Se(e.rowCount,e.columnCount)}))})),Object(g.a)(Fe,"dot/DECREASE_ROW",(function(e){return Object(We.a)(e,(function(e){if(e.rowCount>1){e.rowCount=e.rowCount-1;for(var t=0;t<e.dotFrameList.length;t++)e.dotFrameList[t].layerList.map((function(e){return e.pop()}));e.fakeDotArt=Se(e.rowCount,e.columnCount)}}))})),Object(g.a)(Fe,"dot/CHANGE_DOT_AREA",(function(e,t){var n=t.payload,r=n.newRow,a=n.newColumn;return Object(We.a)(e,(function(e){if(!(r<1||a<1)){for(var t=e.rowCount,n=e.columnCount,o=0;o<e.dotFrameList.length;o++){if(a>n)for(var f=n;f<a;f++)e.dotFrameList[o].layerList.map((function(e){return e.map((function(e){return e.push("")}))}));if(a<n)for(var c=a;c<n;c++)e.dotFrameList[o].layerList.map((function(e){return e.map((function(e){return e.pop()}))}));if(r>t)for(var l=t;l<r;l++)e.dotFrameList[o].layerList.map((function(e){return e.push(new Array(a).fill(""))}));if(r<t)for(var i=r;i<t;i++)e.dotFrameList[o].layerList.map((function(e){return e.pop()}))}e.rowCount=r,e.columnCount=a,e.fakeDotArt=Se(e.rowCount,e.columnCount)}}))})),Object(g.a)(Fe,"dot/CHANGE_ACTIVE_IDX",(function(e,t){var n=t.payload;return Object(v.a)({},e,{activeIdx:n})})),Object(g.a)(Fe,"dot/REMOVE_ACTIVE_DOT_ART",(function(e){if(1===e.dotFrameList.length)return Object(v.a)({},e);var t=e.dotFrameList,n=e.activeIdx,r=Ct([].concat(t.slice(0,n)).concat(t.slice(n+1)));return Object(v.a)({},e,{dotFrameList:r,activeIdx:n>r.length-1?n-1:n})})),Object(g.a)(Fe,"dot/COPY_ACTIVE_DOT_ART",(function(e){var t=e.dotFrameList,n=e.activeIdx,r=Ct([].concat(t.slice(0,n+1)).concat(Object(v.a)({},t[n],{id:pe.a.generate()})).concat(t.slice(n+1)));return Object(v.a)({},e,{dotFrameList:r,activeIdx:n+1})})),Object(g.a)(Fe,"dot/ADD_NEW_DOT_ART",(function(e){var t=Se(e.rowCount,e.columnCount),n={id:pe.a.generate(),layerList:new Array(e.layerData.length).fill(t),interval:0},r=Ct([].concat(e.dotFrameList.slice()).concat(n));return Object(v.a)({},e,{dotFrameList:r,activeIdx:r.length-1})})),Object(g.a)(Fe,"dot/CHANGE_ANIMATION_INTERVAL",(function(e,t){var n=t.payload,r=n.interval,a=n.activeIdx;return Object(We.a)(e,(function(e){var t=e.dotFrameList;t[a+1].interval<r?t[a].interval=t[a+1].interval:t[a].interval=0===a?r<=0?.1:r:t[a-1].interval>r?t[a-1].interval:r}))})),Object(g.a)(Fe,"dot/CHANGE_ANIMATION_DURATION",(function(e,t){var n=t.payload;return Object(v.a)({},e,{animationDuration:n})})),Object(g.a)(Fe,"dot/CHANGE_PIXEL_SIZE",(function(e,t){var n=t.payload;return Object(v.a)({},e,{pixelSize:n})})),Object(g.a)(Fe,"dot/REORDER_DOT_LIST",(function(e,t){var n=t.payload,r=n.startIdx,a=n.endIdx;return Object(We.a)(e,(function(e){var t=e.dotFrameList.reduce((function(e,t){return e.concat(t.interval)}),[]),n=e.dotFrameList.splice(r,1),o=Object(x.a)(n,1)[0];e.dotFrameList.splice(a,0,o),t.map((function(t,n){return e.dotFrameList[n].interval=t}));var f=e.activeIdx;f===r?e.activeIdx=a:f>r?f<=a&&(e.activeIdx-=1):f>=a&&(e.activeIdx+=1)}))})),Object(g.a)(Fe,"dot/UPDATE_DOT_ART",(function(e,t){var n,r=t.payload;if(r===Ve)return Object(v.a)({},e);if(r===Be){var a=e.layerData[e.layerSelectIdx].dotFrameIdx;n=Te(e.fakeDotArt,e.dotFrameList[e.activeIdx].layerList[a],e.rowCount,e.columnCount)}return"ERASER"===r&&(n=e.fakeDotArt),"BUCKET"===r&&(n=e.fakeDotArt),r===Ue&&(n=e.fakeDotArt),"SAMECOLOR"===r&&(n=e.fakeDotArt),Object(We.a)(e,(function(e){e.dotFrameList[e.activeIdx].layerList[e.layerData[e.layerSelectIdx].dotFrameIdx]=n}))})),Object(g.a)(Fe,"dot/ADD_NEW_LAYER",(function(e,t){var n,r,a=t.payload,o=e.layerSelectIdx,f=e.layerData,c=f.length,l=f[o].dotFrameIdx,i=[];if(a){for(var u=0;u<e.dotFrameList.length;u++)i=i.concat([e.dotFrameList[u].layerList[l].slice()]);n={layerName:"".concat(f[o].layerName," (copy)"),dotFrameIdx:c},r=e.dotFrameList.map((function(e,t){return Object(v.a)({},e,{layerList:[].concat(e.layerList.slice()).concat([i[t]])})}))}else i=[Se(e.rowCount,e.columnCount)],n={layerName:"Layer ".concat(c+1),dotFrameIdx:c},r=e.dotFrameList.map((function(e){return Object(v.a)({},e,{layerList:[].concat(e.layerList.slice()).concat(i)})}));var d=[].concat(f.slice(0,o+1)).concat(n).concat(f.slice(o+1));return Object(v.a)({},e,{dotFrameList:r,layerSelectIdx:o+1,layerData:d})})),Object(g.a)(Fe,"dot/REMOVE_LAYER",(function(e){if(1===e.layerData.length)return Object(v.a)({},e);var t=e.layerSelectIdx,n=e.layerData,r=n.length,a=n[t].dotFrameIdx,o=e.dotFrameList.map((function(e){return Object(v.a)({},e,{layerList:[].concat(e.layerList.slice(0,a)).concat(e.layerList.slice(a+1))})})),f=[].concat(n.slice(0,t)).concat(n.slice(t+1));return f=f.map((function(e){return e.dotFrameIdx>a?Object(v.a)({},e,{dotFrameIdx:e.dotFrameIdx-1}):Object(v.a)({},e)})),Object(v.a)({},e,{dotFrameList:o,layerData:f,layerSelectIdx:e.layerSelectIdx===r-1?e.layerSelectIdx-1:e.layerSelectIdx})})),Object(g.a)(Fe,"dot/MERGE_LAYER",(function(e){var t=e.layerSelectIdx,n=e.layerData,r=e.dotFrameList;if(1===n.length)return Object(v.a)({},e);if(0===t)return Object(v.a)({},e);for(var a=n[t].dotFrameIdx,o=n[t-1].dotFrameIdx,f=[],c=function(t){var n=r[t].layerList[a].slice(),c=r[t].layerList[o].slice(),l=r[t].layerList.reduce((function(t,r,f){return f===a?t.concat([Te(n,c,e.rowCount,e.columnCount)]):f===o?t:t.concat([r])}),[]),i={id:r[t].id,layerList:l,interval:r[t].interval};f.push(i)},l=0;l<r.length;l++)c(l);var i=[].concat(n.slice(0,t-1)).concat(n.slice(t)),u=n[t-1].dotFrameIdx;return i=i.map((function(e){return e.dotFrameIdx>u?Object(v.a)({},e,{dotFrameIdx:e.dotFrameIdx-1}):Object(v.a)({},e)})),Object(v.a)({},e,{dotFrameList:f,layerSelectIdx:e.layerSelectIdx-1,layerData:i})})),Object(g.a)(Fe,"dot/MOVE_UP_LAYER",(function(e,t){var n,r,a=t.payload,o=e.layerData.length,f=e.layerSelectIdx,c=e.layerData;return f===o-1?Object(v.a)({},e):(a?(n=[].concat(c.slice(0,0===f?0:f)).concat(c.slice(f+1)).concat(c.slice(f,f+1)),r=o-1):(n=[].concat(c.slice(0,0===f?0:f)).concat(c.slice(f+1,f+2)).concat(c.slice(f,f+1)).concat(c.slice(f+2)),r=f+1),Object(v.a)({},e,{layerSelectIdx:r,layerData:n}))})),Object(g.a)(Fe,"dot/MOVE_DOWN_LAYER",(function(e,t){var n,r,a=t.payload,o=e.layerSelectIdx,f=e.layerData;return 0===o?Object(v.a)({},e):(a?(n=[].concat(f.slice(o,o+1)).concat(f.slice(0,o)).concat(f.slice(o+1)),r=0):(n=[].concat(f.slice(0,o-1)).concat(f.slice(o,o+1)).concat(f.slice(o-1,o)).concat(f.slice(o+1)),r=o-1),Object(v.a)({},e,{layerSelectIdx:r,layerData:n}))})),Object(g.a)(Fe,"dot/SELECT_LAYER_IDX",(function(e,t){var n=t.payload;return Object(v.a)({},e,{layerSelectIdx:n})})),Object(g.a)(Fe,"dot/RENAME_LAYER",(function(e,t){var n=t.payload;return Object(v.a)({},e,{layerData:e.layerData.map((function(t,r){return r===e.layerSelectIdx?Object(v.a)({},t,{layerName:n}):Object(v.a)({},t)}))})})),Fe),xt),At=function(e){var t=e.dot,n=Object(i.c)(),o=Object(r.useCallback)((function(e){n(ut(e))}),[n]),f=Object(r.useCallback)((function(e){n(dt(parseInt(e)))}),[n]);return a.a.createElement(Ge,{dotFrameList:t.dotFrameList,activeIdx:t.activeIdx,rowCount:t.rowCount,columnCount:t.columnCount,animationDuration:t.animationDuration,pixelSize:t.pixelSize,layerData:t.layerData,handleChangeAnimationDuration:o,handleChangePixelSize:f})},yt=n(123),It=n.n(yt),St=n(237),Tt=(n(288),[{name:"offset",options:{offset:[0,8]}}]),kt=function(e){var t=e.children,n=e.tooltip,r=(e.disable,Object(ge.a)(e,["children","tooltip","disable"]));return a.a.createElement(St.a,Object.assign({},r,{tooltip:function(e){var t=e.arrowRef,r=e.tooltipRef,o=e.getArrowProps,f=e.getTooltipProps,c=e.placement;return a.a.createElement("div",f({ref:r,className:"tooltip-container"}),a.a.createElement("div",o({ref:t,className:"tooltip-arrow","data-placement":c})),n)},modifiers:Tt}),(function(e){var n=e.getTriggerProps,r=e.triggerRef;return a.a.createElement("span",n({ref:r,className:"trigger"}),t)}))},Lt=n(56),wt=n.n(Lt),Dt=n(57),_t=n.n(Dt);function Rt(){var e=Object($.a)(["\n  background: #9e9e9e;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 1.5rem;\n  height: 1.5rem;\n  font-size: 1rem;\n  color: #f0f0f0;\n  &:hover {\n    background: #6e6e6e;\n    color: #fff;\n  }\n"]);return Rt=function(){return e},e}function Nt(){var e=Object($.a)(["\n  height: fit-content;\n  background: rgb(255, 255, 255);\n  opacity: 1;\n  border: solid 1px black;\n  box-sizing: border-box;\n  display: flex;\n  align-items: end;\n  cursor: pointer;\n"]);return Nt=function(){return e},e}function Ft(){var e=Object($.a)(["\n  background-image: ",";\n  width: ","px;\n  height: ","px;\n"]);return Ft=function(){return e},e}function Pt(){var e=Object($.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  & > * {\n    margin: 8px;\n  }\n  overflow: auto;\n"]);return Pt=function(){return e},e}function zt(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  margin-bottom: 8px;\n  & > * {\n    margin: 8px;\n    max-width: 160px;\n  }\n"]);return zt=function(){return e},e}function Ht(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n"]);return Ht=function(){return e},e}var Mt=se.b.div(Ht()),Gt=se.b.div(zt()),Wt=se.b.div(Pt()),Bt=se.b.div(Ft(),(function(e){return 1===e.backgroundImg?"url(".concat(_t.a,")"):"url(".concat(wt.a,")")}),(function(e){return e.columnCount*e.size}),(function(e){return e.rowCount*e.size})),Vt=se.b.div(Nt()),Ut=se.b.div(Rt()),Yt=function(e){var t=e.backgroundImg,n=e.loadedData,r=e.removeDotArtHandle,o=e.loadDotArtHandle,f=e.clearStorageHandler;return a.a.createElement(Mt,null,a.a.createElement(Gt,null,a.a.createElement(Ae,{width:"150",height:"50",onClick:f},"Clear")),a.a.createElement(Wt,null,n&&0!==n.dotArt.length?n.dotArt.map((function(e,n){return a.a.createElement(Vt,{key:e.dot.id,onClick:function(){return o(e)}},a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Load this save data")},a.a.createElement(Bt,{size:"4",backgroundImg:t,columnCount:e.dot.columnCount,rowCount:e.dot.rowCount,key:e.dot.id},a.a.createElement(Oe,{dotList:Le(e.dot.dotFrameList,e.dot.layerData),column:e.dot.columnCount,size:"4",duration:e.dot.animationDuration,key:e.dot.id,animation:!0}))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Remove data")},a.a.createElement(Ut,{onClick:function(e){return function(e,t){t.stopPropagation(),r(e)}(n,e)}},a.a.createElement(It.a,null))))})):a.a.createElement("h1",null,"No Save Data")))},Kt=n(86),Zt={id:"example-cat",dotFrameList:[{id:pe.a.generate(),layerList:[[["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#ffffff","#ffffff","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#000000","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#ffffff","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46"],["#607d8b","#607d8b","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#607d8b"]]],interval:25},{id:pe.a.generate(),layerList:[[["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#ffffff","#ffffff","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#ffffff","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46"],["#607d8b","#607d8b","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#607d8b"]]],interval:50},{id:pe.a.generate(),layerList:[[["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#ffffff","#ffffff","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#ffffff","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46"],["#607d8b","#607d8b","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#607d8b"]]],interval:75},{id:pe.a.generate(),layerList:[[["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#ffffff","#ffcdd2","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffcdd2","#ffffff","#ffffff","#ffffff","#ffffff","#ffcdd2","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#000000","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#ffffff","#ffffff","#303f46"],["#303f46","#303f46","#303f46","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#303f46","#303f46"],["#607d8b","#607d8b","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#ffffff","#ffffff","#607d8b","#607d8b","#607d8b","#607d8b"]]],interval:100}],layerData:[{layerName:"Layer 1",dotFrameIdx:0}],columnCount:16,rowCount:16,animationDuration:2},Xt=[{id:pe.a.generate(),colors:["#393b2d","#75651a","#775b1c","#788260","#bab887","#dfd6c5"]},{id:pe.a.generate(),colors:["#4b73a4","#667883","#937e6a","#b89d80","#dadbd6","#faf9fb"]},{id:pe.a.generate(),colors:["#03070a","#374552","#3c8999","#959ea7","#9ccce3","#b8cde0"]},{id:pe.a.generate(),colors:["#171516","#303030","#553634","#92898c","#a70d01","#c4c2c3"]},{id:pe.a.generate(),colors:["#1d0e0b","#393e54","#5e260d"]}];pe.a.generate(),pe.a.generate(),pe.a.generate(),pe.a.generate(),pe.a.generate();function Jt(e,t,n){try{return t.setItem(e,JSON.stringify(n)),!0}catch(r){return!1}}function Qt(e){try{var t=e.getItem("dotArt_storage_v1");return!!t&&JSON.parse(t)}catch(n){return!1}}function qt(e){try{var t=e.getItem("dotArt_palettes_storage_v1");return!!t&&JSON.parse(t)}catch(n){return!1}}function $t(e){try{var t=e.getItem("dotArt_private_setting_v1");return!!t&&JSON.parse(t)}catch(n){return!1}}var en,tn=n(58),nn=Object(j.a)("dialog/CHANGE_TYPE_AND_OPEN",(function(e){return e})),rn=Object(j.a)("dialog/CLOSE_DIALOG"),an=Object(A.a)((en={},Object(g.a)(en,"dialog/CHANGE_TYPE_AND_OPEN",(function(e,t){var n=t.payload;return Object(v.a)({},e,{dialogType:n,open:!0})})),Object(g.a)(en,"dialog/CLOSE_DIALOG",(function(e){return Object(v.a)({},e,{open:!1})})),en),{dialogType:"",open:!1}),on=function(){var e=Object(i.c)(),t=Object(tn.b)().enqueueSnackbar,n=Object(i.d)((function(e){return{backgroundImg:e.observer.backgroundImg}})).backgroundImg,o=Object(r.useState)(Qt(localStorage)),f=Object(x.a)(o,2),c=f[0],l=f[1],u=Object(r.useCallback)((function(n){e($e(n.dot)),e(rn()),t("Load DotArt From LocalStorage",{variant:"success"})}),[e,t]);return a.a.createElement(Yt,{backgroundImg:n,loadedData:c,removeDotArtHandle:function(e){!function(e,t){var n=Qt(e);if(n){var r=0;return n.dotArt.splice(t,1),0===n.dotArt.length?r=-1:n.current>t&&(r=n.current-1),n.current=r,Jt("dotArt_storage_v1",e,n)}}(localStorage,e),l(Qt(localStorage))},loadDotArtHandle:u,clearStorageHandler:function(){localStorage.removeItem("dotArt_storage_v1"),l(Qt(localStorage)),t("Clear DotArt From LocalStorage",{variant:"success"})}})};function fn(){var e=Object($.a)(["\n  border: none;\n  margin-top: 0.5em;\n  width: 100%;\n  padding: 1em 0.5em 0;\n  text-align: left;\n  display: block;\n  resize: none;\n  height: 25em;\n  background-color: #f2e8dc;\n  font-weight: bold;\n  font-size: 15px;\n  color: #0d0d0d;\n  &::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #888;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: #555;\n  }\n"]);return fn=function(){return e},e}function cn(){var e=Object($.a)(["\n  width: ","px;\n  height: ","px;\n"]);return cn=function(){return e},e}function ln(){var e=Object($.a)(["\n  overflow: auto;\n  max-width: 100%;\n  max-height: 100%;\n  border: 1px solid #9e9e9e;\n  margin-bottom: 16px;\n"]);return ln=function(){return e},e}function un(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  margin-bottom: 8px;\n  & > * {\n    margin: 8px;\n    height: 30px;\n    width: 80px;\n  }\n"]);return un=function(){return e},e}function dn(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n"]);return dn=function(){return e},e}var sn=se.b.div(dn()),bn=se.b.div(un()),pn=se.b.div(ln()),mn=se.b.div(cn(),(function(e){return e.columnCount*e.pixelSize}),(function(e){return e.rowCount*e.pixelSize})),En=se.b.textarea(fn()),On=function(e){var t=e.dot,n=e.dialogType,o=e.saveFileHandler,f=e.handleChangeAnimationDuration,c=e.handleChangePixelSize,l=Object(tn.b)().enqueueSnackbar,i=Object(r.useState)(""),u=Object(x.a)(i,2),d=u[0],s=u[1],b=Object(r.useState)("single"),p=Object(x.a)(b,2),m=p[0],E=p[1],O=Object(r.useRef)(null),g=t.dotFrameList,v=t.layerData,h=t.columnCount,C=t.rowCount,j=t.activeIdx,A=t.pixelSize,y=t.animationDuration;Object(r.useEffect)((function(){s(n)}),[n]);var I,S,T;return a.a.createElement(sn,null,a.a.createElement(bn,null,a.a.createElement(Ie.a,{size:"small",variant:"outlined",type:"number",label:"Animation",color:"secondary",value:y,onChange:function(e){return function(e){e.target.value<=0||""===e.target.value?f(0):f(e.target.value)}(e)}}),a.a.createElement(Ie.a,{size:"small",variant:"outlined",type:"number",label:"PixelSize",color:"secondary",value:A,onChange:function(e){return function(e){c(e.target.value)}(e)}}),a.a.createElement(kt,{placement:"bottom",tooltip:a.a.createElement(a.a.Fragment,null,"View in single")},a.a.createElement(Ae,{selected:"single"===m,onClick:function(){return E("single")}},"single")),a.a.createElement(kt,{placement:"bottom",tooltip:a.a.createElement(a.a.Fragment,null,"View in gif format")},a.a.createElement(Ae,{selected:"gif"===m,onClick:function(){return E("gif")}},"gif")),"DownLoad"===d&&a.a.createElement(kt,{placement:"bottom",tooltip:a.a.createElement(a.a.Fragment,null,"View in spritesheet format")},a.a.createElement(Ae,{selected:"spritesheet"===m,onClick:function(){return E("spritesheet")}},"sprite"))),a.a.createElement(pn,null,a.a.createElement(mn,{pixelSize:A,columnCount:h,rowCount:C},a.a.createElement(Oe,{dotSet:ke(g[j].layerList,v),dotList:Le(g,v),column:h,size:A,animation:"gif"===m,duration:y}))),"DownLoad"===d&&a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Download in selected format",a.a.createElement("span",{className:"tooltip-name"},"you select ",a.a.createElement("span",{className:"tooltip-shortcut"},m," "),"format"))},a.a.createElement(Ae,{baseColor:"#0f0f0f",width:"160",onClick:function(){return o(m)}},"Download")),"Css"===d&&a.a.createElement(a.a.Fragment,null,a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Copy your Clipboard")},a.a.createElement(Ae,{width:"120",height:"40",onClick:function(e){O.current.select(),document.execCommand("copy"),e.target.focus(),l("Copy Success!",{variant:"success"})}},"Copy")),a.a.createElement(En,{ref:O,value:"single"===m?(I=ke(g[j].layerList,v),S=h,T=A,ue(I,{format:"string",pSize:T,c:S,cssClassName:"dotArt-to-css"})):ce(Le(g,v),h,A,y),readOnly:!0})))},gn=n(221),vn=n.n(gn),hn=n(222),Cn=n.n(hn),xn=n(223);function jn(e,t){var n=t.dotArt,r=t.cols,a=t.pixelSize,o=t.dotArtHeight,f=t.dotArtIdx,c=e;return n.layer.flat().forEach((function(e,t){if(e){c.fillStyle=e;var n=t%r,l=Math.floor(t/r);c.fillRect(n*a,l*a+o*f,a,a)}})),c}function An(e,t,n,r){var a=t.canvas,o=t.canvasHeight,f=t.canvasWidth,c=n.dotArt,l=n.dotArtHeight,i=n.dotArtWidth,u=n.pixelSize,d=Math.floor(i/u),s=a.getContext("2d");switch(s.canvas.width=f,s.canvas.height=o,e){case"spritesheet":r.forEach((function(e,t){s=jn(s,{dotArt:e,cols:d,pixelSize:u,dotArtHeight:l,dotArtIdx:t})}));break;default:s=jn(s,{dotArt:c,cols:d,pixelSize:u,dotArtHeight:l,dotArtIdx:0})}return s.getImageData(0,0,f,o).data}var yn=function(e,t){Object(xn.saveAs)(e,"".concat(Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8),".").concat(t))},In=function(e,t){var n=t.dotFrameList,r=t.layerData,a=t.columnCount,o=t.rowCount,f=t.animationDuration,c=t.activeIdx,l=t.pixelSize,i=Le(n,r),u=1e3*f,d=a*l,s=o*l,b=d,p="spritesheet"===e?s*i.length:s,m=document.createElement("canvas"),E=new vn.a(b,p);switch(E.pipe(Cn()()).on("finish",(function(){yn(this.toBlob(),"gif")})),E.setRepeat(0),E.setDispose(3),E.writeHeader(),e){case"single":case"spritesheet":An(e,{canvas:m,canvasHeight:p,canvasWidth:b},{dotArt:i[c],dotArtHeight:s,dotArtWidth:d,pixelSize:l},i),m.toBlob((function(e){yn(e,"png")}));break;default:var O=0;i.forEach((function(t,n,r){var a=n===r.length-1?100:i[n].interval,o=.01*(a-O)*u;E.setDelay(o),O=a,E.addFrame(An(e,{canvas:m,canvasHeight:p,canvasWidth:b},{dotArt:t,dotArtHeight:s,dotArtWidth:d,pixelSize:l}))})),E.finish()}},Sn=function(e){var t=e.dot,n=e.dialogType,o=Object(i.c)(),f=Object(r.useCallback)((function(e){o(ut(e))}),[o]),c=Object(r.useCallback)((function(e){o(dt(parseInt(e)))}),[o]);return a.a.createElement(On,{dot:t,dialogType:n,saveFileHandler:function(e){In(e,t)},handleChangeAnimationDuration:f,handleChangePixelSize:c})};function Tn(){var e=Object($.a)(["\n  color: black;\n  font-size: 13px;\n  margin-left: 8px;\n  line-height: 30px;\n"]);return Tn=function(){return e},e}function kn(){var e=Object($.a)(["\n  width: fit-content;\n  padding: 0px 8px;\n  font-size: 1.5rem;\n  color: #59564f;\n  border: 3px solid #59564f;\n  border-radius: 4px;\n  font-weight: bold;\n  font-family: monospace;\n  text-align: center;\n  line-height: 24px;\n"]);return kn=function(){return e},e}function Ln(){var e=Object($.a)(["\n  width: 100%;\n  margin: 4px 0px;\n  display: flex;\n"]);return Ln=function(){return e},e}function wn(){var e=Object($.a)(["\n  font-size: 24px;\n  font-weight: bold;\n"]);return wn=function(){return e},e}function Dn(){var e=Object($.a)(["\n  float: left;\n  border: 4px solid #59564f;\n  border-radius: 5px;\n  box-sizing: border-box;\n  float: left;\n  vertical-align: top;\n  padding: 0 20px 20px 20px;\n  min-width: 300px;\n"]);return Dn=function(){return e},e}function _n(){var e=Object($.a)(["\n  display: block;\n  height: 100%;\n  overflow: auto;\n  & > * {\n    margin: 8px;\n  }\n"]);return _n=function(){return e},e}var Rn=se.b.div(_n()),Nn=se.b.div(Dn()),Fn=se.b.span(wn()),Pn=se.b.div(Ln()),zn=se.b.div(kn()),Hn=se.b.span(Tn()),Mn=function(e){var t=e.paintTools,n=e.color,r=e.storage,o=e.misc;return a.a.createElement(Rn,null,a.a.createElement(Nn,null,a.a.createElement(Fn,null,"Misc Key"),o.category.map((function(e){return a.a.createElement(Pn,{key:e},a.a.createElement(zn,{key:e},o[e].key),a.a.createElement(Hn,null,o[e].helpText))}))),a.a.createElement(Nn,null,a.a.createElement(Fn,null,"Storage Key"),r.category.map((function(e){return a.a.createElement(Pn,{key:e},a.a.createElement(zn,{key:e},r[e].key),a.a.createElement(Hn,null,r[e].helpText))}))),a.a.createElement(Nn,null,a.a.createElement(Fn,null,"Paint Tools Key"),t.category.map((function(e){return a.a.createElement(Pn,{key:e},a.a.createElement(zn,{key:e},t[e].key),a.a.createElement(Hn,null,t[e].helpText))}))),a.a.createElement(Nn,null,a.a.createElement(Fn,null,"Color Tools Key"),n.category.map((function(e){return a.a.createElement(Pn,{key:e},a.a.createElement(zn,{key:e},n[e].key),a.a.createElement(Hn,null,n[e].helpText))}))))},Gn=function(){var e=Object(i.d)((function(e){var t=e.keybind;return{paintTools:t.paintTools,color:t.color,storage:t.storage,misc:t.misc}})),t=e.paintTools,n=e.color,r=e.storage,o=e.misc;return a.a.createElement(Mn,{paintTools:t,color:n,storage:r,misc:o})},Wn=n(65),Bn=n(41),Vn=n(80),Un=n.n(Vn);function Yn(){var e=Object($.a)(["\n  font-size: 16px;\n  border-radius: 16px;\n  width: 16px;\n  height: 16px;\n  background-color: orange;\n  color: gray;\n  &:hover {\n    background-color: gray;\n    color: orange;\n  }\n"]);return Yn=function(){return e},e}function Kn(){var e=Object($.a)(["\n  width: 50px;\n  height: 50px;\n  cursor: pointer;\n"]);return Kn=function(){return e},e}var Zn=se.b.div.attrs((function(e){return{style:{backgroundColor:e.color,border:"3px solid ".concat(e.selected?"black":"#ffffff00")}}}))(Kn()),Xn=se.b.div(Yn()),Jn=function(e){var t=e.color,n=e.paletteId,r=e.cellIdx,o=e.selected,f=e.onClickSelectHandle,c=e.onClickRemoveCellHandle;return a.a.createElement(Bn.b,{key:r,draggableId:"cell-".concat(n,"-").concat(r),index:r},(function(e){return a.a.createElement(Zn,Object.assign({color:t,selected:o,ref:e.innerRef,id:o?"select-color-cell":""},e.draggableProps,e.dragHandleProps,{onClick:function(){return f(n,r)}}),a.a.createElement(Xn,{onClick:function(e){e.stopPropagation(),c(n,r)}},a.a.createElement(ye.a,null)))}))},Qn=n(225),qn=n.n(Qn),$n=n(224),er=n.n($n);function tr(){var e=Object($.a)(["\n  width: 50px;\n  height: 50px;\n  cursor: pointer;\n  border: 3px solid #59564f;\n  color: #59564f;\n  padding: 5px;\n  transition: all 0.1s ease-out;\n  &:hover {\n    border: 3px solid #f2e8dc;\n    color: #f2e8dc;\n    background-color: #59564f;\n  }\n"]);return tr=function(){return e},e}function nr(){var e=Object($.a)(["\n  width: 25px;\n  height: 25px;\n  padding: 0;\n  outline: none;\n  border: none;\n  color: #0d0d0d;\n  background-color: inherit;\n  cursor: pointer;\n  transition: all 0.1s ease-out;\n  &:hover {\n    color: orange;\n  }\n"]);return nr=function(){return e},e}function rr(){var e=Object($.a)(["\n  display: flex;\n  align-items: center;\n  & > * {\n    margin-right: 8px;\n  }\n"]);return rr=function(){return e},e}function ar(){var e=Object($.a)(["\n  display: flex;\n  padding: 4px;\n  background-color: #f2e8dc;\n  align-items: center;\n  & > * {\n    margin-right: 8px;\n  }\n"]);return ar=function(){return e},e}var or=se.b.div(ar()),fr=se.b.div(rr()),cr=se.b.button(nr()),lr=se.b.div(tr()),ir=function(e){var t=e.palette,n=e.paletteIdx,r=e.selectId,o=e.onClickSelectHandle,f=e.onClickAddCellHandle,c=e.onClickRemoveCellHandle,l=e.onClickRemovePaletteHandle;return a.a.createElement(Bn.b,{key:t.id,draggableId:"palette-".concat(t.id),index:n},(function(e){return a.a.createElement(or,Object.assign({},e.draggableProps,{ref:e.innerRef}),a.a.createElement(kt,{tooltip:"Drag handle"},a.a.createElement(lr,e.dragHandleProps,a.a.createElement(er.a,{fontSize:"large"}))),a.a.createElement(Bn.c,{droppableId:t.id,type:"cell",direction:"horizontal",isDropDisabled:!(t.colors.length<7)},(function(e){return a.a.createElement(fr,Object.assign({ref:e.innerRef},e.droppableProps),t.colors.map((function(e,n){return a.a.createElement(Jn,{color:e,paletteId:t.id,cellIdx:n,key:"".concat(t.id).concat(n),selected:r.palette===t.id&&r.color===n,onClickSelectHandle:o,onClickRemoveCellHandle:c})})),e.placeholder,t.colors.length<7&&a.a.createElement(kt,{tooltip:a.a.createElement(a.a.Fragment,null,"Add color cell")},a.a.createElement(lr,{onClick:function(){return f(t.id)}},a.a.createElement(Un.a,{fontSize:"large"}))),a.a.createElement(kt,{tooltip:"Remove palette"},a.a.createElement(cr,{onClick:function(){return l(t.id)}},a.a.createElement(qn.a,{fontSize:"small"}))))})))}))};function ur(){var e=Object($.a)(["\n  width: 80px;\n  height: 40px;\n  margin-left: 10px;\n  outline: none;\n  background-color: #f2e8dc;\n  border: 1px solid #a69e94;\n  border-radius: 5px;\n  &:hover {\n    background-color: #59564f;\n    color: white;\n  }\n"]);return ur=function(){return e},e}function dr(){var e=Object($.a)(["\n  width: 240px;\n  height: 310px;\n  padding: 4px;\n  border: 4px solid #a69e94;\n  & > * {\n    margin-bottom: 16px;\n  }\n"]);return dr=function(){return e},e}function sr(){var e=Object($.a)(["\n  cursor: pointer;\n  align-items: center;\n  margin-top: 4px;\n  justify-content: center;\n  display: flex;\n  font-size: 16px;\n  color: orange;\n  border: 4px dotted orange;\n  background-color: #f2e8dc;\n"]);return sr=function(){return e},e}function br(){var e=Object($.a)(["\n  margin-right: 8px;\n  padding: 4px;\n  background: #a69e94;\n  width: 570px;\n"]);return br=function(){return e},e}function pr(){var e=Object($.a)(["\n  display: flex;\n"]);return pr=function(){return e},e}function mr(){var e=Object($.a)(["\n  width: 100%;\n  max-width: 820px;\n  height: 30px;\n  display: flex;\n"]);return mr=function(){return e},e}function Er(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  & > * {\n    margin: 8px;\n  }\n"]);return Er=function(){return e},e}var Or,gr=se.b.div(Er()),vr=se.b.div(mr()),hr=se.b.div(pr()),Cr=se.b.div(br()),xr=se.b.div(sr()),jr=se.b.div(dr()),Ar=se.b.button(ur()),yr=function(e){var t=e.palette,n=e.paletteName,o=e.savePaletteHandle,f=e.deletePaletteHandle,c=e.closePaletteHandle,l=e.changeTypingHandle,i=Object(r.useState)(t[0][0]),u=Object(x.a)(i,2),d=u[0],s=u[1],b=Object(r.useState)(t),p=Object(x.a)(b,2),m=p[0],E=p[1],O=Object(r.useState)(n),g=Object(x.a)(O,2),v=g[0],h=g[1],C=Object(r.useState)({palette:t[0].id,color:0}),j=Object(x.a)(C,2),A=j[0],y=j[1];Object(r.useEffect)((function(){s(m.find((function(e){return e.id===A.palette})).colors[A.color])}),[A]);var I=Object(r.useCallback)((function(e){document.getElementById("select-color-cell").style.backgroundColor=e.hex,s(e.hex)}),[]),S=function(e,t){var n=m.map((function(e){return e.id!==A.palette?e:{id:e.id,colors:Object(Kt.a)(e.colors.map((function(e,t){return t!==A.color?e:d})))}}));E(n),y({palette:e,color:t}),s(m.find((function(t){return t.id===e})).colors[t])},T=function(e){E(m.map((function(t){return t.id!==e?t:{id:t.id,colors:t.colors.concat("#".concat(Math.round(16777215*Math.random()).toString(16)))}}))),y({palette:e,color:m.find((function(t){return t.id===e})).colors.length})},k=function(e,t){var n=m.findIndex((function(t){return t.id===e}));E(m.map((function(e,r){return r!==n?e:{id:e.id,colors:[].concat(e.colors.slice(0,t)).concat(e.colors.slice(t+1))}}))),A.palette===e&&A.color>=t&&(A.color===t?y({palette:e,color:t-1}):y({palette:e,color:A.color-1}))},L=function(){E(m.concat({id:pe.a.generate(),colors:["#".concat(Math.round(16777215*Math.random()).toString(16))]}))},w=function(e){if(1!==m.length){var t=m.filter((function(t){return t.id!==e}));E(t),e===A.palette&&y({palette:t[0].id,color:0})}};return a.a.createElement(gr,null,a.a.createElement(vr,null,a.a.createElement(Ie.a,{size:"small",variant:"outlined",label:"Name",color:"secondary",value:v,fullWidth:!0,onChange:function(e){return function(e){var t=e.target.value;h(t.length>20?t.slice(0,20):t)}(e)},onFocus:function(){return l(!0)},onBlur:function(){return l(!1)}}),a.a.createElement(Ar,{onClick:function(){var e=m.map((function(e){return e.id!==A.palette?e:{id:e.id,colors:Object(Kt.a)(e.colors.map((function(e,t){return t!==A.color?e:d})))}}));o(e,v)}},"save"),a.a.createElement(Ar,{onClick:c},"close"),f&&a.a.createElement(Ar,{onClick:f},"delete")),a.a.createElement(hr,null,a.a.createElement(Bn.a,{onDragEnd:function(e){if(e.destination){var t=e.source,n=e.destination,r=Object(Kt.a)(m);if("palettes"===e.type){var a=e.source.index,o=e.destination.index,f=r.splice(a,1),c=Object(x.a)(f,1)[0];r.splice(o,0,c),E(r)}else{if(t.droppableId===n.droppableId){var l=r.reduce((function(e,t,r){return t.id===n.droppableId?r:e}),[]),i=r[l].colors.splice(t.index,1),u=Object(x.a)(i,1)[0];r[l].colors.splice(n.index,0,u),E(r)}else{var d=r.reduce((function(e,n){return n.id===t.droppableId?n.colors.splice(t.index,1):e}),[]),s=Object(x.a)(d,1)[0];r=r.map((function(e){return e.id===n.droppableId?e.colors.splice(n.index,0,s):e}))}y({palette:n.droppableId,color:n.index})}}}},a.a.createElement(Bn.c,{droppableId:"palettes",type:"palettes"},(function(e){return a.a.createElement(Cr,Object.assign({ref:e.innerRef},e.droppableProps),m.map((function(e,t){return a.a.createElement(ir,{key:e.id,palette:e,paletteIdx:t,selectId:A,onClickSelectHandle:S,onClickAddCellHandle:T,onClickRemoveCellHandle:k,onClickRemovePaletteHandle:w})})),e.placeholder,m.length<10&&a.a.createElement(xr,{onClick:L},"Add palette block",a.a.createElement(Un.a,{fontSize:"large"})))}))),a.a.createElement(jr,null,a.a.createElement(Wn.ChromePicker,{disableAlpha:!0,color:d,onChange:I}),a.a.createElement(Wn.SliderPicker,{color:d,onChange:I}))))},Ir=Object(j.a)("observer/CHANGE_TYPING_STATE",(function(e){return e})),Sr=Object(j.a)("observer/MOUSE_LEAVES_PAINT_AREA"),Tr=Object(j.a)("observer/CHANGE_DOT_BORDER_SIZE",(function(e){return e})),kr=Object(j.a)("observer/CHANGE_DOT_BORDER_COLOR",(function(e){return e})),Lr=Object(j.a)("observer/INCREASE_DOT_SIZE"),wr=Object(j.a)("observer/DECREASE_DOT_SIZE"),Dr=(Object(j.a)("observer/CHANGE_DOT_SIZE",(function(e){return e})),Object(j.a)("observer/ALT_DOWN",(function(e){return e}))),_r=Object(j.a)("observer/SHIFT_DOWN",(function(e){return e})),Rr=Object(j.a)("observer/LOAD_DATA",(function(e){return e})),Nr=Object(j.a)("observer/CHANGE_SHOW_LAYERS"),Fr=Object(j.a)("observer/CHANGE_BACKGROUND_IMG",(function(e){return e})),Pr=Object(j.a)("observer/SAVE_START",(function(e){return e})),zr=Object(A.a)((Or={},Object(g.a)(Or,"observer/CHANGE_TYPING_STATE",(function(e,t){var n=t.payload;return Object(v.a)({},e,{isTyping:n})})),Object(g.a)(Or,"observer/MOUSE_LEAVES_PAINT_AREA",(function(e){return Object(v.a)({},e,{mousePosition:{x:"",y:""}})})),Object(g.a)(Or,"observer/CHANGE_DOT_BORDER_SIZE",(function(e,t){var n=t.payload;return Object(v.a)({},e,{dotBorder:Object(v.a)({},e.dotBorder,{size:n})})})),Object(g.a)(Or,"observer/CHANGE_DOT_BORDER_COLOR",(function(e,t){var n=t.payload;return Object(v.a)({},e,{dotBorder:Object(v.a)({},e.dotBorder,{color:n})})})),Object(g.a)(Or,"observer/INCREASE_DOT_SIZE",(function(e){return Object(v.a)({},e,{dotSize:e.dotSize<100?e.dotSize+4:e.dotSize})})),Object(g.a)(Or,"observer/DECREASE_DOT_SIZE",(function(e){return Object(v.a)({},e,{dotSize:e.dotSize>4?e.dotSize-4:e.dotSize})})),Object(g.a)(Or,"observer/CHANGE_DOT_SIZE",(function(e,t){var n=t.payload;return Object(v.a)({},e,{dotSize:n})})),Object(g.a)(Or,"observer/ALT_DOWN",(function(e,t){var n=t.payload;return Object(v.a)({},e,{altDown:n})})),Object(g.a)(Or,"observer/SHIFT_DOWN",(function(e,t){var n=t.payload;return Object(v.a)({},e,{shiftDown:n})})),Object(g.a)(Or,"observer/LOAD_DATA",(function(e,t){var n=t.payload;return Object(v.a)({},e,{},n)})),Object(g.a)(Or,"observer/CHANGE_SHOW_LAYERS",(function(e){return Object(v.a)({},e,{showLayers:!e.showLayers})})),Object(g.a)(Or,"observer/CHANGE_BACKGROUND_IMG",(function(e,t){var n=t.payload;return Object(v.a)({},e,{backgroundImg:n})})),Object(g.a)(Or,"observer/SAVE_START",(function(e,t){var n=t.payload;return Object(v.a)({},e,{saveState:n})})),Or),{isTyping:!1,mousePosition:{x:"",y:""},startPosition:{x:"",y:""},dotSize:32,dotBorder:{size:1,color:"#000000"},showLayers:!0,backgroundImg:1,saveState:!1,altDown:!1,shiftDown:!1}),Hr=function(e){var t=e.dialogType,n=Object(i.c)(),o=Object(tn.b)().enqueueSnackbar,f=Object(r.useState)(""),c=Object(x.a)(f,2),l=c[0],u=c[1],d=Object(r.useState)(""),s=Object(x.a)(d,2),b=s[0],p=s[1],m=Object(r.useState)(""),E=Object(x.a)(m,2),O=E[0],g=E[1],h=Object(r.useState)(qt(localStorage)),C=Object(x.a)(h,2),j=C[0];C[1];Object(r.useEffect)((function(){var e,n,r;"EditPalette"===t?(e=j.palettes[j.current].palette,n=j.palettes[j.current].id,r=j.palettes[j.current].name):(e=[{id:pe.a.generate(),colors:["#ffffff","#000000"]}],n=pe.a.generate(),r="New Palette"),u(e),g(n),p(r)}),[]);return l&&a.a.createElement(yr,{palette:l,paletteName:b,savePaletteHandle:function(e,t){(function(e,t){try{var n=qt(e),r=t.id,a=t.name,o=t.palette;if(n&&n.palettes){var f=n.palettes.findIndex((function(e){return e.id===r}));console.log(f),-1!==f?n=Object(v.a)({},n,{current:f,palettes:n.palettes.map((function(e,t){return t!==f?e:{id:r,name:a,palette:o}}))}):(n.palettes.push(t),n.current=n.palettes.length-1)}else n=Object(v.a)({},n,{palettes:[t],current:0});return Jt("dotArt_palettes_storage_v1",e,n)}catch(c){return!1}})(localStorage,{id:O,name:t,palette:e})?o("Save Palette To LocalStorage",{variant:"success"}):o("Save Fail!",{variant:"error"}),n(rn())},deletePaletteHandle:1!==j.palettes.length?function(){(function(e,t){var n=qt(e);if(n){var r=0;return n.palettes.splice(t,1),0===n.palettes.length?r=-1:n.current>t&&(r=n.current-1),n.current=r,Jt("dotArt_palettes_storage_v1",e,n)}return!1})(localStorage,O)?o("Delete Palette To LocalStorage",{variant:"success"}):o("Delete Fail!",{variant:"error"}),n(rn())}:null,closePaletteHandle:function(){n(rn())},changeTypingHandle:function(e){n(Ir(e))}})},Mr=n(541),Gr=Object(p.a)((function(e){return{closeButton:{marginRight:e.spacing(1)}}})),Wr=Object(ee.a)((function(e){return{paperScrollPaper:{height:"calc(100% - 64px)",backgroundColor:"#F2E8DC"}}}))(Mr.a),Br=Object(ee.a)((function(e){return{root:{overflow:"hidden",height:"100%"}}}))(te.a),Vr=function(e){var t=e.dialogType,n=e.open,r=e.handleCloseDialog,o=Gr(),f=Object(i.d)((function(e){return{dot:e.dotArt.present.dot}})).dot,c=function(){r()};return a.a.createElement(a.a.Fragment,null,a.a.createElement(Wr,{open:n,fullWidth:!0,maxWidth:"xl",onClose:c},a.a.createElement(ne.a,null,a.a.createElement(oe.a,{color:"inherit",onClick:c,size:"small",className:o.closeButton},a.a.createElement(ae.a,null)),t),a.a.createElement(Br,{dividers:!0},n&&function(){switch(t){case"PreviewDialog":return a.a.createElement(At,{dot:f});case"DownloadDialog":return a.a.createElement(Sn,{dot:f,dialogType:t});case"LoadDialog":return a.a.createElement(on,null);case"CssDialog":return a.a.createElement(Sn,{dot:f,dialogType:t});case"KeybindDialog":return a.a.createElement(Gn,null);case"EditPalette":case"CreatePalette":return a.a.createElement(Hr,{dialogType:t});default:return null}}())))},Ur=a.a.memo((function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.dialog;return{dialogType:t.dialogType,open:t.open}})),n=t.dialogType,o=t.open,f=Object(r.useCallback)((function(){e(rn())}),[e]);return o&&a.a.createElement(Vr,{dialogType:n,open:o,handleCloseDialog:f})})),Yr=n(227),Kr=n.n(Yr);function Zr(){var e=Object($.a)(["\n      border-top: solid 3px #b22222;\n    "]);return Zr=function(){return e},e}function Xr(){var e=Object($.a)(["\n  padding: 0px;\n  margin: 0px;\n  border: none;\n  outline: none;\n  border-top: solid 3px black;\n  ","\n  width: 96px;\n  height: 19px;\n  font-size: 16px;\n  font-weight: bold;\n  background: rgba(0, 0, 0, 1);\n  text-align: center;\n  color: white;\n  &:focus {\n    background: rgba(230, 230, 230, 1);\n    color: rgba(0, 0, 0, 0.7);\n  }\n  -moz-appearance: textfield;\n  &::-webkit-outer-spin-button,\n  &::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"]);return Xr=function(){return e},e}function Jr(){var e=Object($.a)(["\n      &:hover {\n        background: #6e6e6e;\n        color: #fff;\n      }\n    "]);return Jr=function(){return e},e}function Qr(){var e=Object($.a)(["\n  background: #9e9e9e;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 24px;\n  height: 24px;\n  font-size: 1rem;\n  color: #f0f0f0;\n  ","\n"]);return Qr=function(){return e},e}function qr(){var e=Object($.a)(["\n          height: 96px;\n          width: ",";\n        "]);return qr=function(){return e},e}function $r(){var e=Object($.a)(["\n          width: 96px;\n          height: ",";\n        "]);return $r=function(){return e},e}function ea(){var e=Object($.a)(["\n  background-image: ",";\n  ","\n"]);return ea=function(){return e},e}function ta(){var e=Object($.a)(["\n  width: 96px;\n  height: 96px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return ta=function(){return e},e}function na(){var e=Object($.a)(["\n      opacity: 1;\n      border: solid 3px #b22222;\n    "]);return na=function(){return e},e}function ra(){var e=Object($.a)(["\n  position: relative;\n  width: 96px;\n  height: 96px;\n  outline: none;\n  opacity: 0.8;\n  border-radius: 0.3rem;\n  border: solid 3px black;\n  box-sizing: border-box;\n  cursor: pointer;\n  ","\n  &:hover {\n    & > span {\n      display: block;\n    }\n  }\n"]);return ra=function(){return e},e}function aa(){var e=Object($.a)(["\n  background: orange;\n  color: black;\n  text-align: center;\n  width: 24px;\n  height: 24px;\n  line-height: 24px;\n  position: absolute;\n  z-index: 1;\n  font-weight: 900;\n  font-size: 12px;\n"]);return aa=function(){return e},e}function oa(){var e=Object($.a)(["\n      top: ","px;\n    "]);return oa=function(){return e},e}function fa(){var e=Object($.a)(["\n  z-index: 1;\n  display: none;\n  left: 72px;\n  position: absolute;\n  width: 24px;\n  margin: 0px;\n  padding: 0px;\n  ",";\n"]);return fa=function(){return e},e}var ca=se.b.span(fa(),(function(e){return e.offsetTop&&Object(se.a)(oa(),e.offsetTop)})),la=se.b.div(aa()),ia=se.b.div(ra(),(function(e){return e.active&&Object(se.a)(na())})),ua=se.b.div(ta()),da=se.b.div(ea(),(function(e){return 1===e.backgroundImg?"url(".concat(_t.a,")"):"url(".concat(wt.a,")")}),(function(e){return e.columnCount>e.rowCount?Object(se.a)($r(),(function(e){return"".concat(e.rowCount*e.pixelSize,"px")})):Object(se.a)(qr(),(function(e){return"".concat(e.columnCount*e.pixelSize,"px")}))})),sa=se.b.div(Qr(),(function(e){return!e.disabled&&Object(se.a)(Jr())})),ba=se.b.input(Xr(),(function(e){return e.active&&Object(se.a)(Zr())})),pa=a.a.memo((function(e){var t=e.active,n=e.idx,o=e.dot,f=e.interval,c=e.columnCount,l=e.rowCount,i=e.backgroundImg,u=e.handleChangeIdx,d=e.handleCopyDotArt,s=e.handleRemoveDotArt,b=e.handleChangeInterval,p=e.lastIndex,m=Object(r.useState)(f),E=Object(x.a)(m,2),O=E[0],g=E[1],v=Object(r.useState)(),h=Object(x.a)(v,2),C=h[0],j=h[1];Object(r.useEffect)((function(){g(f)}),[f]),Object(r.useEffect)((function(){var e=Math.floor(c>l?96/c:96/l);e!==C&&(j(e),0===e&&j(1))}),[l,c,C]);var A=function(e){g(e.target.value)},y=Object(r.useCallback)((function(e){0!==e.target.value.length?(g(f),b(Math.round(100*e.target.value)/100,n)):g(f)}),[b,n,f]);return a.a.createElement(Bn.b,{key:n,draggableId:"dotArt-".concat(n),index:n},(function(e){return a.a.createElement(ia,Object.assign({active:!!t,onClickCapture:function(){return u(n)},ref:e.innerRef},e.draggableProps,e.dragHandleProps),a.a.createElement(la,null,n+1),a.a.createElement(ca,null,a.a.createElement(kt,{tooltip:a.a.createElement(a.a.Fragment,null,"Delete frame ")},a.a.createElement(sa,{onClick:s},a.a.createElement(It.a,{fontSize:"inherit"})))),a.a.createElement(ca,{offsetTop:"72"},a.a.createElement(kt,{tooltip:a.a.createElement(a.a.Fragment,null,"Copy frame ")},a.a.createElement(sa,{onClick:d},a.a.createElement(Kr.a,{fontSize:"inherit"})))),a.a.createElement(ua,null,a.a.createElement(da,{columnCount:c,rowCount:l,backgroundImg:i,pixelSize:C},a.a.createElement(Oe,{dotSet:o,column:c,size:C}))),a.a.createElement(kt,{placement:"bottom",tooltip:a.a.createElement(a.a.Fragment,null,"Change interval of this frame",p&&a.a.createElement("span",null," But last frame is only 100"))},a.a.createElement(ba,{active:!0,value:O,type:"number",onChange:A,onBlur:function(e){return y(e)},disabled:p,step:"0.1"})))}))}));function ma(){var e=Object($.a)(["\n  font-size: 16px;\n"]);return ma=function(){return e},e}function Ea(){var e=Object($.a)(["\n  z-index: 10;\n  background: #a69e94;\n  border-radius: 0.2rem;\n  width: 130px;\n  height: 100%;\n  margin: 0px 8px;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  position: sticky;\n  & > *:not(:last-child) {\n    width: 102px;\n    min-width: 102px;\n    height: 121px;\n  }\n  & > * {\n    margin: 8px;\n  }\n"]);return Ea=function(){return e},e}function Oa(){var e=Object($.a)(["\n  z-index: 1;\n  max-height: 92vh;\n  width: 130px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Oa=function(){return e},e}var ga=se.b.div(Oa()),va=se.b.div(Ea()),ha=se.b.span(ma()),Ca=a.a.memo((function(e){var t=e.dotFrameList,n=e.activeIdx,r=e.layerIdx,o=e.columnCount,f=e.rowCount,c=e.backgroundImg,l=e.handleChangeIdx,i=e.handleRemoveDotArt,u=e.handleCopyDotArt,d=e.handleAddDotArt,s=e.handleChangeInterval,b=e.handleReorderDotList;return a.a.createElement(ga,null,a.a.createElement(Bn.a,{onDragEnd:function(e){e.destination&&"dotList"===e.type&&b(e.source.index,e.destination.index)}},a.a.createElement(Bn.c,{droppableId:"dotList",type:"dotList"},(function(e){return a.a.createElement(va,Object.assign({ref:e.innerRef},e.droppableProps),t&&t.map((function(e,d){return a.a.createElement(pa,{active:n===d,idx:d,key:e.id,dot:e.layerList[r],interval:e.interval,columnCount:o,rowCount:f,backgroundImg:c,handleCopyDotArt:u,handleRemoveDotArt:i,handleChangeInterval:s,handleChangeIdx:l,lastIndex:t.length-1===d})})),e.placeholder,a.a.createElement(Ae,{width:"96",height:"30",onClick:function(){return d()}},a.a.createElement(Un.a,null),a.a.createElement(ha,null,"Add")))}))))})),xa=a.a.memo((function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.dotArt.present.dot;return{dotList:t.dotList,dotFrameList:t.dotFrameList,activeIdx:t.activeIdx,layerIdx:t.layerData[t.layerSelectIdx].dotFrameIdx,columnCount:t.columnCount,rowCount:t.rowCount}})),n=t.dotFrameList,o=t.activeIdx,f=t.layerIdx,c=t.columnCount,l=t.rowCount,u=Object(i.d)((function(e){return{backgroundImg:e.observer.backgroundImg}})).backgroundImg,d=Object(r.useCallback)((function(t){e(ot(t))}),[e]),s=Object(r.useCallback)((function(){e(ft())}),[e]),b=Object(r.useCallback)((function(){e(ct())}),[e]),p=Object(r.useCallback)((function(){e(lt())}),[e]),m=Object(r.useCallback)((function(t,n){e(it(t,n))}),[e]),E=Object(r.useCallback)((function(t,n){e(st({startIdx:t,endIdx:n}))}),[e]);return a.a.createElement(Ca,{dotFrameList:n,activeIdx:o,layerIdx:f,columnCount:c,rowCount:l,backgroundImg:u,handleChangeIdx:d,handleRemoveDotArt:s,handleCopyDotArt:b,handleAddDotArt:p,handleChangeInterval:m,handleReorderDotList:E})})),ja=n(543);function Aa(){var e=Object($.a)(["\n  font-size: 12px;\n  line-height: 26px;\n  margin-right: 8px;\n  white-space: nowrap;\n"]);return Aa=function(){return e},e}function ya(){var e=Object($.a)(["\n  width: 200px;\n  height: 40px;\n  display: flex;\n  background: #f2e8dc;\n  padding: 8px;\n  font-size: 8px;\n"]);return ya=function(){return e},e}function Ia(){var e=Object($.a)(["\n      color: #fff;\n      background: ",";\n      box-shadow: 0 0.05rem #666;\n      transform: translateY(4px);\n    "]);return Ia=function(){return e},e}function Sa(){var e=Object($.a)(["\n  width: 22px;\n  height: 22px;\n  padding: 0;\n  box-shadow: 0 0.2rem #666;\n  font-size: 14px;\n  border-radius: 0.3rem;\n  ","\n"]);return Sa=function(){return e},e}function Ta(){var e=Object($.a)(["\n  z-index: 10;\n  position: absolute;\n  display: flex;\n  width: 80px;\n  height: 30px;\n  top: 0.5rem;\n  left: 1rem;\n  opacity: ",";\n  transition: opacity 0.3s;\n  & > * {\n    margin: 0px 2px;\n  }\n"]);return Ta=function(){return e},e}function ka(){var e=Object($.a)(["\n  background-color: #a69e94;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 200px;\n  height: 200px;\n  overflow: hidden;\n"]);return ka=function(){return e},e}function La(){var e=Object($.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n"]);return La=function(){return e},e}var wa=se.b.div(La()),Da=se.b.div(ka()),_a=se.b.div(Ta(),(function(e){return e.hovered?1:0})),Ra=Object(se.b)(Ae)(Sa(),(function(e){return!0===e.selected&&Object(se.a)(Ia(),(function(e){return e.selectColor?"".concat(e.selectColor):"skyblue"}))})),Na=se.b.div(ya()),Fa=se.b.div(Aa()),Pa=a.a.memo((function(e){var t=e.animationDuration,n=e.dotFrameList,o=e.layerList,f=e.rowCount,c=e.columnCount,l=e.layerData,i=e.backgroundImg,u=e.handleOpenDialog,d=e.handleChangeAnimationDuration,s=Object(r.useState)(!0),b=Object(x.a)(s,2),p=b[0],m=b[1],E=Object(r.useState)(!0),O=Object(x.a)(E,2),g=O[0],v=O[1],h=Object(r.useState)(1),C=Object(x.a)(h,2),j=C[0],A=C[1],y=Object(r.useState)(!1),I=Object(x.a)(y,2),S=I[0],T=I[1],k=Object(r.useState)(Le(n,l)),L=Object(x.a)(k,2),w=L[0],D=L[1];Object(r.useEffect)((function(){D(Le(n,l))}),[p,n,l]),Object(r.useEffect)((function(){var e=document.getElementById("previewBlock"),t=g?200:100,n=f<c?t/c:t/f;A(n),e.style.backgroundImage="url(".concat(i?_t.a:wt.a,")"),e.style.position="absolute",e.style.width="".concat(Math.min(n*c,t),"px"),e.style.height="".concat(Math.min(n*f,t),"px")}),[f,c,i,g]),Object(r.useEffect)((function(){var e=document.getElementById("paintBox"),t=e.parentNode,n=e.childNodes[0],r=document.getElementById("previewBlock"),a=document.createElement("div");a.style.position="absolute",a.style.zIndex=1,a.style.border="3px solid red",a.style.display="none",a.style.cursor="pointer",a.attributes.draggable=!1,r.appendChild(a);var o=function(o){var f=e.offsetTop===t.offsetTop,c=e.offsetLeft===n.offsetLeft;if(f||c){if(a.style.display="block",f)a.style.top="".concat(e.scrollTop/e.scrollHeight*r.clientHeight,"px"),a.style.height="".concat(e.clientHeight/e.scrollHeight*r.clientHeight,"px");else{var l=Math.min(t.clientHeight/e.clientHeight*r.clientHeight,200);a.style.height="".concat(l,"px"),a.style.top="-".concat((l-r.clientHeight)/2,"px")}if(c)a.style.left="".concat(e.scrollLeft/e.scrollWidth*r.clientWidth,"px"),a.style.width="".concat(e.clientWidth/e.scrollWidth*r.clientWidth,"px");else{var i=Math.min(e.clientWidth/n.clientWidth*r.clientWidth,200);a.style.width="".concat(i,"px"),a.style.left="-".concat((i-r.clientWidth)/2,"px")}}else a.style.display="none"},f=!1;return new MutationObserver((function(e){e.forEach((function(e){o()}))})).observe(r,{attributes:!0}),e.addEventListener("scroll",o,{passive:!0}),a.addEventListener("mousedown",(function(e){f=!0}),{passive:!0}),document.body.addEventListener("mouseup",(function(e){f=!1}),{passive:!0}),document.body.addEventListener("mousemove",(function(t){if(f){var n=document.getElementById("previewWrapper").getBoundingClientRect(),r=t.clientX-n.x,a=t.clientY-n.y,o=e.scrollWidth/200*r-e.clientWidth/2,c=e.scrollHeight/200*a-e.clientHeight/2;e.scrollTo(o,c)}}),{passive:!0}),function(){e.removeEventListener("scroll",o,{passive:!0})}}),[]);var _=function(e){T(e)};return a.a.createElement(wa,{onMouseOver:function(){return _(!0)},onMouseOut:function(){return _(!1)}},a.a.createElement(_a,{hovered:S},a.a.createElement(kt,{placement:"bottom",tooltip:a.a.createElement(a.a.Fragment,null,"Toggle animation")},a.a.createElement(Ra,{onClick:function(){m(!p)},selected:p,selectColor:"#f05556",color:p?"#b71b2d":"#008000",baseColor:"#3db12a"},p?a.a.createElement(ye.e,null):a.a.createElement(ye.f,null))),a.a.createElement(kt,{placement:"bottom",tooltip:a.a.createElement(a.a.Fragment,null,"Preview zoom ",g?"Out":"In")},a.a.createElement(Ra,{onClick:function(){v(!g)}},g?a.a.createElement(ye.d,null):a.a.createElement(ye.c,null))),a.a.createElement(kt,{placement:"bottom",tooltip:a.a.createElement(a.a.Fragment,null,"Open preview dialog")},a.a.createElement(Ra,{onClick:function(){return u("PreviewDialog")}},a.a.createElement(ye.b,null)))),a.a.createElement(Da,{backgroundImg:i,id:"previewWrapper"},a.a.createElement("div",{id:"previewBlock"},!p&&a.a.createElement(Oe,{dotSet:ke(o,l),column:c,size:j}),p&&a.a.createElement(Oe,{dotList:w,column:c,size:j,animation:p,duration:t}))),a.a.createElement(kt,{placement:"bottom",tooltip:a.a.createElement(a.a.Fragment,null,"Show animation for ",t," seconds",a.a.createElement("span",null,"and animation divided by each frame what you set interval"))},a.a.createElement(Na,null,a.a.createElement(Fa,null,"Duration ",t,"S"),a.a.createElement(ja.a,{defaultValue:2,"aria-labelledby":"vertical-slider",valueLabelDisplay:"auto",step:1,color:"secondary",min:1,max:10,onChange:function(e,t){d(t)}}))))})),za=a.a.memo((function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.dotArt.present.dot;return{dotFrameList:t.dotFrameList,layerList:t.dotFrameList[t.activeIdx].layerList,rowCount:t.rowCount,columnCount:t.columnCount,animationDuration:t.animationDuration,layerData:t.layerData}})),n=t.dotFrameList,o=t.layerList,f=t.rowCount,c=t.columnCount,l=t.animationDuration,u=t.layerData,d=Object(i.d)((function(e){return{backgroundImg:e.observer.backgroundImg}})).backgroundImg,s=Object(r.useCallback)((function(t){e(nn(t))}),[e]),b=Object(r.useCallback)((function(t){e(ut(t))}),[e]),p=Object(r.useCallback)((function(t){e(Ir(t))}),[e]);return a.a.createElement(Pa,{animationDuration:l,dotFrameList:n,layerList:o,rowCount:f,columnCount:c,layerData:u,backgroundImg:d,handleOpenDialog:s,handleChangeAnimationDuration:b,handleChangeTyping:p})})),Ha=function(e){var t=e.rowIdx,n=e.columnIdx,r=e.onMouseOverHandler;return a.a.createElement("div",{onMouseOver:function(e){return r(e,t,n)},onMouseDown:function(e){return r(e,t,n)}})},Ma=a.a.memo((function(e){var t=e.dotLineIdx,n=e.onMouseOverHandler,o=Object(i.d)((function(e){return{columnCount:e.dotArt.present.dot.columnCount}}),i.b).columnCount,f=Object(r.useCallback)((function(){for(var e=[],r=0;r<o;r++)e.push(a.a.createElement(Ha,{key:r,rowIdx:t,columnIdx:r,onMouseOverHandler:n}));return e}),[o,t,n]);return a.a.createElement("div",null,f())}));function Ga(){var e=Object($.a)([""]);return Ga=function(){return e},e}function Wa(){var e=Object($.a)([""]);return Wa=function(){return e},e}var Ba=se.b.div(Wa()),Va=se.b.div(Ga()),Ua=a.a.memo((function(e){var t=e.layerList,n=e.fakeDotArt,r=e.columnCount,o=e.dotSize,f=e.layerIdx,c=e.selectedPaintTool,l=e.showLayers;return a.a.createElement(Ba,null,t.map((function(e,t){return t===f?a.a.createElement(Va,{key:"selectLayer",id:"selectLayer"},c===Be&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Oe,{key:t,dotSet:e,column:r,size:o,zIndex:2,opacity:1}),a.a.createElement(Oe,{dotSet:n,column:r,size:o,zIndex:10})),c!==Be&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Oe,{dotSet:n,column:r,size:o,zIndex:2}))):l?a.a.createElement(Oe,{key:t,dotSet:e,column:r,size:o,zIndex:1,opacity:.5}):void 0})))})),Ya=function(){var e=Object(i.d)((function(e){var t=e.dotArt.present.dot;return{layerList:t.dotFrameList[t.activeIdx].layerList,layerIdx:t.layerData[t.layerSelectIdx].dotFrameIdx,fakeDotArt:t.fakeDotArt,columnCount:t.columnCount}})),t=e.layerList,n=e.layerIdx,r=e.fakeDotArt,o=e.columnCount,f=Object(i.d)((function(e){var t=e.observer;return{dotSize:t.dotSize,showLayers:t.showLayers}})),c=f.dotSize,l=f.showLayers,u=Object(i.d)((function(e){return{selectedPaintTool:e.paintTool.selectedPaintTool}})).selectedPaintTool;return a.a.createElement(Ua,{layerList:t,fakeDotArt:r,columnCount:o,dotSize:c,layerIdx:n,selectedPaintTool:u,showLayers:l})};function Ka(){var e=Object($.a)(["\n          border: ","px solid ",";\n          width: ","px;\n          height: ","px;\n          min-width: ","px;\n          min-height: ","px;\n        "]);return Ka=function(){return e},e}function Za(){var e=Object($.a)(["\n      border: ","px solid ",";\n    "]);return Za=function(){return e},e}function Xa(){var e=Object($.a)(["\n  background-image: ",";\n  display: inline-flex;\n  justify-content: flex-start;\n  flex-direction: column;\n  width: auto;\n  height: fit-content;\n  margin: 0 auto;\n  padding: 0;\n  box-sizing: border-box;\n  ",";\n  & > :nth-child(n + 2) {\n    display: flex;\n    & > * {\n      z-index: 99;\n      cursor: cell;\n      box-sizing: border-box;\n      :hover {\n        background: rgba(255, 255, 255, 0.2);\n      }\n      ",";\n    }\n  }\n"]);return Xa=function(){return e},e}function Ja(){var e=Object($.a)(["\n  display: flex;\n  box-sizing: border-box;\n  touch-action: none;\n  overflow: auto;\n"]);return Ja=function(){return e},e}function Qa(){var e=Object($.a)(["\n  z-index: 0;\n  width: 100%;\n  height: 92vh;\n  max-height: 92vh;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  overflow: hidden;\n  background: #a69e94;\n  margin-right: 8px;\n"]);return Qa=function(){return e},e}var qa,$a=se.b.div(Qa()),eo=se.b.div(Ja()),to=se.b.div(Xa(),(function(e){return 1===e.backgroundImg?"url(".concat(_t.a,")"):"url(".concat(wt.a,")")}),(function(e){return Object(se.a)(Za(),e.borderSize,e.borderColor)}),(function(e){return Object(se.a)(Ka(),e.borderSize,e.borderColor,e.dotSize,e.dotSize,e.dotSize,e.dotSize)})),no=a.a.memo((function(e){var t=e.border,n=e.dotSize,o=e.rowCount,f=(e.columnCount,e.backgroundImg),c=e.onWheelHandle,l=e.onChangePaintStateHandle,i=e.onDotActionHandle,u=e.onSetDirectionHandle,d=e.onLeavesPaintAreaHandle,s=Object(r.useCallback)((function(e){e.preventDefault(),1!==e.button&&(u(0===e.button?"LEFT":"RIGHT"),l("DRAGGING"))}),[l,u]),b=Object(r.useCallback)((function(e,t,n){e.preventDefault(),i(t,n)}),[i]),p=Object(r.useCallback)((function(){for(var e=[],t=0;t<o;t++)e.push(a.a.createElement(Ma,{key:t,dotLineIdx:t,onMouseDownHandler:s,onMouseOverHandler:b}));return e}),[o,s,b]);return a.a.createElement($a,{onWheel:function(e){return c(e)},onContextMenu:function(e){return e.preventDefault()}},a.a.createElement(eo,{id:"paintBox"},a.a.createElement(to,{dotSize:n,borderColor:t.color,borderSize:0===t.size||n<5?0:n<17?1:t.size,backgroundImg:f,onMouseLeave:d,onMouseDownCapture:s,onContextMenu:function(e){return e.preventDefault()}},a.a.createElement(Ya,null),p())))})),ro=n(28),ao=C.a.mark(go),oo=N("auth/SIGNUP"),fo=Object(x.a)(oo,3),co=fo[0],lo=fo[1],io=fo[2],uo=N("auth/LOGIN"),so=Object(x.a)(uo,3),bo=so[0],po=so[1],mo=so[2],Eo=(Object(j.a)("auth/CHANGE_FILED",(function(e){return{form:e.form,key:e.key,value:e.value}})),Object(j.a)("auth/INITIALIZE_FORM",(function(e){return e})),Object(j.a)("auth/RESET_ERROR"),Object(j.a)(co,(function(e){return{username:e.username,password:e.password}})),Object(j.a)(bo,(function(e){return{username:e.username,password:e.password}})),F(co,(function(e){var t=e.username,n=e.password;return L.post("/api/auth/signup",{username:t,password:n})}))),Oo=F(bo,(function(e){var t=e.username,n=e.password;return L.post("/api/auth/login",{username:t,password:n})}));function go(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.d)(co,Eo);case 2:return e.next=4,Object(y.d)(bo,Oo);case 4:case"end":return e.stop()}}),ao)}var vo,ho,Co={signup:{username:"",password:"",passwordConfirm:""},login:{username:"",password:""}},xo=Object(A.a)((qa={},Object(g.a)(qa,"auth/CHANGE_FILED",(function(e,t){var n=t.payload,r=n.form,a=n.key,o=n.value;return Object(We.a)(e,(function(e){e[r][a]=o}))})),Object(g.a)(qa,"auth/INITIALIZE_FORM",(function(e,t){var n=t.payload;return Object(v.a)({},e,Object(g.a)({authError:null},n,Co[n]))})),Object(g.a)(qa,"auth/RESET_ERROR",(function(e){return Object(v.a)({},e,{authError:null})})),Object(g.a)(qa,lo,(function(e,t){var n=t.payload;return Object(v.a)({},e,{authError:null,auth:n})})),Object(g.a)(qa,io,(function(e,t){var n=t.payload;return Object(v.a)({},e,{authError:n})})),Object(g.a)(qa,po,(function(e,t){var n=t.payload;return Object(v.a)({},e,{authError:null,auth:n})})),Object(g.a)(qa,mo,(function(e,t){var n=t.payload;return Object(v.a)({},e,{authError:n})})),qa),Co),jo=(Object(j.a)("palettes/LOAD_PALETTES",(function(e){return e})),Object(j.a)("palettes/SELECT_LEFT_COLOR",(function(e){return{color:e.color,paletteId:e.paletteId,selectIdx:e.selectIdx}}))),Ao=Object(j.a)("palettes/SELECT_RIGHT_COLOR",(function(e){return{color:e.color}})),yo=Object(j.a)("palettes/SWAP_LEFT_RIGHT_COLOR"),Io=Object(j.a)("palettes/SELECT_COLOR_CELL",(function(e){return{paletteId:e.paletteId,selectIdx:e.selectIdx}})),So=(Object(j.a)("palettes/INSERT_NEW_PALETTE"),Object(j.a)("palettes/MOVE_UP_PALETTE_CELL")),To=Object(j.a)("palettes/MOVE_DOWN_PALETTE_CELL"),ko=Object(j.a)("palettes/MOVE_LEFT_PALETTE_CELL"),Lo=Object(j.a)("palettes/MOVE_RIGHT_PALETTE_CELL"),wo={palettes:Xt,selectColorId:{paletteId:Xt[0].id,colorId:0},leftColor:"#000000",rightColor:"#ffffff",trashCan:[],tempPalette:["#000000","#f0f0f0","#ffffff"]},Do=Object(A.a)((vo={},Object(g.a)(vo,"palettes/LOAD_PALETTES",(function(e,t){t.payload;return Object(v.a)({},e)})),Object(g.a)(vo,"palettes/SELECT_LEFT_COLOR",(function(e,t){var n=t.payload,r=n.color,a=n.paletteId,o=n.selectIdx;return Object(v.a)({},e,{leftColor:r,selectColorId:{paletteId:a,colorId:o},trashCan:e.trashCan.concat(r)})})),Object(g.a)(vo,"palettes/SELECT_RIGHT_COLOR",(function(e,t){var n=t.payload.color;return Object(v.a)({},e,{rightColor:n,trashCan:e.trashCan.concat(n)})})),Object(g.a)(vo,"palettes/SWAP_LEFT_RIGHT_COLOR",(function(e){return Object(v.a)({},e,{leftColor:e.rightColor,rightColor:e.leftColor})})),Object(g.a)(vo,"palettes/SELECT_COLOR_CELL",(function(e,t){var n=t.payload,r=n.paletteId,a=n.selectIdx;return Object(v.a)({},e,{selectColorId:{paletteId:r,colorId:a}})})),Object(g.a)(vo,"palettes/MOVE_UP_PALETTE_CELL",(function(e){return Object(We.b)(e,(function(e){var t=e.selectColorId.paletteId,n=e.palettes.findIndex((function(e){return e.id===t}));n>0&&e.palettes[n-1].colors.length>0&&(e.palettes[n-1].colors.length-1>=e.selectColorId.colorId?e.selectColorId={paletteId:e.palettes[n-1].id,colorId:e.selectColorId.colorId}:e.selectColorId={paletteId:e.palettes[n-1].id,colorId:e.palettes[n-1].colors.length-1}),e.leftColor=e.palettes.filter((function(t){return t.id===e.selectColorId.paletteId}))[0].colors[e.selectColorId.colorId]}))})),Object(g.a)(vo,"palettes/MOVE_DOWN_PALETTE_CELL",(function(e){return Object(We.b)(e,(function(e){var t=e.selectColorId.paletteId,n=e.palettes.findIndex((function(e){return e.id===t}));n<e.palettes.length-1&&e.palettes[n+1].colors.length>0&&(e.palettes[n+1].colors.length-1>=e.selectColorId.colorId?e.selectColorId={paletteId:e.palettes[n+1].id,colorId:e.selectColorId.colorId}:e.selectColorId={paletteId:e.palettes[n+1].id,colorId:e.palettes[n+1].colors.length-1}),e.leftColor=e.palettes.filter((function(t){return t.id===e.selectColorId.paletteId}))[0].colors[e.selectColorId.colorId]}))})),Object(g.a)(vo,"palettes/MOVE_LEFT_PALETTE_CELL",(function(e){return Object(We.b)(e,(function(e){e.selectColorId={paletteId:e.selectColorId.paletteId,colorId:e.selectColorId.colorId<=0?e.selectColorId.colorId:e.selectColorId.colorId-1},e.leftColor=e.palettes.filter((function(t){return t.id===e.selectColorId.paletteId}))[0].colors[e.selectColorId.colorId]}))})),Object(g.a)(vo,"palettes/MOVE_RIGHT_PALETTE_CELL",(function(e){return Object(We.b)(e,(function(e){var t=e.selectColorId.paletteId;e.palettes.filter((function(e){return e.id===t}))[0].colors.length-1>e.selectColorId.colorId&&e.selectColorId.colorId++,e.leftColor=e.palettes.filter((function(t){return t.id===e.selectColorId.paletteId}))[0].colors[e.selectColorId.colorId]}))})),vo),wo),_o=(Object(j.a)("keybind/CHANGE_KEY_BIND",(function(e){return{action:e.action,key:e.key}})),Object(v.a)({},{paintTools:{DOT:{key:"Q",code:"KeyQ",helpText:"Pen tool"},BUCKET:{key:"B",code:"KeyB",helpText:"Bucket tool"},PICKER:{key:"P",code:"KeyP",helpText:"Color picker tool"},ERASER:{key:"E",code:"KeyE",helpText:"Eraser tool"},MOVE:{key:"M",code:"KeyM",helpText:"Move tool"},SAMECOLOR:{key:"A",code:"KeyA",helpText:"Bucket all same colors pixel"},category:["DOT","BUCKET","PICKER","ERASER","MOVE","SAMECOLOR"]},color:{SWAP:{key:"X",code:"KeyX",helpText:"Swap first/second Color"},PALETTE_UP:{key:"\u2191",code:"ArrowUp",helpText:"Select palette move up"},PALETTE_DOWN:{key:"\u2193",code:"ArrowDown",helpText:"Select palette move down"},PALETTE_LEFT:{key:"\u2190",code:"ArrowLeft",helpText:"Select palette move left"},PALETTE_RIGHT:{key:"\u2192",code:"ArrowRight",helpText:"Select palette move right"},category:["SWAP","PALETTE_UP","PALETTE_DOWN","PALETTE_LEFT","PALETTE_RIGHT"]},storage:{SAVE_DOTART:{key:"ctrl + S",code:"$mod+KeyS",helpText:"Save to localStorage"},LOAD_DOTART:{key:"alt + L",code:"Alt+KeyL",helpText:"Open load dialog"},category:["SAVE_DOTART","LOAD_DOTART"]},misc:{INCREASE_DOTSIZE:{key:"-",code:"Equal",helpText:"Increase dot size"},DECREASE_DOTSIZE:{key:"+",code:"Minus",helpText:"Decrease dot size"},INCREASE_COLUMN:{key:"ctrl + \u2192",code:"$mod+ArrowRight",helpText:"Column + 1"},DECREASE_COLUMN:{key:"ctrl + \u2190",code:"$mod+ArrowLeft",helpText:"Column - 1"},INCREASE_ROW:{key:"ctrl + \u2193",code:"$mod+ArrowDown",helpText:"Row + 1"},DECREASE_ROW:{key:"ctrl + \u2191",code:"$mod+ArrowUp",helpText:"Row - 1"},UNDO:{key:"ctrl + Z",code:"$mod+KeyZ",helpText:"Undo"},REDO:{key:"ctrl + shift + Z",code:"$mod+Shift+KeyZ",helpText:"Redo"},MOVE_VIEWPORT_UP:{key:"shift + \u2191",code:"Shift+ArrowUp",helpText:"Move viewport up"},MOVE_VIEWPORT_RIGHT:{key:"shift + \u2192",code:"Shift+ArrowRight",helpText:"Move viewport right"},MOVE_VIEWPORT_DOWN:{key:"shift + \u2193",code:"Shift+ArrowDown",helpText:"Move viewport down"},MOVE_VIEWPORT_LEFT:{key:"shift + \u2190",code:"Shift+ArrowLeft",helpText:"Move viewport left"},category:["INCREASE_DOTSIZE","DECREASE_DOTSIZE","INCREASE_COLUMN","DECREASE_COLUMN","INCREASE_ROW","DECREASE_ROW","UNDO","REDO","MOVE_VIEWPORT_UP","MOVE_VIEWPORT_RIGHT","MOVE_VIEWPORT_DOWN","MOVE_VIEWPORT_LEFT"]}})),Ro=Object(A.a)(Object(g.a)({},"keybind/CHANGE_KEY_BIND",(function(e){return Object(v.a)({},e)})),_o),No=n(85),Fo=n.n(No),Po=C.a.mark(Yo),zo=Object(j.a)("index/DOT_ACTIONS",(function(e){return{rowIdx:e.rowIdx,columnIdx:e.columnIdx}})),Ho=Object(j.a)("index/CLEAR_FAKE_DOT_ART"),Mo=Object(ro.combineReducers)({dot:jt}),Go=Object(ro.combineReducers)({dotArt:Fo()(Mo,{limit:100,ignoreInitialState:!0,filter:Object(No.includeAction)(["dot/CLEAR_DOT","dot/NEW_DOT_ART_PROJECT","dot/LOAD_DOT_ART","dot/INCREASE_COLUMN","dot/DECREASE_COLUMN","dot/INCREASE_ROW","dot/DECREASE_ROW","dot/CHANGE_DOT_AREA","dot/CHANGE_ACTIVE_IDX","dot/REMOVE_ACTIVE_DOT_ART","dot/COPY_ACTIVE_DOT_ART","dot/ADD_NEW_DOT_ART","dot/CHANGE_ANIMATION_INTERVAL","dot/REORDER_DOT_LIST","dot/UPDATE_DOT_ART","dot/ADD_NEW_LAYER","dot/REMOVE_LAYER","dot/MERGE_LAYER","dot/MOVE_UP_LAYER","dot/MOVE_DOWN_LAYER","dot/SELECT_LAYER_IDX","dot/RENAME_LAYER"])}),palettes:Do,paintTool:Je,auth:xo,dialog:an,user:Q,loading:R,observer:zr,keybind:Ro}),Wo=function(e,t,n,r,a){var o,f=[];return(t+1)%a!==0&&e[o=t+1]===n&&f.push(o),t%a!==0&&e[o=t-1]===n&&f.push(o),t>=a&&e[o=t-a]===n&&f.push(o),t<a*r-a&&e[o=t+a]===n&&f.push(o),f},Bo=function(e,t,n,r,a,o){if("IDLE"===n||"DRAGGING"!==n)return Object(v.a)({},e);switch(t){case Be:if("DRAGGING"===n){var f="LEFT"===r?e.palettes.leftColor:e.palettes.rightColor,c=e.dotArt.present.dot.fakeDotArt.map((function(e){return e.slice()}));return c[a][o]=f,Object(v.a)({},e,{dotArt:Object(v.a)({},e.dotArt,{present:Object(v.a)({},e.dotArt.present,{dot:Object(v.a)({},e.dotArt.present.dot,{fakeDotArt:c})})})})}return Object(v.a)({},e);case"BUCKET":if("DRAGGING"===n){for(var l="LEFT"===r?e.palettes.leftColor:e.palettes.rightColor,i=e.dotArt.present.dot,u=i.rowCount,d=i.columnCount,s=e.dotArt.present.dot.fakeDotArt.reduce((function(e,t){return e.concat(t)})),b=a*d+o,p=function(e,t,n,r,a,o){for(var f,c,l,i,u=[t],d=e.slice();u.length>0;){d[f=u.pop()]=r,c=Wo(d,f,n,a,o);for(var s=0;s<c.length;s++)i=e[l=c[s]],-1===u.indexOf(l)&&i!==r&&u.push(l)}return d}(s,b,s[b],l,u,d),m=[],E=0,O=0;O<u;O++){for(var g=[],h=0;h<d;h++)g.push(p[E]),E++;m.push(g),g=[]}return Object(v.a)({},e,{dotArt:Object(v.a)({},e.dotArt,{present:Object(v.a)({},e.dotArt.present,{dot:Object(v.a)({},e.dotArt.present.dot,{fakeDotArt:m})})})})}return Object(v.a)({},e);case Ve:if("DRAGGING"===n){var C=e.dotArt.present.dot.fakeDotArt[a][o];return C?"LEFT"===r?Object(v.a)({},e,{palettes:Object(v.a)({},e.palettes,{leftColor:C})}):Object(v.a)({},e,{palettes:Object(v.a)({},e.palettes,{rightColor:C})}):Object(v.a)({},e)}return Object(v.a)({},e);case"ERASER":if("DRAGGING"===n){var x=e.dotArt.present.dot.fakeDotArt.map((function(e){return e.slice()}));return x[a][o]="",Object(v.a)({},e,{dotArt:Object(v.a)({},e.dotArt,{present:Object(v.a)({},e.dotArt.present,{dot:Object(v.a)({},e.dotArt.present.dot,{fakeDotArt:x})})})})}return Object(v.a)({},e);case Ue:if("DRAGGING"===n){var j,A=e.observer.startPosition.x,y=e.observer.startPosition.y,I=e.observer.mousePosition.x,S=e.observer.mousePosition.y,T=I-A,k=S-y,L=e.dotArt.present.dot,w=L.columnCount,D=L.layerSelectIdx,_=L.layerData[D].dotFrameIdx,R=L.dotFrameList[L.activeIdx].layerList[_].slice();return e.observer.altDown?(k>0?(j=R.slice(R.length-k),R=j.concat(R.slice(0,R.length-k))):k<0&&(j=R.slice(0,-k),R=R.slice(-k).concat(j)),T>0?R=R.map((function(e){return e.slice(-T).concat(e.slice(0,e.length-T))})):T<0&&(R=R.map((function(e){return e.slice(-T).concat(e.slice(0,-T))})))):(k>0?R=R.slice(0,R.length-k):k<0&&(R=R.slice(-k)),T>0?R=R.map((function(e){return new Array(T).fill("").concat(e.slice(0,e.length-T))})):T<0&&(R=R.map((function(e){return e.slice(-T).concat(new Array(-T).fill(""))}))),k>0?R=Se(k,w).concat(R):k<0&&(R=R.concat(Se(-k,w)))),Object(v.a)({},e,{dotArt:Object(v.a)({},e.dotArt,{present:Object(v.a)({},e.dotArt.present,{dot:Object(v.a)({},e.dotArt.present.dot,{fakeDotArt:R})})})})}return Object(v.a)({},e);case"SAMECOLOR":if("DRAGGING"===n){var N="LEFT"===r?e.palettes.leftColor:e.palettes.rightColor,F=e.dotArt.present.dot.fakeDotArt.map((function(e){return e.slice()})),P=F[a][o];return F=F.map((function(e){return e.map((function(e){return e===P?N:e}))})),Object(v.a)({},e,{dotArt:Object(v.a)({},e.dotArt,{present:Object(v.a)({},e.dotArt.present,{dot:Object(v.a)({},e.dotArt.present.dot,{fakeDotArt:F})})})})}return Object(v.a)({},e);default:return Object(v.a)({},e)}},Vo=function(e){switch(e.paintTool.selectedPaintTool){case Be:var t=Se(e.dotArt.present.dot.rowCount,e.dotArt.present.dot.columnCount);return Object(v.a)({},e,{dotArt:Object(v.a)({},e.dotArt,{present:Object(v.a)({},e.dotArt.present,{dot:Object(v.a)({},e.dotArt.present.dot,{fakeDotArt:t})})}),observer:Object(v.a)({},e.observer,{startPosition:{x:"",y:""}})});case"BUCKET":case"ERASER":case"SAMECOLOR":case Ve:case Ue:var n=e.dotArt.present.dot,r=n.activeIdx,a=n.layerSelectIdx,o=n.layerData[a].dotFrameIdx;return Object(v.a)({},e,{dotArt:Object(v.a)({},e.dotArt,{present:Object(v.a)({},e.dotArt.present,{dot:Object(v.a)({},e.dotArt.present.dot,{fakeDotArt:e.dotArt.present.dot.dotFrameList[r].layerList[o]})})}),observer:Object(v.a)({},e.observer,{startPosition:{x:"",y:""}})});case Ve:default:return Object(v.a)({},e)}},Uo=Object(A.a)((ho={},Object(g.a)(ho,"index/DOT_ACTIONS",(function(e,t){var n=t.payload,r=n.rowIdx,a=n.columnIdx,o=Object(v.a)({},e,{observer:Object(v.a)({},e.observer,{mousePosition:{x:a,y:r},startPosition:"DRAGGING"===e.paintTool.paintState&&""===e.observer.startPosition.x&&""===e.observer.startPosition.y?{x:a,y:r}:e.observer.startPosition})});return Bo(o,e.paintTool.selectedPaintTool,e.paintTool.paintState,e.paintTool.direction,r,a)})),Object(g.a)(ho,"dot/CLEAR_DOT",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/LOAD_DOT_ART",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/NEW_DOT_ART_PROJECT",(function(e){return Vo(e)})),Object(g.a)(ho,"paintTool/CHANGE_PAINT_TOOL",(function(e){return Vo(e)})),Object(g.a)(ho,"index/CLEAR_FAKE_DOT_ART",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/UPDATE_DOT_ART",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/INCREASE_COLUMN",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/DECREASE_COLUMN",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/INCREASE_ROW",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/DECREASE_ROW",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/CHANGE_DOT_AREA",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/CHANGE_ACTIVE_IDX",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/ADD_NEW_DOT_ART",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/REMOVE_LAYER",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/MERGE_LAYER",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/MOVE_UP_LAYER",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/MOVE_DOWN_LAYER",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/SELECT_LAYER_IDX",(function(e){return Vo(e)})),Object(g.a)(ho,"dot/RENAME_LAYER",(function(e){return Vo(e)})),ho),{});function Yo(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)([go(),J()]);case 2:case"end":return e.stop()}}),Po)}var Ko=function(e,t){var n=Go(e,t);return Uo(n,t)},Zo=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.dotArt;return{rowCount:t.present.dot.rowCount,columnCount:t.present.dot.columnCount}})),n=t.rowCount,o=t.columnCount,f=Object(i.d)((function(e){var t=e.observer;return{border:t.dotBorder,dotSize:t.dotSize,backgroundImg:t.backgroundImg}})),c=f.border,l=f.dotSize,u=f.backgroundImg,d=Object(r.useCallback)((function(t){t.deltaY>0?e(wr()):e(Lr())}),[e]),s=Object(r.useCallback)((function(t){return e(Ke(t))}),[e]),b=Object(r.useCallback)((function(t,n){return e(zo({rowIdx:t,columnIdx:n}))}),[e]),p=Object(r.useCallback)((function(t){return e(Ze(t))}),[e]),m=Object(r.useCallback)((function(){return e(Sr())}),[e]);return a.a.createElement(no,{border:c,dotSize:l,rowCount:n,columnCount:o,backgroundImg:u,onWheelHandle:d,onChangePaintStateHandle:s,onDotActionHandle:b,onSetDirectionHandle:p,onLeavesPaintAreaHandle:m})},Xo=n(42),Jo=n(228),Qo=n(124);function qo(){var e=Object($.a)(["\n  display: flex;\n  height: 32px;\n"]);return qo=function(){return e},e}function $o(){var e=Object($.a)(["\n  /* display: flex; */\n  /* height: 64px; */\n"]);return $o=function(){return e},e}var ef=se.b.div($o()),tf=se.b.div(qo()),nf=a.a.memo((function(e){var t=e.paintToolsShortcuts,n=e.onChangePaintTool,r=e.selectedPaintTool;return a.a.createElement(ef,null,a.a.createElement(tf,null,a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement("div",null,"Pan Tool",a.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t.DOT.key,")")))},a.a.createElement(Ae,{selected:r===Be,onClick:function(){return n(Be)}},a.a.createElement(Xo.h,null))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement("div",null,"Bucket Tool",a.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t.BUCKET.key,")")))},a.a.createElement(Ae,{selected:"BUCKET"===r,onClick:function(){return n("BUCKET")}},a.a.createElement(Jo.a,null))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement("div",null,"Colorpicker Tool",a.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t[Ve].key,")")))},a.a.createElement(Ae,{selected:r===Ve,onClick:function(){return n(Ve)}},a.a.createElement(Xo.i,null)))),a.a.createElement(tf,null,a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement("div",null,"Eraser Tool",a.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t.ERASER.key,")")))},a.a.createElement(Ae,{selected:"ERASER"===r,onClick:function(){return n("ERASER")}},a.a.createElement(Qo.b,null))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement("div",null,"Move Tool",a.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t[Ue].key,")")),a.a.createElement("div",{className:"tooltip-name"},a.a.createElement("span",{className:"tooltip-key"},"ALT"),"Wrap mod"))},a.a.createElement(Ae,{selected:r===Ue,onClick:function(){return n(Ue)}},a.a.createElement(Qo.c,null))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement("div",null,"Bucket all same color pixel",a.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t.SAMECOLOR.key,")")))},a.a.createElement(Ae,{selected:"SAMECOLOR"===r,onClick:function(){return n("SAMECOLOR")}},a.a.createElement(Qo.a,null)))))})),rf=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return{selectedPaintTool:e.paintTool.selectedPaintTool}})).selectedPaintTool,n=Object(i.d)((function(e){return{paintToolsShortcuts:e.keybind.paintTools}})).paintToolsShortcuts,o=Object(r.useCallback)((function(t){return e(Ye(t))}),[e]);return a.a.createElement(nf,{paintToolsShortcuts:n,onChangePaintTool:o,selectedPaintTool:t})},af=n(231),of=n.n(af),ff=n(230),cf=n.n(ff),lf=n(229),uf=n.n(lf),df=n(232),sf=n.n(df),bf=n(233);function pf(){var e=Object($.a)(["\n  display: flex;\n  height: 40px;\n"]);return pf=function(){return e},e}var mf=se.b.div(pf()),Ef=a.a.memo((function(e){var t=e.storageShortcuts,n=e.newProjectHandle,o=e.dotClearHandle,f=e.saveHandle,c=e.dialogOpenHandle,l=Object(r.useCallback)((function(){n()}),[n]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(mf,null,a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Open new project")},a.a.createElement(Ae,{onClick:l},a.a.createElement(uf.a,null))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Clear selected frame")},a.a.createElement(Ae,{onClick:o},"Clear"))),a.a.createElement(mf,null,a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement("div",null,"Save to localStorage",a.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t.SAVE_DOTART.key,")")))},a.a.createElement(Ae,{onClick:f},a.a.createElement(cf.a,null))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement("div",null,"Load from localStorage",a.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(t.LOAD_DOTART.key,")")))},a.a.createElement(Ae,{onClick:function(){return c("LoadDialog")}},a.a.createElement(of.a,null)))),a.a.createElement(mf,null,a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Open Download dialog",a.a.createElement("span",{className:"tooltip-name"},"download dotArt in diffrent formats"))},a.a.createElement(Ae,{onClick:function(){return c("DownloadDialog")}},a.a.createElement(sf.a,null))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Open CSS dialog",a.a.createElement("span",{className:"tooltip-name"},"show your CSS code"))},a.a.createElement(Ae,{onClick:function(){return c("CssDialog")}},a.a.createElement(bf.a,null)))))})),Of=function(){var e=Object(tn.b)().enqueueSnackbar,t=Object(i.c)(),n=Object(i.d)((function(e){var t=e.dotArt.present.dot;return{dotFrameList:t.dotFrameList,columnCount:t.columnCount,rowCount:t.rowCount,animationDuration:t.animationDuration,layerData:t.layerData}})),o=n.dotFrameList,f=n.columnCount,c=n.rowCount,l=n.animationDuration,u=n.layerData,d=Object(i.d)((function(e){var t=e.observer;return{dotBorder:t.dotBorder,backgroundImg:t.backgroundImg,saveState:t.saveState}})),s=d.dotBorder,b=d.backgroundImg,p=d.saveState,m=Object(i.d)((function(e){return{storageShortcuts:e.keybind.storage}})).storageShortcuts;Object(r.useEffect)((function(){var e=Qt(localStorage),n=$t(localStorage);e||(Jt("dotArt_storage_v1",localStorage,{dotArt:[{dot:Object(v.a)({},Zt)}],current:0}),e=Qt(localStorage)),t($e(e.dotArt[e.current].dot)),t(Rr(n))}),[]);var E=Object(r.useCallback)((function(){t(qe())}),[t]),O=Object(r.useCallback)((function(){t(Qe())}),[t]),g=Object(r.useCallback)((function(e){t(nn(e))}),[t]);Object(r.useEffect)((function(){if(p){var n={dot:{id:pe.a.generate(),dotFrameList:o,columnCount:f,rowCount:c,animationDuration:l,layerData:u}};(function(e,t){try{var n=Qt(e);return n&&n.dotArt?(n.dotArt.push(t),n.current=n.dotArt.length-1):n=Object(v.a)({},n,{dotArt:[t],current:0}),Jt("dotArt_storage_v1",e,n)}catch(r){return!1}})(localStorage,n)?e("Save DotArt To LocalStorage",{variant:"success"}):e("Save Fail!",{variant:"error"}),t(Pr(!1))}}),[p,t]),Object(r.useEffect)((function(){var e={dotBorder:s,backgroundImg:b},t=function(){!function(e,t){try{var n=Object(v.a)({},$t(e),{},t);e.setItem("dotArt_private_setting_v1",JSON.stringify(n))}catch(r){return!1}}(localStorage,e)};return window.addEventListener("beforeunload",t,!1),function(){window.removeEventListener("beforeunload",t,!1)}}),[s,b]);var h=Object(r.useCallback)((function(){t(Pr(!0))}),[t]);return a.a.createElement(Ef,{storageShortcuts:m,newProjectHandle:E,dotClearHandle:O,saveHandle:h,dialogOpenHandle:g})};function gf(){var e=Object($.a)(["\n  cursor: pointer;\n  box-sizing: border-box;\n  position: relative;\n  width: 30px;\n  height: 17.32px;\n  margin-left: 0px;\n  background-color: ",";\n  border-left: solid 3px\n    ",";\n  border-right: solid 3px\n    ",";\n  outline: none;\n\n  :before,\n  :after {\n    content: '';\n    box-sizing: border-box;\n    position: absolute;\n    z-index: 1;\n    width: 21.21px;\n    height: 21.21px;\n    -webkit-transform: scaleY(0.5774) rotate(-45deg);\n    -ms-transform: scaleY(0.5774) rotate(-45deg);\n    transform: scaleY(0.5774) rotate(-45deg);\n    background-color: ",";\n    left: 1.3934px;\n  }\n\n  :before {\n    top: -10.6066px;\n    border-top: solid 4.2426px\n      ",";\n    border-right: solid 4.2426px\n      ",";\n  }\n\n  :after {\n    bottom: -10.6066px;\n    border-bottom: solid 4.2426px\n      ",";\n    border-left: solid 4.2426px\n      ",";\n  }\n\n  &:hover {\n    color: white;\n  }\n"]);return gf=function(){return e},e}var vf=se.b.div(gf(),(function(e){return e.color||""}),(function(e){return e.selected?"#000000":"#ffffff"}),(function(e){return e.selected?"#000000":"#ffffff"}),(function(e){return e.color||""}),(function(e){return e.selected?"#000000":"#ffffff"}),(function(e){return e.selected?"#000000":"#ffffff"}),(function(e){return e.selected?"#000000":"#ffffff"}),(function(e){return e.selected?"#000000":"#ffffff"})),hf=function(e){var t=e.children,n=e.innerRef,r=Object(ge.a)(e,["children","innerRef"]);return a.a.createElement(vf,Object.assign({ref:n},r),t)},Cf=function(e){var t=e.color,n=e.paletteId,r=e.cellIdx,o=e.selected,f=e.handleSelectLeftColor,c=e.handleSelectRightColor;return a.a.createElement(hf,{color:t,selected:o,onClick:function(){return f(n,r,t)},onContextMenu:function(e){return c(e,t)}})};function xf(){var e=Object($.a)(["\n  display: flex;\n  margin-top: 8px;\n  &:nth-child(odd) {\n    margin-left: 16px;\n  }\n"]);return xf=function(){return e},e}var jf=se.b.div(xf()),Af=function(e){var t=e.palette,n=e.selectColorId,r=e.handleSelectColorCell,o=e.handleSelectLeftColor,f=e.handleSelectRightColor;return a.a.createElement(jf,null,t.colors.map((function(e,c){return a.a.createElement(Cf,{color:e,paletteId:t.id,cellIdx:c,key:"".concat(t.id).concat(c),selected:n.paletteId===t.id&&n.colorId===c,handleSelectColorCell:r,handleSelectLeftColor:o,handleSelectRightColor:f})})))};function yf(){var e=Object($.a)(["\n  border: 2px solid #9e9e9e;\n"]);return yf=function(){return e},e}var If=se.b.div(yf()),Sf=a.a.memo((function(e){var t=e.palettes,n=e.selectColorId,r=e.handleSelectLeftColor,o=e.handleSelectRightColor,f=e.handleSelectColorCell,c=e.handleOpenPaletteDialog;return a.a.createElement(If,null,t.map((function(e,t){return a.a.createElement(Af,{palette:e,key:e.id,idx:t,selectColorId:n,handleSelectColorCell:f,handleSelectLeftColor:r,handleSelectRightColor:o})})),a.a.createElement("button",{onClick:function(){return c("CreatePalette")}},"create"),a.a.createElement("button",{onClick:function(){return c("EditPalette")}},"edit"))})),Tf=a.a.memo((function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.palettes;return{palettes:t.palettes,selectColorId:t.selectColorId}})),n=t.palettes,o=t.selectColorId,f=Object(r.useCallback)((function(t,n){return e(Io({paletteId:t,selectIdx:n}))}),[e]),c=Object(r.useCallback)((function(t,n,r){return e(jo({paletteId:t,selectIdx:n,color:r}))}),[e]),l=Object(r.useCallback)((function(t,n){t.preventDefault(),e(Ao({color:n}))}),[e]),u=Object(r.useCallback)((function(t){e(nn(t))}),[e]);return a.a.createElement(Sf,{palettes:n,selectColorId:o,handleSelectLeftColor:c,handleSelectRightColor:l,handleSelectColorCell:f,handleOpenPaletteDialog:u})}));function kf(){var e=Object($.a)(["\n  margin-top: 8px;\n  margin-left: -2px;\n"]);return kf=function(){return e},e}function Lf(){var e=Object($.a)(["\n  cursor: pointer;\n  margin-right: 3px;\n  border: 2px solid ",";\n  width: 20px;\n  height: 20px;\n  padding: ",";\n  :before {\n    content: '';\n    display: block;\n    width: 100%;\n    height: 100%;\n    background-color: ",";\n  }\n"]);return Lf=function(){return e},e}function wf(){var e=Object($.a)(["\n  margin-top: 8px;\n  display: flex;\n  align-items: center;\n  & > h4 {\n    padding: 0;\n    margin: 0;\n    margin-right: 8px;\n  }\n"]);return wf=function(){return e},e}function Df(){var e=Object($.a)(["\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  margin-right: 3px;\n  background-image: ",";\n  border: 2px solid ",";\n"]);return Df=function(){return e},e}function _f(){var e=Object($.a)(["\n  display: flex;\n  & > h4 {\n    padding: 0;\n    margin: 0;\n    margin-right: 8px;\n  }\n"]);return _f=function(){return e},e}function Rf(){var e=Object($.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n  padding: 4px 6px;\n  background-color: #f2e8dc;\n"]);return Rf=function(){return e},e}var Nf=se.b.div(Rf()),Ff=se.b.div(_f()),Pf=se.b.div(Df(),(function(e){return 1===e.backgroundImg?"url(".concat(_t.a,")"):"url(".concat(wt.a,")")}),(function(e){return e.selected?"orange":"#6f6f6f"})),zf=se.b.div(wf()),Hf=se.b.div(Lf(),(function(e){return e.selected?"orange":"#afafaf"}),(function(e){return"".concat(6-e.pixel,"px")}),(function(e){return e.selected?"orange":"#afafaf"})),Mf=se.b.div(kf()),Gf=a.a.memo((function(e){var t=e.borderSize,n=e.borderColor,r=e.backgroundImg,o=e.onChangeDotBorderSize,f=e.onChangeDotBorderColor,c=e.onChangeBackgroundImg;return a.a.createElement(Nf,null,a.a.createElement(Ff,null,a.a.createElement("h4",null,"Background"),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"dark")},a.a.createElement(Pf,{backgroundImg:0,selected:0===r,onClick:function(){return c(0)}})),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"white")},a.a.createElement(Pf,{backgroundImg:1,selected:1===r,onClick:function(){return c(1)}}))),a.a.createElement(zf,null,a.a.createElement("h4",null,"Dot Border"),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"none")},a.a.createElement(Hf,{onClick:function(){return o(0)},pixel:-2,selected:0===t,borderColor:n})),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"1px")},a.a.createElement(Hf,{onClick:function(){return o(1)},pixel:1,selected:1===t,borderColor:n})),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"2px")},a.a.createElement(Hf,{onClick:function(){return o(2)},pixel:2,selected:2===t,borderColor:n})),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"3px")},a.a.createElement(Hf,{onClick:function(){return o(3)},pixel:3,selected:3===t,borderColor:n}))),a.a.createElement(Mf,null,a.a.createElement(kt,{placement:"bottom",tooltip:a.a.createElement(a.a.Fragment,null,"Set border color")},a.a.createElement(Wn.GithubPicker,{onChange:f,width:190,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#1273DE","#004DCF","#5300EB","#000000","#9b9b9b","#ffffff","#f78da7","#eb144c","#9379d2","#87ceeb"]}))))})),Wf=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.observer;return{borderSize:t.dotBorder.size,borderColor:t.dotBorder.color,backgroundImg:t.backgroundImg}})),n=t.borderSize,o=t.borderColor,f=t.backgroundImg,c=Object(r.useCallback)((function(t){e(Tr(t))}),[e]),l=Object(r.useCallback)((function(t){e(kr(t.hex))}),[e]),u=Object(r.useCallback)((function(t){e(Fr(t))}),[e]);return a.a.createElement(Gf,{borderSize:n,borderColor:o,backgroundImg:f,onChangeDotBorderSize:c,onChangeDotBorderColor:l,onChangeBackgroundImg:u})};function Bf(){var e=Object($.a)(["\n  display: flex;\n  width: 100%;\n  height: fit-content;\n  line-height: 55px;\n  align-items: center;\n  & > div {\n    width: 70px;\n    margin: 8px;\n  }\n"]);return Bf=function(){return e},e}function Vf(){var e=Object($.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n  padding: 4px 6px;\n  background-color: #f2e8dc;\n"]);return Vf=function(){return e},e}var Uf=se.b.div(Vf()),Yf=se.b.div(Bf()),Kf=a.a.memo((function(e){var t=e.onChangeArea,n=e.rowCount,o=e.columnCount,f=Object(r.useState)(o),c=Object(x.a)(f,2),l=c[0],i=c[1],u=Object(r.useState)(n),d=Object(x.a)(u,2),s=d[0],b=d[1];Object(r.useEffect)((function(){i(o),b(n)}),[n,o]);return a.a.createElement(Uf,null,a.a.createElement(Yf,null,a.a.createElement("span",null,"Resize"),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Apply dot area size")},a.a.createElement(Ae,{onClick:function(){return t(s,l)}},"Apply"))),a.a.createElement(Yf,null,a.a.createElement(Ie.a,{size:"small",variant:"outlined",type:"number",label:"Width",color:"secondary",value:l,onChange:function(e){return function(e){i(e.target.value)}(e)}}),"X",a.a.createElement(Ie.a,{size:"small",variant:"outlined",type:"number",label:"Height",color:"secondary",value:s,onChange:function(e){return function(e){b(e.target.value)}(e)}})))})),Zf=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.dotArt;return{rowCount:t.present.dot.rowCount,columnCount:t.present.dot.columnCount}})),n=t.rowCount,o=t.columnCount,f=Object(r.useCallback)((function(t,n){e(at({newRow:parseInt(t),newColumn:parseInt(n)}))}),[e]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Kf,{rowCount:n,columnCount:o,onChangeArea:f}))};function Xf(){var e=Object($.a)(["\n  border: 1px solid orange;\n  width: 100%;\n  padding-left: 8px;\n  height: 24px;\n  outline: none;\n  cursor: pointer;\n  font-size: 12px;\n  color: white;\n  background: rgba(50, 50, 50, 1);\n  ","\n"]);return Xf=function(){return e},e}function Jf(){var e=Object($.a)(["\n      color: orange;\n      background: #59564f;\n    "]);return Jf=function(){return e},e}function Qf(){var e=Object($.a)(["\n        background-color: #d2c9be;\n      "]);return Qf=function(){return e},e}function qf(){var e=Object($.a)(["\n  overflow: hidden;\n  white-space: nowrap;\n  width: 100%;\n  line-height: 24px;\n  color: #0d0d0d;\n  padding-left: 8px;\n  height: 24px;\n  background: #f2e8dc;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  font-size: 12px;\n  border-top: 2px solid #0d0d0d;\n  &:hover {\n    ","\n  }\n  ","\n  ","\n"]);return qf=function(){return e},e}function $f(){var e=Object($.a)(["\n  width: 100%;\n  height: 24px;\n  cursor: pointer;\n  display: flex;\n"]);return $f=function(){return e},e}function ec(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column-reverse;\n  max-height: 30vh;\n  overflow: auto;\n"]);return ec=function(){return e},e}function tc(){var e=Object($.a)(["\n      &:hover {\n        color: #1261a6;\n      }\n    "]);return tc=function(){return e},e}function nc(){var e=Object($.a)(["\n  outline: none;\n  cursor: pointer;\n  font-size: 16px;\n  width: 33.3px;\n  height: 24px;\n  border: 1px solid #333333;\n  transition: all 0.2s ease-in-out;\n  color: #0d0d0d;\n  background: #f2e8dc;\n  ","\n\n  &:disabled {\n    cursor: no-drop;\n    background: #a69e94;\n    color: #59564f;\n  }\n"]);return nc=function(){return e},e}function rc(){var e=Object($.a)(["\n  display: flex;\n"]);return rc=function(){return e},e}function ac(){var e=Object($.a)(["\n      color: #e83838;\n    "]);return ac=function(){return e},e}function oc(){var e=Object($.a)(["\n  position: absolute;\n  cursor: pointer;\n  right: 0.5rem;\n  color: #0d0d0d;\n  font-size: 24px;\n  cursor: pointer;\n  transition: 0.2s linear;\n  ","\n"]);return oc=function(){return e},e}function fc(){var e=Object($.a)(["\n  display: flex;\n  font-size: 20px;\n  padding-left: 16px;\n  color: black;\n  background: #f2e8dc;\n  line-height: 24px;\n  border-bottom: 1px solid #0d0d0d;\n"]);return fc=function(){return e},e}function cc(){var e=Object($.a)(["\n  border: 2px solid #59564f;\n  border-radius: 3px;\n"]);return cc=function(){return e},e}var lc=se.b.div(cc()),ic=se.b.div(fc()),uc=se.b.div(oc(),(function(e){return e.showLayers&&Object(se.a)(ac())})),dc=se.b.div(rc()),sc=se.b.button(nc(),(function(e){return!e.disable&&Object(se.a)(tc())})),bc=se.b.div(ec()),pc=se.b.div($f()),mc=se.b.span(qf(),(function(e){return!e.selected&&Object(se.a)(Qf())}),(function(e){return e.selected&&Object(se.a)(Jf())}),(function(e){return e.active?"display: none":""})),Ec=se.b.input(Xf(),(function(e){return e.active?"display: none":""})),Oc=a.a.memo((function(e){var t=e.layerSelectIdx,n=e.layerData,o=e.shiftDown,f=e.showLayers,c=e.addNewLayerHandle,l=e.removeLayerHandle,i=e.mergeLayerHandle,u=e.moveUpHandle,d=e.moveDownHandle,s=e.selectLayerIdxHandle,b=e.renameLayerHandle,p=e.handleChangeTyping,m=e.handleChangeShowLayers,E=Object(r.useState)(!1),O=Object(x.a)(E,2),g=O[0],v=O[1],h=Object(r.useState)(""),C=Object(x.a)(h,2),j=C[0],A=C[1],y=Object(r.useRef)(null);Object(r.useEffect)((function(){A(n[t].layerName)}),[t,n]);var I=function(){v(!0)};Object(r.useEffect)((function(){g?(y.current.focus(),p(!0)):p(!1)}),[g,p]);return a.a.createElement(lc,null,a.a.createElement(ic,null,"Layers",a.a.createElement(uc,{showLayers:f,onClick:m},a.a.createElement(kt,{placement:"left",tooltip:a.a.createElement(a.a.Fragment,null,"Show all layers")},a.a.createElement(Xo.d,null)))),a.a.createElement(dc,null,a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Add new layer",a.a.createElement("span",{className:"tooltip-name"},a.a.createElement("span",{className:"tooltip-key"},"SHIFT"),"Copy select layer"))},a.a.createElement(sc,{onClick:function(){c(o)}},a.a.createElement(Xo.j,null))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Move up selected layer",a.a.createElement("span",{className:"tooltip-name"},a.a.createElement("span",{className:"tooltip-key"},"SHIFT"),"Move to Top")),disable:t===n.length-1},a.a.createElement(sc,{onClick:function(){u(o)},disable:t===n.length-1,disabled:t===n.length-1},a.a.createElement(Xo.b,null))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Move down selected layer",a.a.createElement("span",{className:"tooltip-name"},a.a.createElement("span",{className:"tooltip-key"},"SHIFT"),"Move to down")),disable:0===t},a.a.createElement(sc,{onClick:function(){d(o)},disable:0===t,disabled:0===t},a.a.createElement(Xo.a,null))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Edit layer name")},a.a.createElement(sc,{onClick:function(){v(!0)}},a.a.createElement(Xo.g,null))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Merge with below layer"),disable:0===t},a.a.createElement(sc,{onClick:i,disable:0===t,disabled:0===t},a.a.createElement(Xo.e,null))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement(a.a.Fragment,null,"Delete selected layer"),disable:1===n.length},a.a.createElement(sc,{onClick:l,disable:1===n.length,disabled:1===n.length},a.a.createElement(Xo.c,null)))),a.a.createElement(bc,null,n.map((function(e,n){return n===t?a.a.createElement(pc,{key:n,selected:!0},a.a.createElement(Ec,{value:j,ref:y,active:!g,onBlur:function(){return v(!1),p(!1),void b(j)},onChange:function(e){return A(e.target.value)},onKeyPress:function(e){return function(e){13!==e.kayCode&&"Enter"!==e.key||(v(!1),p(!1),b(j))}(e)}}),a.a.createElement(mc,{onClick:I,active:g,selected:!0},e.layerName)):a.a.createElement(pc,{onClick:function(){return s(n)},key:n},a.a.createElement(mc,null,e.layerName))}))))})),gc=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.dotArt;return{layerList:t.present.dot.dotFrameList[t.present.dot.activeIdx].layerList,layerSelectIdx:t.present.dot.layerSelectIdx,layerData:t.present.dot.layerData}})),n=t.layerList,o=t.layerSelectIdx,f=t.layerData,c=Object(i.d)((function(e){var t=e.observer;return{shiftDown:t.shiftDown,showLayers:t.showLayers}})),l=c.shiftDown,u=c.showLayers,d=Object(r.useCallback)((function(t){e(pt(t))}),[e]),s=Object(r.useCallback)((function(){e(mt())}),[e]),b=Object(r.useCallback)((function(){e(Et())}),[e]),p=Object(r.useCallback)((function(t){e(Ot(t))}),[e]),m=Object(r.useCallback)((function(t){e(gt(t))}),[e]),E=Object(r.useCallback)((function(t){e(vt(t))}),[e]),O=Object(r.useCallback)((function(t){e(ht(t))}),[e]),g=Object(r.useCallback)((function(t){e(Ir(t))}),[e]),v=Object(r.useCallback)((function(){e(Nr())}),[e]);return a.a.createElement(Oc,{layerList:n,layerSelectIdx:o,layerData:f,shiftDown:l,showLayers:u,addNewLayerHandle:d,removeLayerHandle:s,mergeLayerHandle:b,moveUpHandle:p,moveDownHandle:m,selectLayerIdxHandle:E,renameLayerHandle:O,handleChangeTyping:g,handleChangeShowLayers:v})},vc=n(234),hc=n.n(vc);function Cc(){var e=Object($.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return Cc=function(){return e},e}function xc(){var e=Object($.a)(["\n  position: absolute;\n  z-index: 2;\n"]);return xc=function(){return e},e}function jc(){var e=Object($.a)(["\n  background: ",";\n  width: 40px;\n  height: 40px;\n  border: 3px solid #a69e94;\n"]);return jc=function(){return e},e}function Ac(){var e=Object($.a)(["\n  display: flex;\n  & > span {\n    &:hover {\n      color: #db3e00;\n    }\n  }\n"]);return Ac=function(){return e},e}var yc=se.b.div(Ac()),Ic=se.b.div(jc(),(function(e){return e.color?e.color:"#ffffff"})),Sc=se.b.div(xc()),Tc=se.b.div(Cc()),kc=a.a.memo((function(e){var t=e.leftColor,n=e.rightColor,o=e.colorShortcut,f=e.changeLeftColorHandle,c=e.changeRightColorHandle,l=e.swapLeftRightColorHandle,i=Object(r.useState)(!1),u=Object(x.a)(i,2),d=u[0],s=u[1],b=Object(r.useState)(!1),p=Object(x.a)(b,2),m=p[0],E=p[1],O=Object(r.useState)(""),g=Object(x.a)(O,2),v=g[0],h=g[1],C=Object(r.useState)(""),j=Object(x.a)(C,2),A=j[0],y=j[1],I=Object(r.useState)(["#000000"]),S=Object(x.a)(I,2),T=S[0],k=S[1],L=Object(r.useState)(["#ffffff"]),w=Object(x.a)(L,2),D=w[0],_=w[1];Object(r.useEffect)((function(){h(t),y(n)}),[t,n]);var R=function(e){"LEFT"===e?s(!d):E(!m)},N=function(e){if("LEFT"===e){if(s(!1),0===T.filter((function(e){return e===v})).length){var t=T.concat(v);t.length>8&&t.shift(),k(t)}f(v)}else{if(E(!1),0===D.filter((function(e){return e===A})).length){var n=D.concat(A);n.length>8&&n.shift(),_(n)}c(A)}};return a.a.createElement(yc,null,a.a.createElement("div",null,a.a.createElement(Ic,{onClick:function(){return R("LEFT")},color:v}),d&&a.a.createElement(Sc,null,a.a.createElement(Tc,{onClick:function(){return N("LEFT")}}),a.a.createElement(Wn.SketchPicker,{presetColors:T,disableAlpha:!0,color:v,onChange:function(e){h(e.hex)}}))),a.a.createElement(kt,{placement:"top",tooltip:a.a.createElement("div",null,"Swap left right color",a.a.createElement("span",{className:"tooltip-shortcut"},"(".concat(o.SWAP.key,")")))},a.a.createElement(hc.a,{onClick:l,fontSize:"large"})),a.a.createElement("div",null,a.a.createElement(Ic,{onClick:function(){return R("RIGHT")},color:A}),m&&a.a.createElement(Sc,null,a.a.createElement(Tc,{onClick:function(){return N("RIGHT")}}),a.a.createElement(Wn.SketchPicker,{presetColors:D,disableAlpha:!0,color:A,onChange:function(e){y(e.hex)}}))))})),Lc=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.palettes;return{leftColor:t.leftColor,rightColor:t.rightColor}})),n=t.leftColor,o=t.rightColor,f=Object(i.d)((function(e){return{colorShortcut:e.keybind.color}})).colorShortcut,c=Object(r.useCallback)((function(t){e(jo({color:t}))}),[e]),l=Object(r.useCallback)((function(t){e(Ao({color:t}))}),[e]),u=Object(r.useCallback)((function(){e(yo())}),[e]);return a.a.createElement(kc,{leftColor:n,rightColor:o,colorShortcut:f,changeLeftColorHandle:c,changeRightColorHandle:l,swapLeftRightColorHandle:u})},wc=n(235);function Dc(){var e=Object($.a)(["\n  color: #59564f;\n  border-radius: 5px;\n  text-align: center;\n\n  &:hover {\n    color: #0d0d0d;\n  }\n"]);return Dc=function(){return e},e}function _c(){var e=Object($.a)(["\n  position: fixed;\n  bottom: 8px;\n"]);return _c=function(){return e},e}var Rc=se.b.div(_c()),Nc=se.b.div(Dc()),Fc=a.a.memo((function(e){var t=e.isTyping,n=e.dotSize,o=e.openKeyBindDialog,f=e.paintTools,c=e.color,l=e.storage,u=e.misc,d=Object(i.c)();return Object(r.useEffect)((function(){var e={};function r(t){var n=function(n){e[t[n].code]=function(e){e.preventDefault(),o(n)}};for(var r in t)n(r)}r(f),r(c),r(l),r(u);var a=document.getElementById("paintBox"),o=function(e){switch(e){case"UNDO":return d(No.ActionCreators.undo()),void d(Ho());case"REDO":return d(No.ActionCreators.redo()),void d(Ho());case"SWAP":return void d(yo());case"PALETTE_UP":return void d(So());case"PALETTE_DOWN":return void d(To());case"PALETTE_LEFT":return void d(ko());case"PALETTE_RIGHT":return void d(Lo());case Be:return void d(Ye(Be));case"BUCKET":return void d(Ye("BUCKET"));case Ve:return void d(Ye(Ve));case"ERASER":return void d(Ye("ERASER"));case Ue:return void d(Ye(Ue));case"SAMECOLOR":return void d(Ye("SAMECOLOR"));case"INCREASE_COLUMN":return void d(et());case"DECREASE_COLUMN":return void d(tt());case"INCREASE_ROW":return void d(nt());case"DECREASE_ROW":return void d(rt());case"INCREASE_DOTSIZE":return void d(Lr());case"DECREASE_DOTSIZE":return void d(wr());case"MOVE_VIEWPORT_UP":return void a.scrollBy(0,-n);case"MOVE_VIEWPORT_RIGHT":return void a.scrollBy(n,0);case"MOVE_VIEWPORT_DOWN":return void a.scrollBy(0,n);case"MOVE_VIEWPORT_LEFT":return void a.scrollBy(-n,0);case"SAVE_DOTART":return void d(Pr(!0));case"LOAD_DOTART":return void d(nn("LoadDialog"));default:return console.log("bind error")}},i=Object(wc.a)(window,e);return t&&i(),function(){i()}}),[t,n,f,c,l,u,d]),a.a.createElement(Rc,null,a.a.createElement(kt,{tooltip:a.a.createElement(a.a.Fragment,null,"Key bind help")},a.a.createElement(Nc,null,a.a.createElement(Xo.f,{size:"2.5rem",onClick:o}))))})),Pc=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.observer;return{isTyping:t.isTyping,dotSize:t.dotSize}})),n=t.isTyping,o=t.dotSize,f=Object(i.d)((function(e){var t=e.keybind;return{paintTools:t.paintTools,color:t.color,storage:t.storage,misc:t.misc}})),c=f.paintTools,l=f.color,u=f.storage,d=f.misc,s=Object(r.useCallback)((function(){e(nn("KeybindDialog"))}),[e]);return a.a.createElement(Fc,{isTyping:n,dotSize:o,paintTools:c,color:l,storage:u,misc:d,openKeyBindDialog:s})};function zc(){var e=Object($.a)(["\n  position: absolute;\n  bottom: 16px;\n"]);return zc=function(){return e},e}var Hc=se.b.div(zc()),Mc=function(e){var t=e.mousePosition,n=e.dotSize,o=e.paintState,f=e.selectedPaintTool,c=e.rowCount,l=e.columnCount,i=e.onChangePaintStateHandle,u=e.onUpdateDotArtHandle,d=e.onAltDownHandle,s=e.onShiftDownHandle;return Object(r.useEffect)((function(){var e=function(e){u(f),i("IDLE")};return"DRAGGING"===o&&window.addEventListener("mouseup",e,!1),function(){window.removeEventListener("mouseup",e,!1)}}),[o,f,i,u]),Object(r.useEffect)((function(){var e,t,n=function(n){e=n.clientX,t=n.clientY},r=document.getElementById("paintBox"),a=r.parentNode,o=r.childNodes[0],f=function(n){n.preventDefault();var f=parseInt(r.scrollHeight/c);if(!(f>99||f<5)){var i=r.scrollTop,u=r.scrollLeft,d=a.getBoundingClientRect(),s=r.offsetTop===a.offsetTop,b=r.offsetLeft===o.offsetLeft,p=n.deltaY>0?-2:2;if(s){var m=100/(d.height/(t-d.y)),E=r.scrollTop/r.scrollHeight*100;i=(f+p)*c/100*(E+(m-E)/10)}if(b){var O=100/(d.width/(e-d.x)),g=r.scrollLeft/r.scrollWidth*100;u=(f+p)*l/100*(g+(O-g)/10)}r.scrollTo(u,i)}};return a.addEventListener("wheel",f),a.addEventListener("mousemove",n),function(){a.removeEventListener("wheel",f),a.removeEventListener("mousemove",n)}}),[c,l]),Object(r.useEffect)((function(){var e=function(e){"AltLeft"===e.code&&d(!1),"ShiftLeft"===e.code&&s(!1)},t=function(e){"AltLeft"===e.code&&d(!0),"ShiftLeft"===e.code&&s(!0)};return window.addEventListener("keyup",e,!1),window.addEventListener("keydown",t,!1),function(){window.removeEventListener("keyup",e,!1),window.removeEventListener("keydown",t,!1)}}),[d,s]),a.a.createElement(Hc,null,a.a.createElement("h5",null,n,"px"),a.a.createElement("h5",null,"[",l," x ",c,"]",""!==t.x&&"".concat(t.x,", ").concat(t.y)))},Gc=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t=e.observer;return{mousePosition:t.mousePosition,dotSize:t.dotSize}})),n=t.mousePosition,o=t.dotSize,f=Object(i.d)((function(e){var t=e.paintTool;return{paintState:t.paintState,selectedPaintTool:t.selectedPaintTool}})),c=f.paintState,l=f.selectedPaintTool,u=Object(i.d)((function(e){var t=e.dotArt;return{rowCount:t.present.dot.rowCount,columnCount:t.present.dot.columnCount}})),d=u.rowCount,s=u.columnCount,b=Object(r.useCallback)((function(t){e(Ke(t))}),[e]),p=Object(r.useCallback)((function(t){e(bt(t))}),[e]),m=Object(r.useCallback)((function(t){e(Dr(t))}),[e]),E=Object(r.useCallback)((function(t){e(_r(t))}),[e]);return a.a.createElement(Mc,{mousePosition:n,dotSize:o,paintState:c,selectedPaintTool:l,rowCount:d,columnCount:s,onChangePaintStateHandle:b,onUpdateDotArtHandle:p,onAltDownHandle:m,onShiftDownHandle:E})};function Wc(){var e=Object($.a)(["\n  position: sticky;\n  max-height: 90vh;\n  width: 204px;\n  & > *:not(:first-child) {\n    margin: 4px 0px;\n  }\n"]);return Wc=function(){return e},e}function Bc(){var e=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  left: 0px;\n  width: 250px;\n  min-width: 250px;\n  margin-right: 4px;\n  /* & > * {\n    margin: 8px 0px;\n    max-width: 240px;\n    width: 200px;\n  } */\n"]);return Bc=function(){return e},e}function Vc(){var e=Object($.a)(["\n  display: flex;\n"]);return Vc=function(){return e},e}var Uc=se.b.div(Vc()),Yc=se.b.div(Bc()),Kc=se.b.div(Wc()),Zc=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ur,null),a.a.createElement(Uc,null,a.a.createElement(Yc,null,a.a.createElement(Of,null),a.a.createElement(rf,null),a.a.createElement(Zf,null),a.a.createElement(Tf,null),a.a.createElement(Lc,null)),a.a.createElement(xa,null),a.a.createElement(Zo,null),a.a.createElement(Kc,null,a.a.createElement(za,null),a.a.createElement(Wf,null),a.a.createElement(gc,null),a.a.createElement(Gc,null))),a.a.createElement(Pc,null))},Xc=Object(l.f)((function(e){var t=e.match;return a.a.createElement(c.a,null,a.a.createElement(q,{path:t.path},a.a.createElement(l.c,null,a.a.createElement(l.a,{path:[t.path,"".concat(t.path,"/dot")],component:Zc}))))})),Jc=n(238),Qc=n(537),qc=Object(Jc.a)({palette:{primary:{main:"#F2E8DC",light:"#F2F2F2",dark:"#59564F",contrastText:"#0D0D0D"},secondary:{main:"#59564F"}}}),$c=function(){return a.a.createElement(Qc.a,{theme:qc},a.a.createElement(tn.a,{maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"center"},disableWindowBlurListener:!0},a.a.createElement(c.a,null,a.a.createElement(l.c,null,a.a.createElement(l.a,{component:Xc})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var el=n(236),tl=n(239),nl=Object(tl.a)(),rl=Object(ro.createStore)(Ko,Object(el.composeWithDevTools)(Object(ro.applyMiddleware)(nl)));nl.run(Yo),function(){try{var e=localStorage.getItem("dotArt_user");if(!e)return;rl.dispatch(V(e)),rl.dispatch(U())}catch(t){console.log("localStorage is not working!")}}(),f.a.render(a.a.createElement(i.a,{store:rl},a.a.createElement(c.a,null,a.a.createElement($c,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},56:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAVElEQVRYR+3UoQ0AQAhD0UOyG5b9x0DebVDEiZqPJSTNS2hU1T1iMlOtz8zI/XYfBEAAAbtAd8se+P3z7T4IgAACdgF7EREAAQTsAvYiIgACCLgFHo3ZzjG+nqs2AAAAAElFTkSuQmCC"},57:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAUklEQVRYR+3UsQkAQAhDUd3J/RfQnbwNYnFFmm8rQnhgsrs3xFSVWsfMyP11nwRAAAG7wO7KHvj98+s+CYAAAnYBexERAAEE7AL2IiIAAgi4BR59ogXwC7msxgAAAABJRU5ErkJggg=="}},[[252,1,2]]]);
//# sourceMappingURL=main.664dddd2.chunk.js.map